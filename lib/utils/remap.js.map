{"version":3,"sources":["../../src/utils/remap.js"],"names":["remap","object","mapping","keepUnmapped","newObj","Object","entries","map","k","v","nk","Array","isArray","module","exports"],"mappings":";;;;AAMA,SAASA,KAAT,CAAeC,MAAf,EAAuBC,OAAvB,EAAgCC,YAAhC,EAA8C;AAC1C,MAAI,OAAOD,OAAP,KAAmB,QAAvB,EAAiC,OAAO;AAAE,KAACA,OAAD,GAAWD;AAAb,GAAP;AAEjC,MAAIG,MAAM,GAAG,EAAb;AACAC,EAAAA,MAAM,CAACC,OAAP,CAAeL,MAAf,EAAuBM,GAAvB,CAA2B,CAAC,CAACC,CAAD,EAAIC,CAAJ,CAAD,KAAY;AACnC,QAAID,CAAC,IAAIN,OAAT,EAAkB;AACd,UAAIQ,EAAE,GAAGR,OAAO,CAACM,CAAD,CAAhB;;AACA,UAAIG,KAAK,CAACC,OAAN,CAAcF,EAAd,CAAJ,EAAuB;AACnBN,QAAAA,MAAM,CAACM,EAAE,CAAC,CAAD,CAAH,CAAN,GAAgB,EACZ,GAAGN,MAAM,CAACM,EAAE,CAAC,CAAD,CAAH,CADG;AAEZ,aAAGV,KAAK,CAACS,CAAD,EAAIC,EAAE,CAAC,CAAD,CAAN,EAAWP,YAAX;AAFI,SAAhB;AAIH,OALD,MAKO;AACHC,QAAAA,MAAM,CAACM,EAAD,CAAN,GAAaD,CAAb;AACH;AACJ,KAVD,MAUO;AACH,UAAIN,YAAJ,EAAkB;AACdC,QAAAA,MAAM,CAACI,CAAD,CAAN,GAAYC,CAAZ;AACH;AACJ;AACJ,GAhBD;AAkBA,SAAOL,MAAP;AACH;;AAEDS,MAAM,CAACC,OAAP,GAAiBd,KAAjB","sourcesContent":["/**\n * Remap the keys of object elements in an array, like projection.\n * @param {*} object\n * @param {*} mapping - key to newKey or key to array[ newKey, valueMap ] for next level mapping\n * @param {boolean} keepUnmapped - If true, will keep those not in mapping as its original key, otherwise filter out\n */\nfunction remap(object, mapping, keepUnmapped) {\n    if (typeof mapping === 'string') return { [mapping]: object };\n\n    let newObj = {};\n    Object.entries(object).map(([k, v]) => {\n        if (k in mapping) {\n            let nk = mapping[k];\n            if (Array.isArray(nk)) {\n                newObj[nk[0]] = {\n                    ...newObj[nk[0]],\n                    ...remap(v, nk[1], keepUnmapped),\n                };\n            } else {\n                newObj[nk] = v;\n            }\n        } else {\n            if (keepUnmapped) {\n                newObj[k] = v;\n            }\n        }\n    });\n\n    return newObj;\n}\n\nmodule.exports = remap;\n"],"file":"remap.js"}