{"version":3,"file":"download.js","names":["path","require","fs","tryRequire","module","exports","url","targetFile","request","dirName","dirname","ensureDir","stream","createWriteStream","Promise","resolve","reject","on","err","get","pipe"],"sources":["../../src/utils/download.js"],"sourcesContent":["const path = require('path');\nconst { fs, tryRequire } = require('@genx/sys');\n\nmodule.exports = async (url, targetFile) => {\n    const request = tryRequire('superagent');\n\n    const dirName = path.dirname(targetFile);\n\n    await fs.ensureDir(dirName);\n\n    const stream = fs.createWriteStream(targetFile);\n\n    await new Promise((resolve, reject) => {\n        stream.on('close', () => {\n            resolve();\n        });\n\n        stream.on('error', (err) => {\n            reject(err);\n        });\n\n        request.get(url).pipe(stream);\n    });\n};\n"],"mappings":";;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAM;EAAEC,EAAE;EAAEC;AAAW,CAAC,GAAGF,OAAO,CAAC,WAAW,CAAC;AAE/CG,MAAM,CAACC,OAAO,GAAG,OAAOC,GAAG,EAAEC,UAAU,KAAK;EACxC,MAAMC,OAAO,GAAGL,UAAU,CAAC,YAAY,CAAC;EAExC,MAAMM,OAAO,GAAGT,IAAI,CAACU,OAAO,CAACH,UAAU,CAAC;EAExC,MAAML,EAAE,CAACS,SAAS,CAACF,OAAO,CAAC;EAE3B,MAAMG,MAAM,GAAGV,EAAE,CAACW,iBAAiB,CAACN,UAAU,CAAC;EAE/C,MAAM,IAAIO,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACnCJ,MAAM,CAACK,EAAE,CAAC,OAAO,EAAE,MAAM;MACrBF,OAAO,EAAE;IACb,CAAC,CAAC;IAEFH,MAAM,CAACK,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAK;MACxBF,MAAM,CAACE,GAAG,CAAC;IACf,CAAC,CAAC;IAEFV,OAAO,CAACW,GAAG,CAACb,GAAG,CAAC,CAACc,IAAI,CAACR,MAAM,CAAC;EACjC,CAAC,CAAC;AACN,CAAC"}