{"version":3,"sources":["../../src/utils/download.js"],"names":["path","require","fs","tryRequire","module","exports","url","targetFile","request","dirName","dirname","ensureDir","stream","createWriteStream","Promise","resolve","reject","on","err","get","pipe"],"mappings":";;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;AAAEC,EAAAA,EAAF;AAAMC,EAAAA;AAAN,IAAqBF,OAAO,CAAC,WAAD,CAAlC;;AAEAG,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,UAAZ,KAA2B;AACxC,QAAMC,OAAO,GAAGL,UAAU,CAAC,YAAD,CAA1B;AAEA,QAAMM,OAAO,GAAGT,IAAI,CAACU,OAAL,CAAaH,UAAb,CAAhB;AAEA,QAAML,EAAE,CAACS,SAAH,CAAaF,OAAb,CAAN;AAEA,QAAMG,MAAM,GAAGV,EAAE,CAACW,iBAAH,CAAqBN,UAArB,CAAf;AAEA,QAAM,IAAIO,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACnCJ,IAAAA,MAAM,CAACK,EAAP,CAAU,OAAV,EAAmB,MAAM;AACrBF,MAAAA,OAAO;AACV,KAFD;AAIAH,IAAAA,MAAM,CAACK,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAAS;AACxBF,MAAAA,MAAM,CAACE,GAAD,CAAN;AACH,KAFD;AAIAV,IAAAA,OAAO,CAACW,GAAR,CAAYb,GAAZ,EAAiBc,IAAjB,CAAsBR,MAAtB;AACH,GAVK,CAAN;AAWH,CApBD","sourcesContent":["const path = require('path');\nconst { fs, tryRequire } = require('@genx/sys');\n\nmodule.exports = async (url, targetFile) => {\n    const request = tryRequire('superagent');\n\n    const dirName = path.dirname(targetFile);\n\n    await fs.ensureDir(dirName);\n\n    const stream = fs.createWriteStream(targetFile);\n\n    await new Promise((resolve, reject) => {\n        stream.on('close', () => {\n            resolve();\n        });\n\n        stream.on('error', (err) => {\n            reject(err);\n        });\n\n        request.get(url).pipe(stream);\n    });\n};\n"],"file":"download.js"}