{"version":3,"file":"download.js","names":["path","require","fs","tryRequire","module","exports","url","targetFile","request","dirName","dirname","ensureDir","stream","createWriteStream","Promise","resolve","reject","on","err","get","pipe"],"sources":["../../src/utils/download.js"],"sourcesContent":["const path = require('path');\nconst { fs, tryRequire } = require('@genx/sys');\n\nmodule.exports = async (url, targetFile) => {\n    const request = tryRequire('superagent');\n\n    const dirName = path.dirname(targetFile);\n\n    await fs.ensureDir(dirName);\n\n    const stream = fs.createWriteStream(targetFile);\n\n    await new Promise((resolve, reject) => {\n        stream.on('close', () => {\n            resolve();\n        });\n\n        stream.on('error', (err) => {\n            reject(err);\n        });\n\n        request.get(url).pipe(stream);\n    });\n};\n"],"mappings":";;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;EAAEC,EAAF;EAAMC;AAAN,IAAqBF,OAAO,CAAC,WAAD,CAAlC;;AAEAG,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,UAAZ,KAA2B;EACxC,MAAMC,OAAO,GAAGL,UAAU,CAAC,YAAD,CAA1B;EAEA,MAAMM,OAAO,GAAGT,IAAI,CAACU,OAAL,CAAaH,UAAb,CAAhB;EAEA,MAAML,EAAE,CAACS,SAAH,CAAaF,OAAb,CAAN;EAEA,MAAMG,MAAM,GAAGV,EAAE,CAACW,iBAAH,CAAqBN,UAArB,CAAf;EAEA,MAAM,IAAIO,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACnCJ,MAAM,CAACK,EAAP,CAAU,OAAV,EAAmB,MAAM;MACrBF,OAAO;IACV,CAFD;IAIAH,MAAM,CAACK,EAAP,CAAU,OAAV,EAAoBC,GAAD,IAAS;MACxBF,MAAM,CAACE,GAAD,CAAN;IACH,CAFD;IAIAV,OAAO,CAACW,GAAR,CAAYb,GAAZ,EAAiBc,IAAjB,CAAsBR,MAAtB;EACH,CAVK,CAAN;AAWH,CApBD"}