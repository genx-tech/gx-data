"use strict";

require("source-map-support/register");

const {
  _
} = require('rk-utils');

const {
  ValidationError
} = require('./Errors');

const OPERATOR_NOT_ALONE = 'Query operator can only be used alone in a stage.';

const INVALID_QUERY_OPERATOR = token => `Invalid JES query operator "${token}".`;

const INVALID_TEST_OPERATOR = token => `Invalid JES test operator "${token}".`;

const INVALID_QUERY_HANDLER = op => `JES query operator "${op}" handler not found.`;

const INVALID_TEST_HANLDER = op => `JES test operator "${op}" handler not found.`;

const NOT_A_TWO_TUPLE = 'The value of collection operator should a two-tuple.';
const INCORRECT_PREFIX = 'Query operator used in matching should starts with prefix $$.';
const NOT_A_UNARY_QUERY = 'Only unary query operator is allowed to be used directly in a matching.';

const INVALID_COLLECTION_OP = op => `Invalid collection operator "${op}".`;

const OPERAND_NOT_ARRAY = op => `The right operand of JES operator "${op}" should be an array.`;

const OPERAND_NOT_BOOL = op => `The right operand of JES operator "${op}" should be a boolean value.`;

const OPERAND_NOT_STRING = op => `The right operand of JES operator "${op}" should be a string.`;

const REQUIRE_RIGHT_OPERAND = op => `Binary query operator "${op}" requires the right operand.`;

const OP_EQUAL = ['$eq', '$eql', '$equal'];
const OP_NOT_EQUAL = ['$ne', '$neq', '$notEqual'];
const OP_GREATER_THAN = ['$gt', '$>', '$greaterThan'];
const OP_GREATER_THAN_OR_EQUAL = ['$gte', '$<=', '$greaterThanOrEqual'];
const OP_LESS_THAN = ['$lt', '$<', '$lessThan'];
const OP_LESS_THAN_OR_EQUAL = ['$lte', '$<=', '$lessThanOrEqual'];
const OP_IN = ['$in'];
const OP_NOT_IN = ['$nin', '$notIn'];
const OP_EXISTS = ['$exist', '$exists'];
const OP_MATCH = ['$has', '$match', '$all'];
const OP_MATCH_ANY = ['$any', '$or', '$either'];
const OP_TYPE = ['$type'];
const OP_SIZE = ['$size', '$length', '$count'];
const OP_SUM = ['$sum', '$total'];
const OP_KEYS = ['$keys'];
const OP_VALUES = ['$values'];
const OP_ADD = ['$add', '$plus', '$inc'];
const OP_SUB = ['$sub', '$subtract', '$minus', '$dec'];
const OP_MUL = ['$mul', '$multiply', '$times'];
const OP_DIV = ['$div', '$divide'];
const OP_PICK = ['$pick'];
const OP_OMIT = ['$omit'];
const OP_GROUP = ['$group', '$groupBy'];
const OP_SORT = ['$sort', '$orderBy', '$sortBy'];
const PFX_MAP_OP = '|>';
const MapOfOps = new Map();

const addOpToMap = (tokens, tag) => tokens.forEach(token => MapOfOps.set(token, tag));

addOpToMap(OP_EQUAL, 'OP_EQUAL');
addOpToMap(OP_NOT_EQUAL, 'OP_NOT_EQUAL');
addOpToMap(OP_GREATER_THAN, 'OP_GREATER_THAN');
addOpToMap(OP_GREATER_THAN_OR_EQUAL, 'OP_GREATER_THAN_OR_EQUAL');
addOpToMap(OP_LESS_THAN, 'OP_LESS_THAN');
addOpToMap(OP_LESS_THAN_OR_EQUAL, 'OP_LESS_THAN_OR_EQUAL');
addOpToMap(OP_IN, 'OP_IN');
addOpToMap(OP_NOT_IN, 'OP_NOT_IN');
addOpToMap(OP_EXISTS, 'OP_EXISTS');
addOpToMap(OP_MATCH, 'OP_MATCH');
addOpToMap(OP_MATCH_ANY, 'OP_MATCH_ANY');
addOpToMap(OP_TYPE, 'OP_TYPE');
const MapOfMans = new Map();

const addManToMap = (tokens, tag) => tokens.forEach(token => MapOfMans.set(token, tag));

addManToMap(OP_SIZE, ['OP_SIZE', true]);
addManToMap(OP_SUM, ['OP_SUM', true]);
addManToMap(OP_KEYS, ['OP_KEYS', true]);
addManToMap(OP_VALUES, ['OP_VALUES', true]);
addManToMap(OP_ADD, ['OP_ADD', false]);
addManToMap(OP_SUB, ['OP_SUB', false]);
addManToMap(OP_MUL, ['OP_MUL', false]);
addManToMap(OP_DIV, ['OP_DIV', false]);
addManToMap(OP_PICK, ['OP_PICK', false]);
addManToMap(OP_OMIT, ['OP_OMIT', false]);
addManToMap(OP_GROUP, ['OP_GROUP', false]);
addManToMap(OP_SORT, ['OP_SORT', false]);
const defaultJesHandlers = {
  OP_EQUAL: (left, right) => _.isEqual(left, right),
  OP_NOT_EQUAL: (left, right) => !_.isEqual(left, right),
  OP_GREATER_THAN: (left, right) => left > right,
  OP_GREATER_THAN_OR_EQUAL: (left, right) => left >= right,
  OP_LESS_THAN: (left, right) => left < right,
  OP_LESS_THAN_OR_EQUAL: (left, right) => left <= right,
  OP_IN: (left, right) => {
    if (right == null) return false;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_IN'));
    }

    return right.find(element => defaultJesHandlers.OP_EQUAL(left, element));
  },
  OP_NOT_IN: (left, right) => {
    if (right == null) return true;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_NOT_IN'));
    }

    return _.every(right, element => defaultJesHandlers.OP_NOT_EQUAL(left, element));
  },
  OP_EXISTS: (left, right) => {
    if (typeof right !== 'boolean') {
      throw new Error(OPERAND_NOT_BOOL('OP_EXISTS'));
    }

    return right ? left != null : left == null;
  },
  OP_TYPE: (left, right) => {
    if (typeof right !== 'string') {
      throw new Error(OPERAND_NOT_STRING('OP_TYPE'));
    }

    right = right.toLowerCase();

    if (right === 'array') {
      return Array.isArray(left);
    }

    if (right === 'integer') {
      return _.isInteger(left);
    }

    return typeof left === right;
  },
  OP_MATCH: (left, right, jes, prefix) => {
    const r = match(left, right, prefix, jes);
    return r[0];
  },
  OP_MATCH_ANY: (left, right, jes, prefix) => {
    let found = _.find(right, rule => {
      const r = match(left, rule, prefix, jes);
      return r[0];
    });

    return found ? true : false;
  }
};
const defaultManipulations = {
  OP_SIZE: left => _.size(left),
  OP_SUM: left => _.reduce(left, (sum, item) => {
    sum += item;
    return sum;
  }, 0),
  OP_KEYS: left => _.keys(left),
  OP_VALUES: left => _.values(left),
  OP_ADD: (left, right) => left + right,
  OP_SUB: (left, right) => left - right,
  OP_MUL: (left, right) => left * right,
  OP_DIV: (left, right) => left / right,
  OP_PICK: (left, right) => _.pick(left, right),
  OP_OMIT: (left, right) => _.omit(left, right),
  OP_GROUP: (left, right) => _.groupBy(left, right),
  OP_SORT: (left, right) => _.sortBy(left, right)
};

const formatName = (name, prefix) => {
  const fullName = name == null ? prefix : formatPrefix(name, prefix);
  return fullName.indexOf('(') !== -1 ? `The query "${fullName}"` : `"${fullName}"`;
};

const formatKey = (key, hasPrefix) => _.isInteger(key) ? `[${key}]` : hasPrefix ? '.' + key : key;

const formatPrefix = (key, prefix) => prefix != null ? `${prefix}${formatKey(key, true)}` : formatKey(key, false);

const formatQuery = opMeta => `${defaultQueryExplanations[opMeta[0]]}(${opMeta[1] ? '' : '?'})`;

const formatMap = name => `map(->${name})`;

const defaultJesExplanations = {
  OP_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should not be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than ${right}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should be one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should not be any one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_EXISTS: (name, left, right, prefix) => `${formatName(name, prefix)} should${right ? ' not ' : ' '}be NULL.`,
  OP_MATCH: (name, left, right, prefix) => `${formatName(name, prefix)} should match ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_MATCH_ANY: (name, left, right, prefix) => `${formatName(name, prefix)} should match any of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_TYPE: (name, left, right, prefix) => `The type of ${formatName(name, prefix)} should be "${right}", but ${JSON.stringify(left)} given.`
};
const defaultQueryExplanations = {
  OP_SIZE: 'size',
  OP_SUM: 'sum',
  OP_KEYS: 'keys',
  OP_VALUES: 'values',
  OP_ADD: 'add',
  OP_SUB: 'subtract',
  OP_MUL: 'multiply',
  OP_DIV: 'divide',
  OP_PICK: 'pick',
  OP_OMIT: 'omit',
  OP_GROUP: 'groupBy',
  OP_SORT: 'sortBy'
};

function getUnmatchedExplanation(jes, op, name, leftValue, rightValue, prefix) {
  const getter = jes.operatorExplanations[op] || jes.operatorExplanations.OP_MATCH;
  return getter(name, leftValue, rightValue, prefix);
}

function test(value, op, opValue, jes, prefix) {
  const handler = jes.operatorHandlers[op];

  if (!handler) {
    throw new Error(INVALID_TEST_HANLDER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluate(value, op, opValue, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluateUnary(value, op, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, jes, prefix);
}

function evaluateByOpMeta(currentValue, rightValue, opMeta, prefix, jes) {
  if (opMeta[1]) {
    return rightValue ? evaluateUnary(currentValue, opMeta[0], jes, prefix) : currentValue;
  }

  return evaluate(currentValue, opMeta[0], rightValue, jes, prefix);
}

const defaultCustomizer = {
  mapOfOperators: MapOfOps,
  mapOfManipulators: MapOfMans,
  operatorHandlers: defaultJesHandlers,
  operatorExplanations: defaultJesExplanations,
  queryHanlders: defaultManipulations
};

function match(actual, expected, prefix, jes) {
  jes != null || (jes = defaultCustomizer);
  let passObjectCheck = false;

  if (!_.isPlainObject(expected)) {
    if (!test(actual, 'OP_EQUAL', expected, jes, prefix)) {
      return [false, jes.operatorExplanations.OP_EQUAL(null, actual, expected, prefix)];
    }

    return [true];
  }

  for (let fieldName in expected) {
    let expectedFieldValue = expected[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (l > 4 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (!Array.isArray(expectedFieldValue) && expectedFieldValue.length !== 2) {
          throw new Error(NOT_A_TWO_TUPLE);
        }

        if (fieldName[3] !== '$') {
          throw new Error(INCORRECT_PREFIX);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(3);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          const mapResult = _.isPlainObject(actual) ? _.mapValues(actual, (item, key) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(key, prefix), jes)) : _.map(actual, (item, i) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(i, prefix), jes));
          const matchResult = match(mapResult, expectedFieldValue[1], formatPrefix(formatMap(formatQuery(opMeta)), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        continue;
      }

      if (fieldName[0] === '$') {
        if (l > 2 && fieldName[1] === '$') {
          fieldName = fieldName.substr(1);
          const opMeta = jes.mapOfManipulators.get(fieldName);

          if (!opMeta) {
            throw new Error(INVALID_QUERY_OPERATOR(fieldName));
          }

          if (!opMeta[1]) {
            throw new Error(NOT_A_UNARY_QUERY);
          }

          const queryResult = evaluateUnary(actual, opMeta[0], jes, prefix);
          const matchResult = match(queryResult, expectedFieldValue, formatPrefix(formatQuery(opMeta), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }

          continue;
        }

        const op = jes.mapOfOperators.get(fieldName);

        if (!op) {
          throw new Error(INVALID_TEST_OPERATOR(fieldName));
        }

        if (!test(actual, op, expectedFieldValue, jes, prefix)) {
          return [false, getUnmatchedExplanation(jes, op, null, actual, expectedFieldValue, prefix)];
        }

        continue;
      }
    }

    if (!passObjectCheck) {
      if (actual == null) return [false, jes.operatorExplanations.OP_EXISTS(null, null, true, prefix)];
      const actualType = typeof actual;
      if (actualType !== 'object') return [false, jes.operatorExplanations.OP_TYPE(null, actualType, 'object', prefix)];
    }

    passObjectCheck = true;
    let actualFieldValue = actual[fieldName];

    if (expectedFieldValue != null && typeof expectedFieldValue === 'object') {
      const [ok, reason] = match(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

      if (!ok) {
        return [false, reason];
      }
    } else {
      if (!test(actualFieldValue, 'OP_EQUAL', expectedFieldValue, jes, prefix)) {
        return [false, jes.operatorExplanations.OP_EQUAL(fieldName, actualFieldValue, expectedFieldValue, prefix)];
      }
    }
  }

  return [true];
}

function evaluateExpr(currentValue, expr, prefix, jes) {
  jes != null || (jes = defaultCustomizer);

  if (Array.isArray(expr)) {
    return expr.reduce((result, exprItem) => evaluateExpr(result, exprItem, prefix, jes), currentValue);
  }

  if (typeof expr === 'string') {
    const opMeta = jes.mapOfManipulators.get(expr);

    if (!opMeta) {
      throw new Error(INVALID_QUERY_OPERATOR(expr));
    }

    if (!opMeta[1]) {
      throw new Error(REQUIRE_RIGHT_OPERAND(expr));
    }

    return evaluateUnary(currentValue, opMeta[0], jes, prefix);
  }

  let result,
      hasOperator = false;

  for (let fieldName in expr) {
    let expectedFieldValue = expr[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (fieldName[0] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        result = evaluateByOpMeta(currentValue, expectedFieldValue, opMeta, prefix, jes);
        hasOperator = true;
        continue;
      }

      if (l > 3 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(2);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          result = _.map(currentValue, (item, i) => evaluateByOpMeta(item, expectedFieldValue, opMeta, formatPrefix(i, prefix), jes));
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        hasOperator = true;
        continue;
      }
    }

    if (hasOperator) {
      throw new Error(OPERATOR_NOT_ALONE);
    }

    let actualFieldValue = currentValue != null ? currentValue[fieldName] : undefined;
    const childFieldValue = evaluateExpr(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

    if (typeof childFieldValue !== 'undefined') {
      result = { ...result,
        [fieldName]: childFieldValue
      };
    }
  }

  return result;
}

class JES {
  constructor(value, customizer) {
    this.value = value;
    this.customizer = customizer;
  }

  match(expected) {
    const result = match(this.value, expected, undefined, this.customizer);
    if (result[0]) return this;
    throw new ValidationError(result[1], {
      actual: this.value,
      expected
    });
  }

  evaluate(expr) {
    return evaluateExpr(this.value, expr, undefined, this.customizer);
  }

  update(expr) {
    const value = evaluateExpr(this.value, expr, undefined, this.customizer);
    this.value = value;
    return this;
  }

}

JES.match = match;
JES.evaluate = evaluateExpr;
JES.defaultCustomizer = defaultCustomizer;
module.exports = JES;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9qZXMuanMiXSwibmFtZXMiOlsiXyIsInJlcXVpcmUiLCJWYWxpZGF0aW9uRXJyb3IiLCJPUEVSQVRPUl9OT1RfQUxPTkUiLCJJTlZBTElEX1FVRVJZX09QRVJBVE9SIiwidG9rZW4iLCJJTlZBTElEX1RFU1RfT1BFUkFUT1IiLCJJTlZBTElEX1FVRVJZX0hBTkRMRVIiLCJvcCIsIklOVkFMSURfVEVTVF9IQU5MREVSIiwiTk9UX0FfVFdPX1RVUExFIiwiSU5DT1JSRUNUX1BSRUZJWCIsIk5PVF9BX1VOQVJZX1FVRVJZIiwiSU5WQUxJRF9DT0xMRUNUSU9OX09QIiwiT1BFUkFORF9OT1RfQVJSQVkiLCJPUEVSQU5EX05PVF9CT09MIiwiT1BFUkFORF9OT1RfU1RSSU5HIiwiUkVRVUlSRV9SSUdIVF9PUEVSQU5EIiwiT1BfRVFVQUwiLCJPUF9OT1RfRVFVQUwiLCJPUF9HUkVBVEVSX1RIQU4iLCJPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUwiLCJPUF9MRVNTX1RIQU4iLCJPUF9MRVNTX1RIQU5fT1JfRVFVQUwiLCJPUF9JTiIsIk9QX05PVF9JTiIsIk9QX0VYSVNUUyIsIk9QX01BVENIIiwiT1BfTUFUQ0hfQU5ZIiwiT1BfVFlQRSIsIk9QX1NJWkUiLCJPUF9TVU0iLCJPUF9LRVlTIiwiT1BfVkFMVUVTIiwiT1BfQUREIiwiT1BfU1VCIiwiT1BfTVVMIiwiT1BfRElWIiwiT1BfUElDSyIsIk9QX09NSVQiLCJPUF9HUk9VUCIsIk9QX1NPUlQiLCJQRlhfTUFQX09QIiwiTWFwT2ZPcHMiLCJNYXAiLCJhZGRPcFRvTWFwIiwidG9rZW5zIiwidGFnIiwiZm9yRWFjaCIsInNldCIsIk1hcE9mTWFucyIsImFkZE1hblRvTWFwIiwiZGVmYXVsdEplc0hhbmRsZXJzIiwibGVmdCIsInJpZ2h0IiwiaXNFcXVhbCIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiZmluZCIsImVsZW1lbnQiLCJldmVyeSIsInRvTG93ZXJDYXNlIiwiaXNJbnRlZ2VyIiwiamVzIiwicHJlZml4IiwiciIsIm1hdGNoIiwiZm91bmQiLCJydWxlIiwiZGVmYXVsdE1hbmlwdWxhdGlvbnMiLCJzaXplIiwicmVkdWNlIiwic3VtIiwiaXRlbSIsImtleXMiLCJ2YWx1ZXMiLCJwaWNrIiwib21pdCIsImdyb3VwQnkiLCJzb3J0QnkiLCJmb3JtYXROYW1lIiwibmFtZSIsImZ1bGxOYW1lIiwiZm9ybWF0UHJlZml4IiwiaW5kZXhPZiIsImZvcm1hdEtleSIsImtleSIsImhhc1ByZWZpeCIsImZvcm1hdFF1ZXJ5Iiwib3BNZXRhIiwiZGVmYXVsdFF1ZXJ5RXhwbGFuYXRpb25zIiwiZm9ybWF0TWFwIiwiZGVmYXVsdEplc0V4cGxhbmF0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRVbm1hdGNoZWRFeHBsYW5hdGlvbiIsImxlZnRWYWx1ZSIsInJpZ2h0VmFsdWUiLCJnZXR0ZXIiLCJvcGVyYXRvckV4cGxhbmF0aW9ucyIsInRlc3QiLCJ2YWx1ZSIsIm9wVmFsdWUiLCJoYW5kbGVyIiwib3BlcmF0b3JIYW5kbGVycyIsImV2YWx1YXRlIiwicXVlcnlIYW5sZGVycyIsImV2YWx1YXRlVW5hcnkiLCJldmFsdWF0ZUJ5T3BNZXRhIiwiY3VycmVudFZhbHVlIiwiZGVmYXVsdEN1c3RvbWl6ZXIiLCJtYXBPZk9wZXJhdG9ycyIsIm1hcE9mTWFuaXB1bGF0b3JzIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJwYXNzT2JqZWN0Q2hlY2siLCJpc1BsYWluT2JqZWN0IiwiZmllbGROYW1lIiwiZXhwZWN0ZWRGaWVsZFZhbHVlIiwibCIsImxlbmd0aCIsIm1hcE9wIiwic3Vic3RyIiwiZ2V0IiwibWFwUmVzdWx0IiwibWFwVmFsdWVzIiwibWFwIiwiaSIsIm1hdGNoUmVzdWx0IiwicXVlcnlSZXN1bHQiLCJhY3R1YWxUeXBlIiwiYWN0dWFsRmllbGRWYWx1ZSIsIm9rIiwicmVhc29uIiwiZXZhbHVhdGVFeHByIiwiZXhwciIsInJlc3VsdCIsImV4cHJJdGVtIiwiaGFzT3BlcmF0b3IiLCJ1bmRlZmluZWQiLCJjaGlsZEZpZWxkVmFsdWUiLCJKRVMiLCJjb25zdHJ1Y3RvciIsImN1c3RvbWl6ZXIiLCJ1cGRhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQVFDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFzQkQsT0FBTyxDQUFDLFVBQUQsQ0FBbkM7O0FBR0EsTUFBTUUsa0JBQWtCLEdBQUcsbURBQTNCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHQyxLQUFLLElBQUssK0JBQThCQSxLQUFNLElBQTdFOztBQUNBLE1BQU1DLHFCQUFxQixHQUFHRCxLQUFLLElBQUssOEJBQTZCQSxLQUFNLElBQTNFOztBQUNBLE1BQU1FLHFCQUFxQixHQUFHQyxFQUFFLElBQUssdUJBQXNCQSxFQUFHLHNCQUE5RDs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBR0QsRUFBRSxJQUFLLHNCQUFxQkEsRUFBRyxzQkFBNUQ7O0FBQ0EsTUFBTUUsZUFBZSxHQUFHLHNEQUF4QjtBQUNBLE1BQU1DLGdCQUFnQixHQUFHLCtEQUF6QjtBQUNBLE1BQU1DLGlCQUFpQixHQUFHLHlFQUExQjs7QUFDQSxNQUFNQyxxQkFBcUIsR0FBR0wsRUFBRSxJQUFLLGdDQUErQkEsRUFBRyxJQUF2RTs7QUFFQSxNQUFNTSxpQkFBaUIsR0FBR04sRUFBRSxJQUFLLHNDQUFxQ0EsRUFBRyx1QkFBekU7O0FBQ0EsTUFBTU8sZ0JBQWdCLEdBQUVQLEVBQUUsSUFBSyxzQ0FBcUNBLEVBQUcsOEJBQXZFOztBQUNBLE1BQU1RLGtCQUFrQixHQUFFUixFQUFFLElBQUssc0NBQXFDQSxFQUFHLHVCQUF6RTs7QUFFQSxNQUFNUyxxQkFBcUIsR0FBR1QsRUFBRSxJQUFLLDBCQUF5QkEsRUFBRywrQkFBakU7O0FBR0EsTUFBTVUsUUFBUSxHQUFHLENBQUUsS0FBRixFQUFTLE1BQVQsRUFBaUIsUUFBakIsQ0FBakI7QUFDQSxNQUFNQyxZ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S0FBS2pDLEtBQU4sRUFBYWtDLElBQWIsRUFBbUJJLFNBQW5CLEVBQThCLEtBQUtJLFVBQW5DLENBQTFCO0FBQ0EsU0FBSzFDLEtBQUwsR0FBYUEsS0FBYjtBQUNBLFdBQU8sSUFBUDtBQUNIOztBQTdCSzs7QUFnQ1Z3QyxHQUFHLENBQUMzRSxLQUFKLEdBQVlBLEtBQVo7QUFDQTJFLEdBQUcsQ0FBQ3BDLFFBQUosR0FBZTZCLFlBQWY7QUFDQU8sR0FBRyxDQUFDL0IsaUJBQUosR0FBd0JBLGlCQUF4QjtBQUVBbUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCTCxHQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIEpTT04gRXhwcmVzc2lvbiBTeW50YXggKEpFUylcbmNvbnN0IHsgXyB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcbmNvbnN0IHsgVmFsaWRhdGlvbkVycm9yIH0gPSByZXF1aXJlKCcuL0Vycm9ycycpO1xuXG4vL0V4Y2VwdGlvbiBtZXNzYWdlc1xuY29uc3QgT1BFUkFUT1JfTk9UX0FMT05FID0gJ1F1ZXJ5IG9wZXJhdG9yIGNhbiBvbmx5IGJlIHVzZWQgYWxvbmUgaW4gYSBzdGFnZS4nO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7dG9rZW59XCIuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHt0b2tlbn1cIi5gO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9IQU5ETEVSID0gb3AgPT4gYEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7b3B9XCIgaGFuZGxlciBub3QgZm91bmQuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9IQU5MREVSID0gb3AgPT4gYEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHtvcH1cIiBoYW5kbGVyIG5vdCBmb3VuZC5gO1xuY29uc3QgTk9UX0FfVFdPX1RVUExFID0gJ1RoZSB2YWx1ZSBvZiBjb2xsZWN0aW9uIG9wZXJhdG9yIHNob3VsZCBhIHR3by10dXBsZS4nO1xuY29uc3QgSU5DT1JSRUNUX1BSRUZJWCA9ICdRdWVyeSBvcGVyYXRvciB1c2VkIGluIG1hdGNoaW5nIHNob3VsZCBzdGFydHMgd2l0aCBwcmVmaXggJCQuJztcbmNvbnN0IE5PVF9BX1VOQVJZX1FVRVJZID0gJ09ubHkgdW5hcnkgcXVlcnkgb3BlcmF0b3IgaXMgYWxsb3dlZCB0byBiZSB1c2VkIGRpcmVjdGx5IGluIGEgbWF0Y2hpbmcuJztcbmNvbnN0IElOVkFMSURfQ09MTEVDVElPTl9PUCA9IG9wID0+IGBJbnZhbGlkIGNvbGxlY3Rpb24gb3BlcmF0b3IgXCIke29wfVwiLmA7XG5cbmNvbnN0IE9QRVJBTkRfTk9UX0FSUkFZID0gb3AgPT4gYFRoZSByaWdodCBvcGVyYW5kIG9mIEpFUyBvcGVyYXRvciBcIiR7b3B9XCIgc2hvdWxkIGJlIGFuIGFycmF5LmA7XG5jb25zdCBPUEVSQU5EX05PVF9CT09MPSBvcCA9PiBgVGhlIHJpZ2h0IG9wZXJhbmQgb2YgSkVTIG9wZXJhdG9yIFwiJHtvcH1cIiBzaG91bGQgYmUgYSBib29sZWFuIHZhbHVlLmA7XG5jb25zdCBPUEVSQU5EX05PVF9TVFJJTkc9IG9wID0+IGBUaGUgcmlnaHQgb3BlcmFuZCBvZiBKRVMgb3BlcmF0b3IgXCIke29wfVwiIHNob3VsZCBiZSBhIHN0cmluZy5gO1xuXG5jb25zdCBSRVFVSVJFX1JJR0hUX09QRVJBTkQgPSBvcCA9PiBgQmluYXJ5IHF1ZXJ5IG9wZXJhdG9yIFwiJHtvcH1cIiByZXF1aXJlcyB0aGUgcmlnaHQgb3BlcmFuZC5gXG5cbi8vQ29uZGl0aW9uIG9wZXJhdG9yXG5jb25zdCBPUF9FUVVBTCA9IFsgJyRlcScsICckZXFsJywgJyRlcXVhbCcgXTtcbmNvbnN0IE9QX05PVF9FUVVBTCA9IFsgJyRuZScsICckbmVxJywgJyRub3RFcXVhbCcgXTtcblxuY29uc3QgT1BfR1JFQVRFUl9USEFOID0gWyAnJGd0JywgJyQ+JywgJyRncmVhdGVyVGhhbicgXTtcbmNvbnN0IE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCA9IFsgJyRndGUnLCAnJDw9JywgJyRncmVhdGVyVGhhbk9yRXF1YWwnIF07XG5cbmNvbnN0IE9QX0xFU1NfVEhBTiA9IFsgJyRsdCcsICckPCcsICckbGVzc1RoYW4nIF07XG5jb25zdCBPUF9MRVNTX1RIQU5fT1JfRVFVQUwgPSBbICckbHRlJywgJyQ8PScsICckbGVzc1RoYW5PckVxdWFsJyBdO1xuXG5jb25zdCBPUF9JTiA9IFsgJyRpbicgXTtcbmNvbnN0IE9QX05PVF9JTiA9IFsgJyRuaW4nLCAnJG5vdEluJyBdO1xuXG5jb25zdCBPUF9FWElTVFMgPSBbICckZXhpc3QnLCAnJGV4aXN0cycgXTtcblxuY29uc3QgT1BfTUFUQ0ggPSBbICckaGFzJywgJyRtYXRjaCcsICckYWxsJyBdO1xuXG5jb25zdCBPUF9NQVRDSF9BTlkgPSBbICckYW55JywgJyRvcicsICckZWl0aGVyJyBdO1xuXG5jb25zdCBPUF9UWVBFID0gWyAnJHR5cGUnIF07XG5cbi8vUXVlcnkgJiBhZ2dyZWdhdGUgb3BlcmF0b3JcbmNvbnN0IE9QX1NJWkUgPSBbICckc2l6ZScsICckbGVuZ3RoJywgJyRjb3VudCcgXTtcbmNvbnN0IE9QX1NVTSA9IFsgJyRzdW0nLCAnJHRvdGFsJyBdO1xuY29uc3QgT1BfS0VZUyA9IFsgJyRrZXlzJyBdO1xuY29uc3QgT1BfVkFMVUVTID0gWyAnJHZhbHVlcycgXTtcblxuLy9NYW5pcHVsYXRlIG9wZXJhdGlvblxuY29uc3QgT1BfQUREID0gWyAnJGFkZCcsICckcGx1cycsICAgICAnJGluYycgXTtcbmNvbnN0IE9QX1NVQiA9IFsgJyRzdWInLCAnJHN1YnRyYWN0JywgJyRtaW51cycsICckZGVjJyBdO1xuY29uc3QgT1BfTVVMID0gWyAnJG11bCcsICckbXVsdGlwbHknLCAgJyR0aW1lcycgXTtcbmNvbnN0IE9QX0RJViA9IFsgJyRkaXYnLCAnJGRpdmlkZScgXTtcblxuY29uc3QgT1BfUElDSyA9IFsgJyRwaWNrJyBdO1xuY29uc3QgT1BfT01JVCA9IFsgJyRvbWl0JyBdO1xuY29uc3QgT1BfR1JPVVAgPSBbICckZ3JvdXAnLCAnJGdyb3VwQnknIF07XG5jb25zdCBPUF9TT1JUID0gWyAnJHNvcnQnLCAnJG9yZGVyQnknLCAnJHNvcnRCeScgXTtcblxuY29uc3QgUEZYX01BUF9PUCA9ICd8Pic7XG5cbmNvbnN0IE1hcE9mT3BzID0gbmV3IE1hcCgpO1xuY29uc3QgYWRkT3BUb01hcCA9ICh0b2tlbnMsIHRhZykgPT4gdG9rZW5zLmZvckVhY2godG9rZW4gPT4gTWFwT2ZPcHMuc2V0KHRva2VuLCB0YWcpKTtcbmFkZE9wVG9NYXAoT1BfRVFVQUwsICdPUF9FUVVBTCcpO1xuYWRkT3BUb01hcChPUF9OT1RfRVFVQUwsICdPUF9OT1RfRVFVQUwnKTtcbmFkZE9wVG9NYXAoT1BfR1JFQVRFUl9USEFOLCAnT1BfR1JFQVRFUl9USEFOJyk7XG5hZGRPcFRvTWFwKE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCwgJ09QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCcpO1xuYWRkT3BUb01hcChPUF9MRVNTX1RIQU4sICdPUF9MRVNTX1RIQU4nKTtcbmFkZE9wVG9NYXAoT1BfTEVTU19USEFOX09SX0VRVUFMLCAnT1BfTEVTU19USEFOX09SX0VRVUFMJyk7XG5hZGRPcFRvTWFwKE9QX0lOLCAnT1BfSU4nKTtcbmFkZE9wVG9NYXAoT1BfTk9UX0lOLCAnT1BfTk9UX0lOJyk7XG5hZGRPcFRvTWFwKE9QX0VYSVNUUywgJ09QX0VYSVNUUycpO1xuYWRkT3BUb01hcChPUF9NQVRDSCwgJ09QX01BVENIJyk7XG5hZGRPcFRvTWFwKE9QX01BVENIX0FOWSwgJ09QX01BVENIX0FOWScpO1xuYWRkT3BUb01hcChPUF9UWVBFLCAnT1BfVFlQRScpO1xuXG5jb25zdCBNYXBPZk1hbnMgPSBuZXcgTWFwKCk7XG5jb25zdCBhZGRNYW5Ub01hcCA9ICh0b2tlbnMsIHRhZykgPT4gdG9rZW5zLmZvckVhY2godG9rZW4gPT4gTWFwT2ZNYW5zLnNldCh0b2tlbiwgdGFnKSk7XG4vLyBbIDxvcCBuYW1lPiwgPHVuYXJ5PiBdXG5hZGRNYW5Ub01hcChPUF9TSVpFLCBbJ09QX1NJWkUnLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX1NVTSwgWydPUF9TVU0nLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX0tFWVMsIFsnT1BfS0VZUycsIHRydWUgXSk7IFxuYWRkTWFuVG9NYXAoT1BfVkFMVUVTLCBbJ09QX1ZBTFVFUycsIHRydWUgXSk7IFxuXG5hZGRNYW5Ub01hcChPUF9BREQsIFsnT1BfQUREJywgZmFsc2UgXSk7IFxuYWRkTWFuVG9NYXAoT1BfU1VCLCBbJ09QX1NVQicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfTVVMLCBbJ09QX01VTCcsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfRElWLCBbJ09QX0RJVicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfUElDSywgWydPUF9QSUNLJywgZmFsc2VdKTtcbmFkZE1hblRvTWFwKE9QX09NSVQsIFsnT1BfT01JVCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9HUk9VUCwgWydPUF9HUk9VUCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9TT1JULCBbJ09QX1NPUlQnLCBmYWxzZV0pO1xuXG5jb25zdCBkZWZhdWx0SmVzSGFuZGxlcnMgPSB7XG4gICAgT1BfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gXy5pc0VxdWFsKGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9OT1RfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gIV8uaXNFcXVhbChsZWZ0LCByaWdodCksXG4gICAgT1BfR1JFQVRFUl9USEFOOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgPiByaWdodCxcbiAgICBPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gbGVmdCA+PSByaWdodCxcbiAgICBPUF9MRVNTX1RIQU46IChsZWZ0LCByaWdodCkgPT4gbGVmdCA8IHJpZ2h0LFxuICAgIE9QX0xFU1NfVEhBTl9PUl9FUVVBTDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0IDw9IHJpZ2h0LFxuICAgIE9QX0lOOiAobGVmdCwgcmlnaHQpID0+IHtcbiAgICAgICAgaWYgKHJpZ2h0ID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9JTicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodC5maW5kKGVsZW1lbnQgPT4gZGVmYXVsdEplc0hhbmRsZXJzLk9QX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX05PVF9JTjogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmIChyaWdodCA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9OT1RfSU4nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gXy5ldmVyeShyaWdodCwgZWxlbWVudCA9PiBkZWZhdWx0SmVzSGFuZGxlcnMuT1BfTk9UX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX0VYSVNUUzogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcmlnaHQgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0JPT0woJ09QX0VYSVNUUycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodCA/IGxlZnQgIT0gbnVsbCA6IGxlZnQgPT0gbnVsbDtcbiAgICB9LFxuICAgIE9QX1RZUEU6IChsZWZ0LCByaWdodCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHJpZ2h0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX1NUUklORygnT1BfVFlQRScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJpZ2h0ID0gcmlnaHQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAocmlnaHQgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGxlZnQpO1xuICAgICAgICB9IFxuXG4gICAgICAgIGlmIChyaWdodCA9PT0gJ2ludGVnZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5pc0ludGVnZXIobGVmdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHlwZW9mIGxlZnQgPT09IHJpZ2h0O1xuICAgIH0sXG4gICAgT1BfTUFUQ0g6IChsZWZ0LCByaWdodCwgamVzLCBwcmVmaXgpID0+IHtcbiAgICAgICAgY29uc3QgciA9IG1hdGNoKGxlZnQsIHJpZ2h0LCBwcmVmaXgsIGplcyk7XG4gICAgICAgIHJldHVybiByWzBdO1xuICAgIH0sXG4gICAgT1BfTUFUQ0hfQU5ZOiAobGVmdCwgcmlnaHQsIGplcywgcHJlZml4KSA9PiB7XG4gICAgICAgIGxldCBmb3VuZCA9IF8uZmluZChyaWdodCwgcnVsZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbWF0Y2gobGVmdCwgcnVsZSwgcHJlZml4LCBqZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHJbMF07XG4gICAgICAgIH0pOyAgIFxuICAgIFxuICAgICAgICByZXR1cm4gZm91bmQgPyB0cnVlIDogZmFsc2U7XG4gICAgfSAgICBcbn07XG5cbmNvbnN0IGRlZmF1bHRNYW5pcHVsYXRpb25zID0ge1xuICAgIC8vdW5hcnlcbiAgICBPUF9TSVpFOiAobGVmdCkgPT4gXy5zaXplKGxlZnQpLFxuICAgIE9QX1NVTTogKGxlZnQpID0+IF8ucmVkdWNlKGxlZnQsIChzdW0sIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHN1bSArPSBpdGVtO1xuICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgfSwgMCksXG5cbiAgICBPUF9LRVlTOiAobGVmdCkgPT4gXy5rZXlzKGxlZnQpLFxuICAgIE9QX1ZBTFVFUzogKGxlZnQpID0+IF8udmFsdWVzKGxlZnQpLCAgICAgXG5cbiAgICAvL2JpbmFyeVxuICAgIE9QX0FERDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0ICsgcmlnaHQsXG4gICAgT1BfU1VCOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgLSByaWdodCxcbiAgICBPUF9NVUw6IChsZWZ0LCByaWdodCkgPT4gbGVmdCAqIHJpZ2h0LFxuICAgIE9QX0RJVjogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0IC8gcmlnaHQsIFxuICAgIE9QX1BJQ0s6IChsZWZ0LCByaWdodCkgPT4gXy5waWNrKGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9PTUlUOiAobGVmdCwgcmlnaHQpID0+IF8ub21pdChsZWZ0LCByaWdodCksXG4gICAgT1BfR1JPVVA6IChsZWZ0LCByaWdodCkgPT4gXy5ncm91cEJ5KGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9TT1JUOiAobGVmdCwgcmlnaHQpID0+IF8uc29ydEJ5KGxlZnQsIHJpZ2h0KSxcbn1cblxuY29uc3QgZm9ybWF0TmFtZSA9IChuYW1lLCBwcmVmaXgpID0+IHtcbiAgICBjb25zdCBmdWxsTmFtZSA9IG5hbWUgPT0gbnVsbCA/IHByZWZpeCA6IGZvcm1hdFByZWZpeChuYW1lLCBwcmVmaXgpO1xuICAgIHJldHVybiBmdWxsTmFtZS5pbmRleE9mKCcoJykgIT09IC0xID8gYFRoZSBxdWVyeSBcIiR7ZnVsbE5hbWV9XCJgIDogYFwiJHtmdWxsTmFtZX1cImA7XG59O1xuY29uc3QgZm9ybWF0S2V5ID0gKGtleSwgaGFzUHJlZml4KSA9PiBfLmlzSW50ZWdlcihrZXkpID8gYFske2tleX1dYCA6IChoYXNQcmVmaXggPyAnLicgKyBrZXkgOiBrZXkpO1xuY29uc3QgZm9ybWF0UHJlZml4ID0gKGtleSwgcHJlZml4KSA9PiBwcmVmaXggIT0gbnVsbCA/IGAke3ByZWZpeH0ke2Zvcm1hdEtleShrZXksIHRydWUpfWAgOiBmb3JtYXRLZXkoa2V5LCBmYWxzZSk7XG5jb25zdCBmb3JtYXRRdWVyeSA9IChvcE1ldGEpID0+IGAke2RlZmF1bHRRdWVyeUV4cGxhbmF0aW9uc1tvcE1ldGFbMF1dfSgke29wTWV0YVsxXSA/ICcnIDogJz8nfSlgOyAgXG5jb25zdCBmb3JtYXRNYXAgPSAobmFtZSkgPT4gYG1hcCgtPiR7bmFtZX0pYDtcblxuY29uc3QgZGVmYXVsdEplc0V4cGxhbmF0aW9ucyA9IHtcbiAgICBPUF9FUVVBTDogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTk9UX0VRVUFMOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgbm90IGJlICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfR1JFQVRFUl9USEFOOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuICR7cmlnaHR9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUw6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtyaWdodH0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX0xFU1NfVEhBTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIGxlc3MgdGhhbiAke3JpZ2h0fSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTEVTU19USEFOX09SX0VRVUFMOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICR7cmlnaHR9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9JTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIG9uZSBvZiAke0pTT04uc3RyaW5naWZ5KHJpZ2h0KX0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX05PVF9JTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG5vdCBiZSBhbnkgb25lIG9mICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfRVhJU1RTOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQke3JpZ2h0ID8gJyBub3QgJzogJyAnfWJlIE5VTEwuYCwgICAgXG4gICAgT1BfTUFUQ0g6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBtYXRjaCAke0pTT04uc3RyaW5naWZ5KHJpZ2h0KX0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLCAgICBcbiAgICBPUF9NQVRDSF9BTlk6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBtYXRjaCBhbnkgb2YgJHtKU09OLnN0cmluZ2lmeShyaWdodCl9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9UWVBFOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYFRoZSB0eXBlIG9mICR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgXCIke3JpZ2h0fVwiLCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCAgICAgICAgXG59O1xuXG5jb25zdCBkZWZhdWx0UXVlcnlFeHBsYW5hdGlvbnMgPSB7XG4gICAgLy91bmFyeVxuICAgIE9QX1NJWkU6ICdzaXplJyxcbiAgICBPUF9TVU06ICdzdW0nLFxuICAgIE9QX0tFWVM6ICdrZXlzJyxcbiAgICBPUF9WQUxVRVM6ICd2YWx1ZXMnLCAgICAgXG5cbiAgICAvL2JpbmFyeVxuICAgIE9QX0FERDogJ2FkZCcsXG4gICAgT1BfU1VCOiAnc3VidHJhY3QnLFxuICAgIE9QX01VTDogJ211bHRpcGx5JyxcbiAgICBPUF9ESVY6ICdkaXZpZGUnLCBcbiAgICBPUF9QSUNLOiAncGljaycsXG4gICAgT1BfT01JVDogJ29taXQnLFxuICAgIE9QX0dST1VQOiAnZ3JvdXBCeScsXG4gICAgT1BfU09SVDogJ3NvcnRCeScsXG59O1xuXG5mdW5jdGlvbiBnZXRVbm1hdGNoZWRFeHBsYW5hdGlvbihqZXMsIG9wLCBuYW1lLCBsZWZ0VmFsdWUsIHJpZ2h0VmFsdWUsIHByZWZpeCkge1xuICAgIGNvbnN0IGdldHRlciA9IGplcy5vcGVyYXRvckV4cGxhbmF0aW9uc1tvcF0gfHwgamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zLk9QX01BVENIO1xuICAgIHJldHVybiBnZXR0ZXIobmFtZSwgbGVmdFZhbHVlLCByaWdodFZhbHVlLCBwcmVmaXgpOyAgICBcbn1cblxuZnVuY3Rpb24gdGVzdCh2YWx1ZSwgb3AsIG9wVmFsdWUsIGplcywgcHJlZml4KSB7IFxuICAgIGNvbnN0IGhhbmRsZXIgPSBqZXMub3BlcmF0b3JIYW5kbGVyc1tvcF07XG5cbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfVEVTVF9IQU5MREVSKG9wKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhbmRsZXIodmFsdWUsIG9wVmFsdWUsIGplcywgcHJlZml4KTtcbn1cblxuZnVuY3Rpb24gZXZhbHVhdGUodmFsdWUsIG9wLCBvcFZhbHVlLCBqZXMsIHByZWZpeCkgeyBcbiAgICBjb25zdCBoYW5kbGVyID0gamVzLnF1ZXJ5SGFubGRlcnNbb3BdO1xuXG4gICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX0hBTkRMRVIob3ApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSwgb3BWYWx1ZSwgamVzLCBwcmVmaXgpO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZVVuYXJ5KHZhbHVlLCBvcCwgamVzLCBwcmVmaXgpIHsgXG4gICAgY29uc3QgaGFuZGxlciA9IGplcy5xdWVyeUhhbmxkZXJzW29wXTtcblxuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9RVUVSWV9IQU5ETEVSKG9wKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhbmRsZXIodmFsdWUsIGplcywgcHJlZml4KTtcbn1cblxuZnVuY3Rpb24gZXZhbHVhdGVCeU9wTWV0YShjdXJyZW50VmFsdWUsIHJpZ2h0VmFsdWUsIG9wTWV0YSwgcHJlZml4LCBqZXMpIHtcbiAgICBpZiAob3BNZXRhWzFdKSB7XG4gICAgICAgIHJldHVybiByaWdodFZhbHVlID8gZXZhbHVhdGVVbmFyeShjdXJyZW50VmFsdWUsIG9wTWV0YVswXSwgamVzLCBwcmVmaXgpIDogY3VycmVudFZhbHVlO1xuICAgIH0gXG4gICAgXG4gICAgcmV0dXJuIGV2YWx1YXRlKGN1cnJlbnRWYWx1ZSwgb3BNZXRhWzBdLCByaWdodFZhbHVlLCBqZXMsIHByZWZpeCk7XG59XG5cbmNvbnN0IGRlZmF1bHRDdXN0b21pemVyID0ge1xuICAgIG1hcE9mT3BlcmF0b3JzOiBNYXBPZk9wcyxcbiAgICBtYXBPZk1hbmlwdWxhdG9yczogTWFwT2ZNYW5zLFxuICAgIG9wZXJhdG9ySGFuZGxlcnM6IGRlZmF1bHRKZXNIYW5kbGVycyxcbiAgICBvcGVyYXRvckV4cGxhbmF0aW9uczogZGVmYXVsdEplc0V4cGxhbmF0aW9ucyxcbiAgICBxdWVyeUhhbmxkZXJzOiBkZWZhdWx0TWFuaXB1bGF0aW9uc1xufTtcblxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7Kn0gYWN0dWFsIFxuICogQHBhcmFtIHsqfSBleHBlY3RlZCBcbiAqIEBwYXJhbSB7Kn0gcHJlZml4IFxuICogQHBhcmFtIHsqfSBqZXMgXG4gKiBcbiAqIHsga2V5OiB7ICRtYXRjaCB9IH1cbiAqL1xuZnVuY3Rpb24gbWF0Y2goYWN0dWFsLCBleHBlY3RlZCwgcHJlZml4LCBqZXMpIHtcbiAgICBqZXMgIT0gbnVsbCB8fCAoamVzID0gZGVmYXVsdEN1c3RvbWl6ZXIpO1xuICAgIGxldCBwYXNzT2JqZWN0Q2hlY2sgPSBmYWxzZTtcblxuICAgIGlmICghXy5pc1BsYWluT2JqZWN0KGV4cGVjdGVkKSkge1xuICAgICAgICBpZiAoIXRlc3QoYWN0dWFsLCAnT1BfRVFVQUwnLCBleHBlY3RlZCwgamVzLCBwcmVmaXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgIGplcy5vcGVyYXRvckV4cGxhbmF0aW9ucy5PUF9FUVVBTChudWxsLCBhY3R1YWwsIGV4cGVjdGVkLCBwcmVmaXgpICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSBcblxuICAgICAgICByZXR1cm4gW3RydWVdO1xuICAgIH1cblxuICAgIGZvciAobGV0IGZpZWxkTmFtZSBpbiBleHBlY3RlZCkge1xuICAgICAgICBsZXQgZXhwZWN0ZWRGaWVsZFZhbHVlID0gZXhwZWN0ZWRbZmllbGROYW1lXTsgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBsID0gZmllbGROYW1lLmxlbmd0aDtcblxuICAgICAgICBpZiAobCA+IDEpIHsgICAgIFxuICAgICAgICAgICAgaWYgKGwgPiA0ICYmIGZpZWxkTmFtZVsxXSA9PT0gJz4nICYmIGZpZWxkTmFtZVsyXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkRmllbGRWYWx1ZSkgJiYgZXhwZWN0ZWRGaWVsZFZhbHVlLmxlbmd0aCAhPT0gMikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9UX0FfVFdPX1RVUExFKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lWzNdICE9PSAnJCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOQ09SUkVDVF9QUkVGSVgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcE9wID0gZmllbGROYW1lLnN1YnN0cigwLCAyKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cigzKTsgXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1hcE9wID09PSBQRlhfTUFQX09QKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcFJlc3VsdCA9IF8uaXNQbGFpbk9iamVjdChhY3R1YWwpID8gXy5tYXBWYWx1ZXMoYWN0dWFsLCAoaXRlbSwga2V5KSA9PiBldmFsdWF0ZUJ5T3BNZXRhKGl0ZW0sIGV4cGVjdGVkRmllbGRWYWx1ZVswXSwgb3BNZXRhLCBmb3JtYXRQcmVmaXgoa2V5LCBwcmVmaXgpLCBqZXMpKSA6IF8ubWFwKGFjdHVhbCwgKGl0ZW0sIGkpID0+IGV2YWx1YXRlQnlPcE1ldGEoaXRlbSwgZXhwZWN0ZWRGaWVsZFZhbHVlWzBdLCBvcE1ldGEsIGZvcm1hdFByZWZpeChpLCBwcmVmaXgpLCBqZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBtYXRjaChtYXBSZXN1bHQsIGV4cGVjdGVkRmllbGRWYWx1ZVsxXSwgZm9ybWF0UHJlZml4KGZvcm1hdE1hcChmb3JtYXRRdWVyeShvcE1ldGEpKSwgcHJlZml4KSwgamVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaFJlc3VsdFswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy90b2RvOiBhZGQgbW9yZSBjb2xsZWN0aW9uIG9wXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX0NPTExFQ1RJT05fT1AobWFwT3ApKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZVswXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGwgPiAyICYmIGZpZWxkTmFtZVsxXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZSA9IGZpZWxkTmFtZS5zdWJzdHIoMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9xdWVyeSBvcGVyYXRvclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3BNZXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9RVUVSWV9PUEVSQVRPUihmaWVsZE5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3BNZXRhWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9UX0FfVU5BUllfUVVFUlkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlSZXN1bHQgPSBldmFsdWF0ZVVuYXJ5KGFjdHVhbCwgb3BNZXRhWzBdLCBqZXMsIHByZWZpeCk7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hSZXN1bHQgPSBtYXRjaChxdWVyeVJlc3VsdCwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBmb3JtYXRQcmVmaXgoZm9ybWF0UXVlcnkob3BNZXRhKSwgcHJlZml4KSwgamVzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoUmVzdWx0WzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9IFxuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3AgPSBqZXMubWFwT2ZPcGVyYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9URVNUX09QRVJBVE9SKGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghdGVzdChhY3R1YWwsIG9wLCBleHBlY3RlZEZpZWxkVmFsdWUsIGplcywgcHJlZml4KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRVbm1hdGNoZWRFeHBsYW5hdGlvbihqZXMsIG9wLCBudWxsLCBhY3R1YWwsIGV4cGVjdGVkRmllbGRWYWx1ZSwgcHJlZml4KVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcbiAgICAgICAgfSBcblxuICAgICAgICBpZiAoIXBhc3NPYmplY3RDaGVjaykge1xuICAgICAgICAgICAgaWYgKGFjdHVhbCA9PSBudWxsKSByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGZhbHNlLCAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfRVhJU1RTKG51bGwsIG51bGwsIHRydWUsIHByZWZpeClcbiAgICAgICAgICAgIF07IFxuXG4gICAgICAgICAgICBjb25zdCBhY3R1YWxUeXBlID0gdHlwZW9mIGFjdHVhbDtcbiAgICBcbiAgICAgICAgICAgIGlmIChhY3R1YWxUeXBlICE9PSAnb2JqZWN0JykgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfVFlQRShudWxsLCBhY3R1YWxUeXBlLCAnb2JqZWN0JywgcHJlZml4KVxuICAgICAgICAgICAgXTsgICAgXG4gICAgICAgIH0gICAgICAgIFxuXG4gICAgICAgIHBhc3NPYmplY3RDaGVjayA9IHRydWU7XG5cbiAgICAgICAgbGV0IGFjdHVhbEZpZWxkVmFsdWUgPSBhY3R1YWxbZmllbGROYW1lXTsgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKGV4cGVjdGVkRmllbGRWYWx1ZSAhPSBudWxsICYmIHR5cGVvZiBleHBlY3RlZEZpZWxkVmFsdWUgPT09ICdvYmplY3QnKSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBbIG9rLCByZWFzb24gXSA9IG1hdGNoKGFjdHVhbEZpZWxkVmFsdWUsIGV4cGVjdGVkRmllbGRWYWx1ZSwgZm9ybWF0UHJlZml4KGZpZWxkTmFtZSwgcHJlZml4KSwgamVzKTtcbiAgICAgICAgICAgIGlmICghb2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyBmYWxzZSwgcmVhc29uIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRlc3QoYWN0dWFsRmllbGRWYWx1ZSwgJ09QX0VRVUFMJywgZXhwZWN0ZWRGaWVsZFZhbHVlLCBqZXMsIHByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zLk9QX0VRVUFMKGZpZWxkTmFtZSwgYWN0dWFsRmllbGRWYWx1ZSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBwcmVmaXgpXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3RydWVdO1xufVxuXG4vKipcbiAqIElmICQgb3BlcmF0b3IgdXNlZCwgb25seSBvbmUgYSB0aW1lIGlzIGFsbG93ZWRcbiAqIGUuZy5cbiAqIHtcbiAqICAgICRncm91cEJ5OiAnamZpZWpmJ1xuICogfVxuICogXG4gKiBcbiAqIEBwYXJhbSB7Kn0gY3VycmVudFZhbHVlIFxuICogQHBhcmFtIHsqfSBleHByIFxuICogQHBhcmFtIHsqfSBwcmVmaXggXG4gKiBAcGFyYW0geyp9IGplcyBcbiAqL1xuZnVuY3Rpb24gZXZhbHVhdGVFeHByKGN1cnJlbnRWYWx1ZSwgZXhwciwgcHJlZml4LCBqZXMpIHtcbiAgICBqZXMgIT0gbnVsbCB8fCAoamVzID0gZGVmYXVsdEN1c3RvbWl6ZXIpO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwcikpIHtcbiAgICAgICAgcmV0dXJuIGV4cHIucmVkdWNlKChyZXN1bHQsIGV4cHJJdGVtKSA9PiBldmFsdWF0ZUV4cHIocmVzdWx0LCBleHBySXRlbSwgcHJlZml4LCBqZXMpLCBjdXJyZW50VmFsdWUpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXhwciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3Qgb3BNZXRhID0gamVzLm1hcE9mTWFuaXB1bGF0b3JzLmdldChleHByKTtcbiAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX09QRVJBVE9SKGV4cHIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghb3BNZXRhWzFdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUkVRVUlSRV9SSUdIVF9PUEVSQU5EKGV4cHIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBldmFsdWF0ZVVuYXJ5KGN1cnJlbnRWYWx1ZSwgb3BNZXRhWzBdLCBqZXMsIHByZWZpeCk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCwgaGFzT3BlcmF0b3IgPSBmYWxzZTsgICAgXG5cbiAgICBmb3IgKGxldCBmaWVsZE5hbWUgaW4gZXhwcikge1xuICAgICAgICBsZXQgZXhwZWN0ZWRGaWVsZFZhbHVlID0gZXhwcltmaWVsZE5hbWVdOyAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBsID0gZmllbGROYW1lLmxlbmd0aDtcblxuICAgICAgICBpZiAobCA+IDEpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWVbMF0gPT09ICckJykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBVE9SX05PVF9BTE9ORSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BNZXRhID0gamVzLm1hcE9mTWFuaXB1bGF0b3JzLmdldChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghb3BNZXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX09QRVJBVE9SKGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGV2YWx1YXRlQnlPcE1ldGEoY3VycmVudFZhbHVlLCBleHBlY3RlZEZpZWxkVmFsdWUsIG9wTWV0YSwgcHJlZml4LCBqZXMpO1xuICAgICAgICAgICAgICAgIGhhc09wZXJhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGwgPiAzICYmIGZpZWxkTmFtZVsxXSA9PT0gJz4nICYmIGZpZWxkTmFtZVsyXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoT1BFUkFUT1JfTk9UX0FMT05FKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtYXBPcCA9IGZpZWxkTmFtZS5zdWJzdHIoMCwgMik7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZpZWxkTmFtZSA9IGZpZWxkTmFtZS5zdWJzdHIoMik7IFxuXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BNZXRhID0gamVzLm1hcE9mTWFuaXB1bGF0b3JzLmdldChmaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghb3BNZXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX09QRVJBVE9SKGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChtYXBPcCA9PT0gUEZYX01BUF9PUCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfLm1hcChjdXJyZW50VmFsdWUsIChpdGVtLCBpKSA9PiBldmFsdWF0ZUJ5T3BNZXRhKGl0ZW0sIGV4cGVjdGVkRmllbGRWYWx1ZSwgb3BNZXRhLCBmb3JtYXRQcmVmaXgoaSwgcHJlZml4KSwgamVzKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy90b2RvOiBhZGQgbW9yZSBjb2xsZWN0aW9uIG9wXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX0NPTExFQ1RJT05fT1AobWFwT3ApKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBoYXNPcGVyYXRvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gXG5cbiAgICAgICAgaWYgKGhhc09wZXJhdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoT1BFUkFUT1JfTk9UX0FMT05FKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vcGljayBhIGZpZWxkIGFuZCB0aGVuIGFwcGx5IG1hbmlwdWxhdGlvblxuICAgICAgICBsZXQgYWN0dWFsRmllbGRWYWx1ZSA9IGN1cnJlbnRWYWx1ZSAhPSBudWxsID8gY3VycmVudFZhbHVlW2ZpZWxkTmFtZV0gOiB1bmRlZmluZWQ7ICAgICBcblxuICAgICAgICBjb25zdCBjaGlsZEZpZWxkVmFsdWUgPSBldmFsdWF0ZUV4cHIoYWN0dWFsRmllbGRWYWx1ZSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBmb3JtYXRQcmVmaXgoZmllbGROYW1lLCBwcmVmaXgpLCBqZXMpO1xuICAgICAgICBpZiAodHlwZW9mIGNoaWxkRmllbGRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgW2ZpZWxkTmFtZV06IGNoaWxkRmllbGRWYWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5jbGFzcyBKRVMge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBjdXN0b21pemVyKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jdXN0b21pemVyID0gY3VzdG9taXplcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyp9IGV4cGVjdGVkIFxuICAgICAqIEBwYXJhbSAgey4uLmFueX0gYXJncyBcbiAgICAgKi9cbiAgICBtYXRjaChleHBlY3RlZCkgeyAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1hdGNoKHRoaXMudmFsdWUsIGV4cGVjdGVkLCB1bmRlZmluZWQsIHRoaXMuY3VzdG9taXplcik7XG4gICAgICAgIGlmIChyZXN1bHRbMF0pIHJldHVybiB0aGlzO1xuXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IocmVzdWx0WzFdLCB7XG4gICAgICAgICAgICBhY3R1YWw6IHRoaXMudmFsdWUsXG4gICAgICAgICAgICBleHBlY3RlZFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBldmFsdWF0ZShleHByKSB7XG4gICAgICAgIHJldHVybiBldmFsdWF0ZUV4cHIodGhpcy52YWx1ZSwgZXhwciwgdW5kZWZpbmVkLCB0aGlzLmN1c3RvbWl6ZXIpO1xuICAgIH1cblxuICAgIHVwZGF0ZShleHByKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZXZhbHVhdGVFeHByKHRoaXMudmFsdWUsIGV4cHIsIHVuZGVmaW5lZCwgdGhpcy5jdXN0b21pemVyKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbkpFUy5tYXRjaCA9IG1hdGNoO1xuSkVTLmV2YWx1YXRlID0gZXZhbHVhdGVFeHByO1xuSkVTLmRlZmF1bHRDdXN0b21pemVyID0gZGVmYXVsdEN1c3RvbWl6ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gSkVTOyJdfQ==