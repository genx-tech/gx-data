"use strict";

require("source-map-support/register");

const {
  _,
  hasKeyByPath
} = require('rk-utils');

const {
  ValidationError
} = require('./Errors');

const OPERATOR_NOT_ALONE = 'Query operator can only be used alone in a stage.';

const INVALID_QUERY_OPERATOR = token => `Invalid JES query operator "${token}".`;

const INVALID_TEST_OPERATOR = token => `Invalid JES test operator "${token}".`;

const INVALID_QUERY_HANDLER = op => `JES query operator "${op}" handler not found.`;

const INVALID_TEST_HANLDER = op => `JES test operator "${op}" handler not found.`;

const NOT_A_TWO_TUPLE = 'The value of collection operator should a two-tuple.';
const INCORRECT_PREFIX = 'Query operator used in matching should starts with prefix $$.';
const NOT_A_UNARY_QUERY = 'Only unary query operator is allowed to be used directly in a matching.';

const INVALID_COLLECTION_OP = op => `Invalid collection operator "${op}".`;

const OPERAND_NOT_ARRAY = op => `The right operand of JES operator "${op}" should be an array.`;

const OPERAND_NOT_BOOL = op => `The right operand of JES operator "${op}" should be a boolean value.`;

const OPERAND_NOT_STRING = op => `The right operand of JES operator "${op}" should be a string.`;

const REQUIRE_RIGHT_OPERAND = op => `Binary query operator "${op}" requires the right operand.`;

const OP_EQUAL = ['$eq', '$eql', '$equal'];
const OP_NOT_EQUAL = ['$ne', '$neq', '$notEqual'];
const OP_GREATER_THAN = ['$gt', '$>', '$greaterThan'];
const OP_GREATER_THAN_OR_EQUAL = ['$gte', '$<=', '$greaterThanOrEqual'];
const OP_LESS_THAN = ['$lt', '$<', '$lessThan'];
const OP_LESS_THAN_OR_EQUAL = ['$lte', '$<=', '$lessThanOrEqual'];
const OP_IN = ['$in'];
const OP_NOT_IN = ['$nin', '$notIn'];
const OP_EXISTS = ['$exist', '$exists'];
const OP_MATCH = ['$has', '$match', '$all'];
const OP_MATCH_ANY = ['$any', '$or', '$either'];
const OP_TYPE = ['$type'];
const OP_HAS_KEYS = ['$hasKeys', '$withKeys'];
const OP_SIZE = ['$size', '$length', '$count'];
const OP_SUM = ['$sum', '$total'];
const OP_KEYS = ['$keys'];
const OP_VALUES = ['$values'];
const OP_ADD = ['$add', '$plus', '$inc'];
const OP_SUB = ['$sub', '$subtract', '$minus', '$dec'];
const OP_MUL = ['$mul', '$multiply', '$times'];
const OP_DIV = ['$div', '$divide'];
const OP_PICK = ['$pick'];
const OP_OMIT = ['$omit'];
const OP_GROUP = ['$group', '$groupBy'];
const OP_SORT = ['$sort', '$orderBy', '$sortBy'];
const PFX_MAP_OP = '|>';
const MapOfOps = new Map();

const addOpToMap = (tokens, tag) => tokens.forEach(token => MapOfOps.set(token, tag));

addOpToMap(OP_EQUAL, 'OP_EQUAL');
addOpToMap(OP_NOT_EQUAL, 'OP_NOT_EQUAL');
addOpToMap(OP_GREATER_THAN, 'OP_GREATER_THAN');
addOpToMap(OP_GREATER_THAN_OR_EQUAL, 'OP_GREATER_THAN_OR_EQUAL');
addOpToMap(OP_LESS_THAN, 'OP_LESS_THAN');
addOpToMap(OP_LESS_THAN_OR_EQUAL, 'OP_LESS_THAN_OR_EQUAL');
addOpToMap(OP_IN, 'OP_IN');
addOpToMap(OP_NOT_IN, 'OP_NOT_IN');
addOpToMap(OP_EXISTS, 'OP_EXISTS');
addOpToMap(OP_MATCH, 'OP_MATCH');
addOpToMap(OP_MATCH_ANY, 'OP_MATCH_ANY');
addOpToMap(OP_TYPE, 'OP_TYPE');
addOpToMap(OP_HAS_KEYS, 'OP_HAS_KEYS');
const MapOfMans = new Map();

const addManToMap = (tokens, tag) => tokens.forEach(token => MapOfMans.set(token, tag));

addManToMap(OP_SIZE, ['OP_SIZE', true]);
addManToMap(OP_SUM, ['OP_SUM', true]);
addManToMap(OP_KEYS, ['OP_KEYS', true]);
addManToMap(OP_VALUES, ['OP_VALUES', true]);
addManToMap(OP_ADD, ['OP_ADD', false]);
addManToMap(OP_SUB, ['OP_SUB', false]);
addManToMap(OP_MUL, ['OP_MUL', false]);
addManToMap(OP_DIV, ['OP_DIV', false]);
addManToMap(OP_PICK, ['OP_PICK', false]);
addManToMap(OP_OMIT, ['OP_OMIT', false]);
addManToMap(OP_GROUP, ['OP_GROUP', false]);
addManToMap(OP_SORT, ['OP_SORT', false]);
const defaultJesHandlers = {
  OP_EQUAL: (left, right) => _.isEqual(left, right),
  OP_NOT_EQUAL: (left, right) => !_.isEqual(left, right),
  OP_GREATER_THAN: (left, right) => left > right,
  OP_GREATER_THAN_OR_EQUAL: (left, right) => left >= right,
  OP_LESS_THAN: (left, right) => left < right,
  OP_LESS_THAN_OR_EQUAL: (left, right) => left <= right,
  OP_IN: (left, right) => {
    if (right == null) return false;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_IN'));
    }

    return right.find(element => defaultJesHandlers.OP_EQUAL(left, element));
  },
  OP_NOT_IN: (left, right) => {
    if (right == null) return true;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_NOT_IN'));
    }

    return _.every(right, element => defaultJesHandlers.OP_NOT_EQUAL(left, element));
  },
  OP_EXISTS: (left, right) => {
    if (typeof right !== 'boolean') {
      throw new Error(OPERAND_NOT_BOOL('OP_EXISTS'));
    }

    return right ? left != null : left == null;
  },
  OP_TYPE: (left, right) => {
    if (typeof right !== 'string') {
      throw new Error(OPERAND_NOT_STRING('OP_TYPE'));
    }

    right = right.toLowerCase();

    if (right === 'array') {
      return Array.isArray(left);
    }

    if (right === 'integer') {
      return _.isInteger(left);
    }

    if (right === 'text') {
      return typeof left === 'string';
    }

    return typeof left === right;
  },
  OP_MATCH: (left, right, jes, prefix) => {
    const r = match(left, right, prefix, jes);
    return r[0];
  },
  OP_MATCH_ANY: (left, right, jes, prefix) => {
    let found = _.find(right, rule => {
      const r = match(left, rule, prefix, jes);
      return r[0];
    });

    return found ? true : false;
  },
  OP_HAS_KEYS: (left, right) => {
    if (typeof left !== "object") return false;
    return _.every(right, key => hasKeyByPath(left, key));
  }
};
const defaultManipulations = {
  OP_SIZE: left => _.size(left),
  OP_SUM: left => _.reduce(left, (sum, item) => {
    sum += item;
    return sum;
  }, 0),
  OP_KEYS: left => _.keys(left),
  OP_VALUES: left => _.values(left),
  OP_ADD: (left, right) => left + right,
  OP_SUB: (left, right) => left - right,
  OP_MUL: (left, right) => left * right,
  OP_DIV: (left, right) => left / right,
  OP_PICK: (left, right) => _.pick(left, right),
  OP_OMIT: (left, right) => _.omit(left, right),
  OP_GROUP: (left, right) => _.groupBy(left, right),
  OP_SORT: (left, right) => _.sortBy(left, right)
};

const formatName = (name, prefix) => {
  const fullName = name == null ? prefix : formatPrefix(name, prefix);
  return fullName.indexOf('(') !== -1 ? `The query "${fullName}"` : `"${fullName}"`;
};

const formatKey = (key, hasPrefix) => _.isInteger(key) ? `[${key}]` : hasPrefix ? '.' + key : key;

const formatPrefix = (key, prefix) => prefix != null ? `${prefix}${formatKey(key, true)}` : formatKey(key, false);

const formatQuery = opMeta => `${defaultQueryExplanations[opMeta[0]]}(${opMeta[1] ? '' : '?'})`;

const formatMap = name => `map(->${name})`;

const defaultJesExplanations = {
  OP_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should not be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than ${right}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should be one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should not be any one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_EXISTS: (name, left, right, prefix) => `${formatName(name, prefix)} should${right ? ' not ' : ' '}be NULL.`,
  OP_TYPE: (name, left, right, prefix) => `The type of ${formatName(name, prefix)} should be "${right}", but ${JSON.stringify(left)} given.`,
  OP_MATCH: (name, left, right, prefix) => `${formatName(name, prefix)} should match ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_MATCH_ANY: (name, left, right, prefix) => `${formatName(name, prefix)} should match any of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_HAS_KEYS: (name, left, right, prefix) => `${formatName(name, prefix)} should have all of these keys [${right.join(', ')}].`
};
const defaultQueryExplanations = {
  OP_SIZE: 'size',
  OP_SUM: 'sum',
  OP_KEYS: 'keys',
  OP_VALUES: 'values',
  OP_ADD: 'add',
  OP_SUB: 'subtract',
  OP_MUL: 'multiply',
  OP_DIV: 'divide',
  OP_PICK: 'pick',
  OP_OMIT: 'omit',
  OP_GROUP: 'groupBy',
  OP_SORT: 'sortBy'
};

function getUnmatchedExplanation(jes, op, name, leftValue, rightValue, prefix) {
  const getter = jes.operatorExplanations[op] || jes.operatorExplanations.OP_MATCH;
  return getter(name, leftValue, rightValue, prefix);
}

function test(value, op, opValue, jes, prefix) {
  const handler = jes.operatorHandlers[op];

  if (!handler) {
    throw new Error(INVALID_TEST_HANLDER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluate(value, op, opValue, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluateUnary(value, op, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, jes, prefix);
}

function evaluateByOpMeta(currentValue, rightValue, opMeta, prefix, jes) {
  if (opMeta[1]) {
    return rightValue ? evaluateUnary(currentValue, opMeta[0], jes, prefix) : currentValue;
  }

  return evaluate(currentValue, opMeta[0], rightValue, jes, prefix);
}

const defaultCustomizer = {
  mapOfOperators: MapOfOps,
  mapOfManipulators: MapOfMans,
  operatorHandlers: defaultJesHandlers,
  operatorExplanations: defaultJesExplanations,
  queryHanlders: defaultManipulations
};

function match(actual, expected, prefix, jes) {
  jes != null || (jes = defaultCustomizer);
  let passObjectCheck = false;

  if (!_.isPlainObject(expected)) {
    if (!test(actual, 'OP_EQUAL', expected, jes, prefix)) {
      return [false, jes.operatorExplanations.OP_EQUAL(null, actual, expected, prefix)];
    }

    return [true];
  }

  for (let fieldName in expected) {
    let expectedFieldValue = expected[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (l > 4 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (!Array.isArray(expectedFieldValue) && expectedFieldValue.length !== 2) {
          throw new Error(NOT_A_TWO_TUPLE);
        }

        if (fieldName[3] !== '$') {
          throw new Error(INCORRECT_PREFIX);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(3);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          const mapResult = _.isPlainObject(actual) ? _.mapValues(actual, (item, key) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(key, prefix), jes)) : _.map(actual, (item, i) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(i, prefix), jes));
          const matchResult = match(mapResult, expectedFieldValue[1], formatPrefix(formatMap(formatQuery(opMeta)), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        continue;
      }

      if (fieldName[0] === '$') {
        if (l > 2 && fieldName[1] === '$') {
          fieldName = fieldName.substr(1);
          const opMeta = jes.mapOfManipulators.get(fieldName);

          if (!opMeta) {
            throw new Error(INVALID_QUERY_OPERATOR(fieldName));
          }

          if (!opMeta[1]) {
            throw new Error(NOT_A_UNARY_QUERY);
          }

          const queryResult = evaluateUnary(actual, opMeta[0], jes, prefix);
          const matchResult = match(queryResult, expectedFieldValue, formatPrefix(formatQuery(opMeta), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }

          continue;
        }

        const op = jes.mapOfOperators.get(fieldName);

        if (!op) {
          throw new Error(INVALID_TEST_OPERATOR(fieldName));
        }

        if (!test(actual, op, expectedFieldValue, jes, prefix)) {
          return [false, getUnmatchedExplanation(jes, op, null, actual, expectedFieldValue, prefix)];
        }

        continue;
      }
    }

    if (!passObjectCheck) {
      if (actual == null) return [false, jes.operatorExplanations.OP_EXISTS(null, null, true, prefix)];
      const actualType = typeof actual;
      if (actualType !== 'object') return [false, jes.operatorExplanations.OP_TYPE(null, actualType, 'object', prefix)];
    }

    passObjectCheck = true;
    let actualFieldValue = actual[fieldName];

    if (expectedFieldValue != null && typeof expectedFieldValue === 'object') {
      const [ok, reason] = match(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

      if (!ok) {
        return [false, reason];
      }
    } else {
      if (!test(actualFieldValue, 'OP_EQUAL', expectedFieldValue, jes, prefix)) {
        return [false, jes.operatorExplanations.OP_EQUAL(fieldName, actualFieldValue, expectedFieldValue, prefix)];
      }
    }
  }

  return [true];
}

function evaluateExpr(currentValue, expr, prefix, jes) {
  jes != null || (jes = defaultCustomizer);

  if (Array.isArray(expr)) {
    return expr.reduce((result, exprItem) => evaluateExpr(result, exprItem, prefix, jes), currentValue);
  }

  if (typeof expr === 'string') {
    const opMeta = jes.mapOfManipulators.get(expr);

    if (!opMeta) {
      throw new Error(INVALID_QUERY_OPERATOR(expr));
    }

    if (!opMeta[1]) {
      throw new Error(REQUIRE_RIGHT_OPERAND(expr));
    }

    return evaluateUnary(currentValue, opMeta[0], jes, prefix);
  }

  let result,
      hasOperator = false;

  for (let fieldName in expr) {
    let expectedFieldValue = expr[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (fieldName[0] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        result = evaluateByOpMeta(currentValue, expectedFieldValue, opMeta, prefix, jes);
        hasOperator = true;
        continue;
      }

      if (l > 3 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(2);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          result = _.map(currentValue, (item, i) => evaluateByOpMeta(item, expectedFieldValue, opMeta, formatPrefix(i, prefix), jes));
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        hasOperator = true;
        continue;
      }
    }

    if (hasOperator) {
      throw new Error(OPERATOR_NOT_ALONE);
    }

    let actualFieldValue = currentValue != null ? currentValue[fieldName] : undefined;
    const childFieldValue = evaluateExpr(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

    if (typeof childFieldValue !== 'undefined') {
      result = { ...result,
        [fieldName]: childFieldValue
      };
    }
  }

  return result;
}

class JES {
  constructor(value, customizer) {
    this.value = value;
    this.customizer = customizer;
  }

  match(expected) {
    const result = match(this.value, expected, undefined, this.customizer);
    if (result[0]) return this;
    throw new ValidationError(result[1], {
      actual: this.value,
      expected
    });
  }

  evaluate(expr) {
    return evaluateExpr(this.value, expr, undefined, this.customizer);
  }

  update(expr) {
    const value = evaluateExpr(this.value, expr, undefined, this.customizer);
    this.value = value;
    return this;
  }

}

JES.match = match;
JES.evaluate = evaluateExpr;
JES.defaultCustomizer = defaultCustomizer;
module.exports = JES;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9qZXMuanMiXSwibmFtZXMiOlsiXyIsImhhc0tleUJ5UGF0aCIsInJlcXVpcmUiLCJWYWxpZGF0aW9uRXJyb3IiLCJPUEVSQVRPUl9OT1RfQUxPTkUiLCJJTlZBTElEX1FVRVJZX09QRVJBVE9SIiwidG9rZW4iLCJJTlZBTElEX1RFU1RfT1BFUkFUT1IiLCJJTlZBTElEX1FVRVJZX0hBTkRMRVIiLCJvcCIsIklOVkFMSURfVEVTVF9IQU5MREVSIiwiTk9UX0FfVFdPX1RVUExFIiwiSU5DT1JSRUNUX1BSRUZJWCIsIk5PVF9BX1VOQVJZX1FVRVJZIiwiSU5WQUxJRF9DT0xMRUNUSU9OX09QIiwiT1BFUkFORF9OT1RfQVJSQVkiLCJPUEVSQU5EX05PVF9CT09MIiwiT1BFUkFORF9OT1RfU1RSSU5HIiwiUkVRVUlSRV9SSUdIVF9PUEVSQU5EIiwiT1BfRVFVQUwiLCJPUF9OT1RfRVFVQUwiLCJPUF9HUkVBVEVSX1RIQU4iLCJPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUwiLCJPUF9MRVNTX1RIQU4iLCJPUF9MRVNTX1RIQU5fT1JfRVFVQUwiLCJPUF9JTiIsIk9QX05PVF9JTiIsIk9QX0VYSVNUUyIsIk9QX01BVENIIiwiT1BfTUFUQ0hfQU5ZIiwiT1BfVFlQRSIsIk9QX0hBU19LRVlTIiwiT1BfU0laRSIsIk9QX1NVTSIsIk9QX0tFWVMiLCJPUF9WQUxVRVMiLCJPUF9BREQiLCJPUF9TVUIiLCJPUF9NVUwiLCJPUF9ESVYiLCJPUF9QSUNLIiwiT1BfT01JVCIsIk9QX0dST1VQIiwiT1BfU09SVCIsIlBGWF9NQVBfT1AiLCJNYXBPZk9wcyIsIk1hcCIsImFkZE9wVG9NYXAiLCJ0b2tlbnMiLCJ0YWciLCJmb3JFYWNoIiwic2V0IiwiTWFwT2ZNYW5zIiwiYWRkTWFuVG9NYXAiLCJkZWZhdWx0SmVzSGFuZGxlcnMiLCJsZWZ0IiwicmlnaHQiLCJpc0VxdWFsIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJmaW5kIiwiZWxlbWVudCIsImV2ZXJ5IiwidG9Mb3dlckNhc2UiLCJpc0ludGVnZXIiLCJqZXMiLCJwcmVmaXgiLCJyIiwibWF0Y2giLCJmb3VuZCIsInJ1bGUiLCJrZXkiLCJkZWZhdWx0TWFuaXB1bGF0aW9ucyIsInNpemUiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwia2V5cyIsInZhbHVlcyIsInBpY2siLCJvbWl0IiwiZ3JvdXBCeSIsInNvcnRCeSIsImZvcm1hdE5hbWUiLCJuYW1lIiwiZnVsbE5hbWUiLCJmb3JtYXRQcmVmaXgiLCJpbmRleE9mIiwiZm9ybWF0S2V5IiwiaGFzUHJlZml4IiwiZm9ybWF0UXVlcnkiLCJvcE1ldGEiLCJkZWZhdWx0UXVlcnlFeHBsYW5hdGlvbnMiLCJmb3JtYXRNYXAiLCJkZWZhdWx0SmVzRXhwbGFuYXRpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJnZXRVbm1hdGNoZWRFeHBsYW5hdGlvbiIsImxlZnRWYWx1ZSIsInJpZ2h0VmFsdWUiLCJnZXR0ZXIiLCJvcGVyYXRvckV4cGxhbmF0aW9ucyIsInRlc3QiLCJ2YWx1ZSIsIm9wVmFsdWUiLCJoYW5kbGVyIiwib3BlcmF0b3JIYW5kbGVycyIsImV2YWx1YXRlIiwicXVlcnlIYW5sZGVycyIsImV2YWx1YXRlVW5hcnkiLCJldmFsdWF0ZUJ5T3BNZXRhIiwiY3VycmVudFZhbHVlIiwiZGVmYXVsdEN1c3RvbWl6ZXIiLCJtYXBPZk9wZXJhdG9ycyIsIm1hcE9mTWFuaXB1bGF0b3JzIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJwYXNzT2JqZWN0Q2hlY2siLCJpc1BsYWluT2JqZWN0IiwiZmllbGROYW1lIiwiZXhwZWN0ZWRGaWVsZFZhbHVlIiwibCIsImxlbmd0aCIsIm1hcE9wIiwic3Vic3RyIiwiZ2V0IiwibWFwUmVzdWx0IiwibWFwVmFsdWVzIiwibWFwIiwiaSIsIm1hdGNoUmVzdWx0IiwicXVlcnlSZXN1bHQiLCJhY3R1YWxUeXBlIiwiYWN0dWFsRmllbGRWYWx1ZSIsIm9rIiwicmVhc29uIiwiZXZhbHVhdGVFeHByIiwiZXhwciIsInJlc3VsdCIsImV4cHJJdGVtIiwiaGFzT3BlcmF0b3IiLCJ1bmRlZmluZWQiLCJjaGlsZEZpZWxkVmFsdWUiLCJKRVMiLCJjb25zdHJ1Y3RvciIsImN1c3RvbWl6ZXIiLCJ1cGRhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsTUFBTTtBQUFFQSxFQUFBQSxDQUFGO0FBQUtDLEVBQUFBO0FBQUwsSUFBc0JDLE9BQU8sQ0FBQyxVQUFELENBQW5DOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFzQkQsT0FBTyxDQUFDLFVBQUQsQ0FBbkM7O0FBR0EsTUFBTUUsa0JBQWtCLEdBQUcsbURBQTNCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHQyxLQUFLLElBQUssK0JBQThCQSxLQUFNLElBQTdFOztBQUNBLE1BQU1DLHFCQUFxQixHQUFHRCxLQUFLLElBQUssOEJBQTZCQSxLQUFNLElBQTNFOztBQUNBLE1BQU1FLHFCQUFxQixHQUFHQyxFQUFFLElBQUssdUJBQXNCQSxFQUFHLHNCQUE5RDs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBR0QsRUFBRSxJQUFLLHNCQUFxQkEsRUFBRyxzQkFBNUQ7O0FBQ0EsTUFBTUUsZUFBZSxHQUFHLHNEQUF4QjtBQUNBLE1BQU1DLGdCQUFnQixHQUFHLCtEQUF6QjtBQUNBLE1BQU1DLGlCQUFpQixHQUFHLHlFQUExQjs7QUFDQSxNQUFNQyxxQkFBcUIsR0FBR0wsRUFBRSxJQUFLLGdDQUErQkEsRUFBRyxJQUF2RTs7QUFFQSxNQUFNTSxpQkFBaUIsR0FBR04sRUFBRSxJQUFLLHNDQUFxQ0EsRUFBRyx1QkFBekU7O0FBQ0EsTUFBTU8sZ0JBQWdCLEdBQUVQLEVBQUUsSUFBSyxzQ0FBcUNBLEVBQUcsOEJBQXZFOztBQUNBLE1BQU1RLGtCQUFrQixHQUFFUixFQUFFLElBQUssc0NBQXFDQSxFQUFHLHVCQUF6RTs7QUFFQSxNQUFNUyxxQkFBcUIsR0FBR1QsRUFBRSxJQUFLLDBCQUF5QkEsRUFBRywrQkFBakU7O0FBR0EsTUFBTVUsUUFBUSxH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U3ludGF4IChKRVMpXG5jb25zdCB7IF8sIGhhc0tleUJ5UGF0aCB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcbmNvbnN0IHsgVmFsaWRhdGlvbkVycm9yIH0gPSByZXF1aXJlKCcuL0Vycm9ycycpO1xuXG4vL0V4Y2VwdGlvbiBtZXNzYWdlc1xuY29uc3QgT1BFUkFUT1JfTk9UX0FMT05FID0gJ1F1ZXJ5IG9wZXJhdG9yIGNhbiBvbmx5IGJlIHVzZWQgYWxvbmUgaW4gYSBzdGFnZS4nO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7dG9rZW59XCIuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHt0b2tlbn1cIi5gO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9IQU5ETEVSID0gb3AgPT4gYEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7b3B9XCIgaGFuZGxlciBub3QgZm91bmQuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9IQU5MREVSID0gb3AgPT4gYEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHtvcH1cIiBoYW5kbGVyIG5vdCBmb3VuZC5gO1xuY29uc3QgTk9UX0FfVFdPX1RVUExFID0gJ1RoZSB2YWx1ZSBvZiBjb2xsZWN0aW9uIG9wZXJhdG9yIHNob3VsZCBhIHR3by10dXBsZS4nO1xuY29uc3QgSU5DT1JSRUNUX1BSRUZJWCA9ICdRdWVyeSBvcGVyYXRvciB1c2VkIGluIG1hdGNoaW5nIHNob3VsZCBzdGFydHMgd2l0aCBwcmVmaXggJCQuJztcbmNvbnN0IE5PVF9BX1VOQVJZX1FVRVJZID0gJ09ubHkgdW5hcnkgcXVlcnkgb3BlcmF0b3IgaXMgYWxsb3dlZCB0byBiZSB1c2VkIGRpcmVjdGx5IGluIGEgbWF0Y2hpbmcuJztcbmNvbnN0IElOVkFMSURfQ09MTEVDVElPTl9PUCA9IG9wID0+IGBJbnZhbGlkIGNvbGxlY3Rpb24gb3BlcmF0b3IgXCIke29wfVwiLmA7XG5cbmNvbnN0IE9QRVJBTkRfTk9UX0FSUkFZID0gb3AgPT4gYFRoZSByaWdodCBvcGVyYW5kIG9mIEpFUyBvcGVyYXRvciBcIiR7b3B9XCIgc2hvdWxkIGJlIGFuIGFycmF5LmA7XG5jb25zdCBPUEVSQU5EX05PVF9CT09MPSBvcCA9PiBgVGhlIHJpZ2h0IG9wZXJhbmQgb2YgSkVTIG9wZXJhdG9yIFwiJHtvcH1cIiBzaG91bGQgYmUgYSBib29sZWFuIHZhbHVlLmA7XG5jb25zdCBPUEVSQU5EX05PVF9TVFJJTkc9IG9wID0+IGBUaGUgcmlnaHQgb3BlcmFuZCBvZiBKRVMgb3BlcmF0b3IgXCIke29wfVwiIHNob3VsZCBiZSBhIHN0cmluZy5gO1xuXG5jb25zdCBSRVFVSVJFX1JJR0hUX09QRVJBTkQgPSBvcCA9PiBgQmluYXJ5IHF1ZXJ5IG9wZXJhdG9yIFwiJHtvcH1cIiByZXF1aXJlcyB0aGUgcmlnaHQgb3BlcmFuZC5gXG5cbi8vQ29uZGl0aW9uIG9wZXJhdG9yXG5jb25zdCBPUF9FUVVBTCA9IFsgJyRlcScsICckZXFsJywgJyRlcXVhbCcgXTtcbmNvbnN0IE9QX05PVF9FUVVBTCA9IFsgJyRuZScsICckbmVxJywgJyRub3RFcXVhbCcgXTtcblxuY29uc3QgT1BfR1JFQVRFUl9USEFOID0gWyAnJGd0JywgJyQ+JywgJyRncmVhdGVyVGhhbicgXTtcbmNvbnN0IE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCA9IFsgJyRndGUnLCAnJDw9JywgJyRncmVhdGVyVGhhbk9yRXF1YWwnIF07XG5cbmNvbnN0IE9QX0xFU1NfVEhBTiA9IFsgJyRsdCcsICckPCcsICckbGVzc1RoYW4nIF07XG5jb25zdCBPUF9MRVNTX1RIQU5fT1JfRVFVQUwgPSBbICckbHRlJywgJyQ8PScsICckbGVzc1RoYW5PckVxdWFsJyBdO1xuXG5jb25zdCBPUF9JTiA9IFsgJyRpbicgXTtcbmNvbnN0IE9QX05PVF9JTiA9IFsgJyRuaW4nLCAnJG5vdEluJyBdO1xuXG5jb25zdCBPUF9FWElTVFMgPSBbICckZXhpc3QnLCAnJGV4aXN0cycgXTtcblxuY29uc3QgT1BfTUFUQ0ggPSBbICckaGFzJywgJyRtYXRjaCcsICckYWxsJyBdO1xuXG5jb25zdCBPUF9NQVRDSF9BTlkgPSBbICckYW55JywgJyRvcicsICckZWl0aGVyJyBdO1xuXG5jb25zdCBPUF9UWVBFID0gWyAnJHR5cGUnIF07XG5cbmNvbnN0IE9QX0hBU19LRVlTID0gWyAnJGhhc0tleXMnLCAnJHdpdGhLZXlzJyBdO1xuXG4vL1F1ZXJ5ICYgYWdncmVnYXRlIG9wZXJhdG9yXG5jb25zdCBPUF9TSVpFID0gWyAnJHNpemUnLCAnJGxlbmd0aCcsICckY291bnQnIF07XG5jb25zdCBPUF9TVU0gPSBbICckc3VtJywgJyR0b3RhbCcgXTtcbmNvbnN0IE9QX0tFWVMgPSBbICcka2V5cycgXTtcbmNvbnN0IE9QX1ZBTFVFUyA9IFsgJyR2YWx1ZXMnIF07XG5cbi8vTWFuaXB1bGF0ZSBvcGVyYXRpb25cbmNvbnN0IE9QX0FERCA9IFsgJyRhZGQnLCAnJHBsdXMnLCAgICAgJyRpbmMnIF07XG5jb25zdCBPUF9TVUIgPSBbICckc3ViJywgJyRzdWJ0cmFjdCcsICckbWludXMnLCAnJGRlYycgXTtcbmNvbnN0IE9QX01VTCA9IFsgJyRtdWwnLCAnJG11bHRpcGx5JywgICckdGltZXMnIF07XG5jb25zdCBPUF9ESVYgPSBbICckZGl2JywgJyRkaXZpZGUnIF07XG5cbmNvbnN0IE9QX1BJQ0sgPSBbICckcGljaycgXTtcbmNvbnN0IE9QX09NSVQgPSBbICckb21pdCcgXTtcbmNvbnN0IE9QX0dST1VQID0gWyAnJGdyb3VwJywgJyRncm91cEJ5JyBdO1xuY29uc3QgT1BfU09SVCA9IFsgJyRzb3J0JywgJyRvcmRlckJ5JywgJyRzb3J0QnknIF07XG5cbmNvbnN0IFBGWF9NQVBfT1AgPSAnfD4nO1xuXG5jb25zdCBNYXBPZk9wcyA9IG5ldyBNYXAoKTtcbmNvbnN0IGFkZE9wVG9NYXAgPSAodG9rZW5zLCB0YWcpID0+IHRva2Vucy5mb3JFYWNoKHRva2VuID0+IE1hcE9mT3BzLnNldCh0b2tlbiwgdGFnKSk7XG5hZGRPcFRvTWFwKE9QX0VRVUFMLCAnT1BfRVFVQUwnKTtcbmFkZE9wVG9NYXAoT1BfTk9UX0VRVUFMLCAnT1BfTk9UX0VRVUFMJyk7XG5hZGRPcFRvTWFwKE9QX0dSRUFURVJfVEhBTiwgJ09QX0dSRUFURVJfVEhBTicpO1xuYWRkT3BUb01hcChPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUwsICdPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUwnKTtcbmFkZE9wVG9NYXAoT1BfTEVTU19USEFOLCAnT1BfTEVTU19USEFOJyk7XG5hZGRPcFRvTWFwKE9QX0xFU1NfVEhBTl9PUl9FUVVBTCwgJ09QX0xFU1NfVEhBTl9PUl9FUVVBTCcpO1xuYWRkT3BUb01hcChPUF9JTiwgJ09QX0lOJyk7XG5hZGRPcFRvTWFwKE9QX05PVF9JTiwgJ09QX05PVF9JTicpO1xuYWRkT3BUb01hcChPUF9FWElTVFMsICdPUF9FWElTVFMnKTtcbmFkZE9wVG9NYXAoT1BfTUFUQ0gsICdPUF9NQVRDSCcpO1xuYWRkT3BUb01hcChPUF9NQVRDSF9BTlksICdPUF9NQVRDSF9BTlknKTtcbmFkZE9wVG9NYXAoT1BfVFlQRSwgJ09QX1RZUEUnKTtcbmFkZE9wVG9NYXAoT1BfSEFTX0tFWVMsICdPUF9IQVNfS0VZUycpO1xuXG5jb25zdCBNYXBPZk1hbnMgPSBuZXcgTWFwKCk7XG5jb25zdCBhZGRNYW5Ub01hcCA9ICh0b2tlbnMsIHRhZykgPT4gdG9rZW5zLmZvckVhY2godG9rZW4gPT4gTWFwT2ZNYW5zLnNldCh0b2tlbiwgdGFnKSk7XG4vLyBbIDxvcCBuYW1lPiwgPHVuYXJ5PiBdXG5hZGRNYW5Ub01hcChPUF9TSVpFLCBbJ09QX1NJWkUnLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX1NVTSwgWydPUF9TVU0nLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX0tFWVMsIFsnT1BfS0VZUycsIHRydWUgXSk7IFxuYWRkTWFuVG9NYXAoT1BfVkFMVUVTLCBbJ09QX1ZBTFVFUycsIHRydWUgXSk7IFxuXG5hZGRNYW5Ub01hcChPUF9BREQsIFsnT1BfQUREJywgZmFsc2UgXSk7IFxuYWRkTWFuVG9NYXAoT1BfU1VCLCBbJ09QX1NVQicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfTVVMLCBbJ09QX01VTCcsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfRElWLCBbJ09QX0RJVicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfUElDSywgWydPUF9QSUNLJywgZmFsc2VdKTtcbmFkZE1hblRvTWFwKE9QX09NSVQsIFsnT1BfT01JVCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9HUk9VUCwgWydPUF9HUk9VUCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9TT1JULCBbJ09QX1NPUlQnLCBmYWxzZV0pO1xuXG5jb25zdCBkZWZhdWx0SmVzSGFuZGxlcnMgPSB7XG4gICAgT1BfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gXy5pc0VxdWFsKGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9OT1RfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gIV8uaXNFcXVhbChsZWZ0LCByaWdodCksXG4gICAgT1BfR1JFQVRFUl9USEFOOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgPiByaWdodCxcbiAgICBPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gbGVmdCA+PSByaWdodCxcbiAgICBPUF9MRVNTX1RIQU46IChsZWZ0LCByaWdodCkgPT4gbGVmdCA8IHJpZ2h0LFxuICAgIE9QX0xFU1NfVEhBTl9PUl9FUVVBTDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0IDw9IHJpZ2h0LFxuICAgIE9QX0lOOiAobGVmdCwgcmlnaHQpID0+IHtcbiAgICAgICAgaWYgKHJpZ2h0ID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9JTicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodC5maW5kKGVsZW1lbnQgPT4gZGVmYXVsdEplc0hhbmRsZXJzLk9QX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX05PVF9JTjogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmIChyaWdodCA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9OT1RfSU4nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gXy5ldmVyeShyaWdodCwgZWxlbWVudCA9PiBkZWZhdWx0SmVzSGFuZGxlcnMuT1BfTk9UX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX0VYSVNUUzogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcmlnaHQgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0JPT0woJ09QX0VYSVNUUycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodCA/IGxlZnQgIT0gbnVsbCA6IGxlZnQgPT0gbnVsbDtcbiAgICB9LFxuICAgIE9QX1RZUEU6IChsZWZ0LCByaWdodCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHJpZ2h0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX1NUUklORygnT1BfVFlQRScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJpZ2h0ID0gcmlnaHQudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAocmlnaHQgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGxlZnQpO1xuICAgICAgICB9IFxuXG4gICAgICAgIGlmIChyaWdodCA9PT0gJ2ludGVnZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5pc0ludGVnZXIobGVmdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmlnaHQgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBsZWZ0ID09PSAnc3RyaW5nJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0eXBlb2YgbGVmdCA9PT0gcmlnaHQ7XG4gICAgfSxcbiAgICBPUF9NQVRDSDogKGxlZnQsIHJpZ2h0LCBqZXMsIHByZWZpeCkgPT4ge1xuICAgICAgICBjb25zdCByID0gbWF0Y2gobGVmdCwgcmlnaHQsIHByZWZpeCwgamVzKTtcbiAgICAgICAgcmV0dXJuIHJbMF07XG4gICAgfSxcbiAgICBPUF9NQVRDSF9BTlk6IChsZWZ0LCByaWdodCwgamVzLCBwcmVmaXgpID0+IHtcbiAgICAgICAgbGV0IGZvdW5kID0gXy5maW5kKHJpZ2h0LCBydWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBtYXRjaChsZWZ0LCBydWxlLCBwcmVmaXgsIGplcyk7XG4gICAgICAgICAgICByZXR1cm4gclswXTtcbiAgICAgICAgfSk7ICAgXG4gICAgXG4gICAgICAgIHJldHVybiBmb3VuZCA/IHRydWUgOiBmYWxzZTtcbiAgICB9LFxuICAgIE9QX0hBU19LRVlTOiAobGVmdCwgcmlnaHQpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsZWZ0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIF8uZXZlcnkocmlnaHQsIGtleSA9PiBoYXNLZXlCeVBhdGgobGVmdCwga2V5KSk7XG4gICAgfSAgICBcbn07XG5cbmNvbnN0IGRlZmF1bHRNYW5pcHVsYXRpb25zID0ge1xuICAgIC8vdW5hcnlcbiAgICBPUF9TSVpFOiAobGVmdCkgPT4gXy5zaXplKGxlZnQpLFxuICAgIE9QX1NVTTogKGxlZnQpID0+IF8ucmVkdWNlKGxlZnQsIChzdW0sIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHN1bSArPSBpdGVtO1xuICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgfSwgMCksXG5cbiAgICBPUF9LRVlTOiAobGVmdCkgPT4gXy5rZXlzKGxlZnQpLFxuICAgIE9QX1ZBTFVFUzogKGxlZnQpID0+IF8udmFsdWVzKGxlZnQpLCAgICAgXG5cbiAgICAvL2JpbmFyeVxuICAgIE9QX0FERDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0ICsgcmlnaHQsXG4gICAgT1BfU1VCOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgLSByaWdodCxcbiAgICBPUF9NVUw6IChsZWZ0LCByaWdodCkgPT4gbGVmdCAqIHJpZ2h0LFxuICAgIE9QX0RJVjogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0IC8gcmlnaHQsIFxuICAgIE9QX1BJQ0s6IChsZWZ0LCByaWdodCkgPT4gXy5waWNrKGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9PTUlUOiAobGVmdCwgcmlnaHQpID0+IF8ub21pdChsZWZ0LCByaWdodCksXG4gICAgT1BfR1JPVVA6IChsZWZ0LCByaWdodCkgPT4gXy5ncm91cEJ5KGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9TT1JUOiAobGVmdCwgcmlnaHQpID0+IF8uc29ydEJ5KGxlZnQsIHJpZ2h0KSxcbn1cblxuY29uc3QgZm9ybWF0TmFtZSA9IChuYW1lLCBwcmVmaXgpID0+IHtcbiAgICBjb25zdCBmdWxsTmFtZSA9IG5hbWUgPT0gbnVsbCA/IHByZWZpeCA6IGZvcm1hdFByZWZpeChuYW1lLCBwcmVmaXgpO1xuICAgIHJldHVybiBmdWxsTmFtZS5pbmRleE9mKCcoJykgIT09IC0xID8gYFRoZSBxdWVyeSBcIiR7ZnVsbE5hbWV9XCJgIDogYFwiJHtmdWxsTmFtZX1cImA7XG59O1xuY29uc3QgZm9ybWF0S2V5ID0gKGtleSwgaGFzUHJlZml4KSA9PiBfLmlzSW50ZWdlcihrZXkpID8gYFske2tleX1dYCA6IChoYXNQcmVmaXggPyAnLicgKyBrZXkgOiBrZXkpO1xuY29uc3QgZm9ybWF0UHJlZml4ID0gKGtleSwgcHJlZml4KSA9PiBwcmVmaXggIT0gbnVsbCA/IGAke3ByZWZpeH0ke2Zvcm1hdEtleShrZXksIHRydWUpfWAgOiBmb3JtYXRLZXkoa2V5LCBmYWxzZSk7XG5jb25zdCBmb3JtYXRRdWVyeSA9IChvcE1ldGEpID0+IGAke2RlZmF1bHRRdWVyeUV4cGxhbmF0aW9uc1tvcE1ldGFbMF1dfSgke29wTWV0YVsxXSA/ICcnIDogJz8nfSlgOyAgXG5jb25zdCBmb3JtYXRNYXAgPSAobmFtZSkgPT4gYG1hcCgtPiR7bmFtZX0pYDtcblxuY29uc3QgZGVmYXVsdEplc0V4cGxhbmF0aW9ucyA9IHtcbiAgICBPUF9FUVVBTDogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTk9UX0VRVUFMOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgbm90IGJlICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfR1JFQVRFUl9USEFOOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgZ3JlYXRlciB0aGFuICR7cmlnaHR9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUw6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtyaWdodH0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX0xFU1NfVEhBTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIGxlc3MgdGhhbiAke3JpZ2h0fSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTEVTU19USEFOX09SX0VRVUFMOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICR7cmlnaHR9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9JTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIG9uZSBvZiAke0pTT04uc3RyaW5naWZ5KHJpZ2h0KX0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX05PVF9JTjogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG5vdCBiZSBhbnkgb25lIG9mICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfRVhJU1RTOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQke3JpZ2h0ID8gJyBub3QgJzogJyAnfWJlIE5VTEwuYCwgICAgXG4gICAgT1BfVFlQRTogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGBUaGUgdHlwZSBvZiAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIFwiJHtyaWdodH1cIiwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsICAgICAgICBcbiAgICBPUF9NQVRDSDogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG1hdGNoICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsICAgIFxuICAgIE9QX01BVENIX0FOWTogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG1hdGNoIGFueSBvZiAke0pTT04uc3RyaW5naWZ5KHJpZ2h0KX0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLCAgICBcbiAgICBPUF9IQVNfS0VZUzogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGhhdmUgYWxsIG9mIHRoZXNlIGtleXMgWyR7cmlnaHQuam9pbignLCAnKX1dLmAsICAgICAgICBcbn07XG5cbmNvbnN0IGRlZmF1bHRRdWVyeUV4cGxhbmF0aW9ucyA9IHtcbiAgICAvL3VuYXJ5XG4gICAgT1BfU0laRTogJ3NpemUnLFxuICAgIE9QX1NVTTogJ3N1bScsXG4gICAgT1BfS0VZUzogJ2tleXMnLFxuICAgIE9QX1ZBTFVFUzogJ3ZhbHVlcycsICAgICBcblxuICAgIC8vYmluYXJ5XG4gICAgT1BfQUREOiAnYWRkJyxcbiAgICBPUF9TVUI6ICdzdWJ0cmFjdCcsXG4gICAgT1BfTVVMOiAnbXVsdGlwbHknLFxuICAgIE9QX0RJVjogJ2RpdmlkZScsIFxuICAgIE9QX1BJQ0s6ICdwaWNrJyxcbiAgICBPUF9PTUlUOiAnb21pdCcsXG4gICAgT1BfR1JPVVA6ICdncm91cEJ5JyxcbiAgICBPUF9TT1JUOiAnc29ydEJ5Jyxcbn07XG5cbmZ1bmN0aW9uIGdldFVubWF0Y2hlZEV4cGxhbmF0aW9uKGplcywgb3AsIG5hbWUsIGxlZnRWYWx1ZSwgcmlnaHRWYWx1ZSwgcHJlZml4KSB7XG4gICAgY29uc3QgZ2V0dGVyID0gamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zW29wXSB8fCBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfTUFUQ0g7XG4gICAgcmV0dXJuIGdldHRlcihuYW1lLCBsZWZ0VmFsdWUsIHJpZ2h0VmFsdWUsIHByZWZpeCk7ICAgIFxufVxuXG5mdW5jdGlvbiB0ZXN0KHZhbHVlLCBvcCwgb3BWYWx1ZSwgamVzLCBwcmVmaXgpIHsgXG4gICAgY29uc3QgaGFuZGxlciA9IGplcy5vcGVyYXRvckhhbmRsZXJzW29wXTtcblxuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9URVNUX0hBTkxERVIob3ApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSwgb3BWYWx1ZSwgamVzLCBwcmVmaXgpO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZSh2YWx1ZSwgb3AsIG9wVmFsdWUsIGplcywgcHJlZml4KSB7IFxuICAgIGNvbnN0IGhhbmRsZXIgPSBqZXMucXVlcnlIYW5sZGVyc1tvcF07XG5cbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfSEFORExFUihvcCkpO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVyKHZhbHVlLCBvcFZhbHVlLCBqZXMsIHByZWZpeCk7XG59XG5cbmZ1bmN0aW9uIGV2YWx1YXRlVW5hcnkodmFsdWUsIG9wLCBqZXMsIHByZWZpeCkgeyBcbiAgICBjb25zdCBoYW5kbGVyID0gamVzLnF1ZXJ5SGFubGRlcnNbb3BdO1xuXG4gICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX0hBTkRMRVIob3ApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSwgamVzLCBwcmVmaXgpO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUJ5T3BNZXRhKGN1cnJlbnRWYWx1ZSwgcmlnaHRWYWx1ZSwgb3BNZXRhLCBwcmVmaXgsIGplcykge1xuICAgIGlmIChvcE1ldGFbMV0pIHtcbiAgICAgICAgcmV0dXJuIHJpZ2h0VmFsdWUgPyBldmFsdWF0ZVVuYXJ5KGN1cnJlbnRWYWx1ZSwgb3BNZXRhWzBdLCBqZXMsIHByZWZpeCkgOiBjdXJyZW50VmFsdWU7XG4gICAgfSBcbiAgICBcbiAgICByZXR1cm4gZXZhbHVhdGUoY3VycmVudFZhbHVlLCBvcE1ldGFbMF0sIHJpZ2h0VmFsdWUsIGplcywgcHJlZml4KTtcbn1cblxuY29uc3QgZGVmYXVsdEN1c3RvbWl6ZXIgPSB7XG4gICAgbWFwT2ZPcGVyYXRvcnM6IE1hcE9mT3BzLFxuICAgIG1hcE9mTWFuaXB1bGF0b3JzOiBNYXBPZk1hbnMsXG4gICAgb3BlcmF0b3JIYW5kbGVyczogZGVmYXVsdEplc0hhbmRsZXJzLFxuICAgIG9wZXJhdG9yRXhwbGFuYXRpb25zOiBkZWZhdWx0SmVzRXhwbGFuYXRpb25zLFxuICAgIHF1ZXJ5SGFubGRlcnM6IGRlZmF1bHRNYW5pcHVsYXRpb25zXG59O1xuXG4vKipcbiAqIFxuICogQHBhcmFtIHsqfSBhY3R1YWwgXG4gKiBAcGFyYW0geyp9IGV4cGVjdGVkIFxuICogQHBhcmFtIHsqfSBwcmVmaXggXG4gKiBAcGFyYW0geyp9IGplcyBcbiAqIFxuICogeyBrZXk6IHsgJG1hdGNoIH0gfVxuICovXG5mdW5jdGlvbiBtYXRjaChhY3R1YWwsIGV4cGVjdGVkLCBwcmVmaXgsIGplcykge1xuICAgIGplcyAhPSBudWxsIHx8IChqZXMgPSBkZWZhdWx0Q3VzdG9taXplcik7XG4gICAgbGV0IHBhc3NPYmplY3RDaGVjayA9IGZhbHNlO1xuXG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZXhwZWN0ZWQpKSB7XG4gICAgICAgIGlmICghdGVzdChhY3R1YWwsICdPUF9FUVVBTCcsIGV4cGVjdGVkLCBqZXMsIHByZWZpeCkpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zLk9QX0VRVUFMKG51bGwsIGFjdHVhbCwgZXhwZWN0ZWQsIHByZWZpeCkgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBdO1xuICAgICAgICB9IFxuXG4gICAgICAgIHJldHVybiBbdHJ1ZV07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgZmllbGROYW1lIGluIGV4cGVjdGVkKSB7XG4gICAgICAgIGxldCBleHBlY3RlZEZpZWxkVmFsdWUgPSBleHBlY3RlZFtmaWVsZE5hbWVdOyBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGwgPSBmaWVsZE5hbWUubGVuZ3RoO1xuXG4gICAgICAgIGlmIChsID4gMSkgeyAgICAgXG4gICAgICAgICAgICBpZiAobCA+IDQgJiYgZmllbGROYW1lWzFdID09PSAnPicgJiYgZmllbGROYW1lWzJdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRGaWVsZFZhbHVlKSAmJiBleHBlY3RlZEZpZWxkVmFsdWUubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT1RfQV9UV09fVFVQTEUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVbM10gIT09ICckJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5DT1JSRUNUX1BSRUZJWCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbWFwT3AgPSBmaWVsZE5hbWUuc3Vic3RyKDAsIDIpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUgPSBmaWVsZE5hbWUuc3Vic3RyKDMpOyBcblxuICAgICAgICAgICAgICAgIGNvbnN0IG9wTWV0YSA9IGplcy5tYXBPZk1hbmlwdWxhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wTWV0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9RVUVSWV9PUEVSQVRPUihmaWVsZE5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobWFwT3AgPT09IFBGWF9NQVBfT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwUmVzdWx0ID0gXy5pc1BsYWluT2JqZWN0KGFjdHVhbCkgPyBfLm1hcFZhbHVlcyhhY3R1YWwsIChpdGVtLCBrZXkpID0+IGV2YWx1YXRlQnlPcE1ldGEoaXRlbSwgZXhwZWN0ZWRGaWVsZFZhbHVlWzBdLCBvcE1ldGEsIGZvcm1hdFByZWZpeChrZXksIHByZWZpeCksIGplcykpIDogXy5tYXAoYWN0dWFsLCAoaXRlbSwgaSkgPT4gZXZhbHVhdGVCeU9wTWV0YShpdGVtLCBleHBlY3RlZEZpZWxkVmFsdWVbMF0sIG9wTWV0YSwgZm9ybWF0UHJlZml4KGksIHByZWZpeCksIGplcykpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IG1hdGNoKG1hcFJlc3VsdCwgZXhwZWN0ZWRGaWVsZFZhbHVlWzFdLCBmb3JtYXRQcmVmaXgoZm9ybWF0TWFwKGZvcm1hdFF1ZXJ5KG9wTWV0YSkpLCBwcmVmaXgpLCBqZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoUmVzdWx0WzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG86IGFkZCBtb3JlIGNvbGxlY3Rpb24gb3BcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfQ09MTEVDVElPTl9PUChtYXBPcCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lWzBdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobCA+IDIgJiYgZmllbGROYW1lWzFdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cigxKTtcblxuICAgICAgICAgICAgICAgICAgICAvL3F1ZXJ5IG9wZXJhdG9yXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wTWV0YSA9IGplcy5tYXBPZk1hbmlwdWxhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX09QRVJBVE9SKGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcE1ldGFbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT1RfQV9VTkFSWV9RVUVSWSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdCA9IGV2YWx1YXRlVW5hcnkoYWN0dWFsLCBvcE1ldGFbMF0sIGplcywgcHJlZml4KTsgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IG1hdGNoKHF1ZXJ5UmVzdWx0LCBleHBlY3RlZEZpZWxkVmFsdWUsIGZvcm1hdFByZWZpeChmb3JtYXRRdWVyeShvcE1ldGEpLCBwcmVmaXgpLCBqZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hSZXN1bHRbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcCA9IGplcy5tYXBPZk9wZXJhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1RFU1RfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCF0ZXN0KGFjdHVhbCwgb3AsIGV4cGVjdGVkRmllbGRWYWx1ZSwgamVzLCBwcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFVubWF0Y2hlZEV4cGxhbmF0aW9uKGplcywgb3AsIG51bGwsIGFjdHVhbCwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBwcmVmaXgpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICB9IFxuXG4gICAgICAgIGlmICghcGFzc09iamVjdENoZWNrKSB7XG4gICAgICAgICAgICBpZiAoYWN0dWFsID09IG51bGwpIHJldHVybiBbXG4gICAgICAgICAgICAgICAgZmFsc2UsICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGplcy5vcGVyYXRvckV4cGxhbmF0aW9ucy5PUF9FWElTVFMobnVsbCwgbnVsbCwgdHJ1ZSwgcHJlZml4KVxuICAgICAgICAgICAgXTsgXG5cbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbFR5cGUgPSB0eXBlb2YgYWN0dWFsO1xuICAgIFxuICAgICAgICAgICAgaWYgKGFjdHVhbFR5cGUgIT09ICdvYmplY3QnKSByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgIGplcy5vcGVyYXRvckV4cGxhbmF0aW9ucy5PUF9UWVBFKG51bGwsIGFjdHVhbFR5cGUsICdvYmplY3QnLCBwcmVmaXgpXG4gICAgICAgICAgICBdOyAgICBcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAgICAgcGFzc09iamVjdENoZWNrID0gdHJ1ZTtcblxuICAgICAgICBsZXQgYWN0dWFsRmllbGRWYWx1ZSA9IGFjdHVhbFtmaWVsZE5hbWVdOyAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoZXhwZWN0ZWRGaWVsZFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIGV4cGVjdGVkRmllbGRWYWx1ZSA9PT0gJ29iamVjdCcpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IFsgb2ssIHJlYXNvbiBdID0gbWF0Y2goYWN0dWFsRmllbGRWYWx1ZSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBmb3JtYXRQcmVmaXgoZmllbGROYW1lLCBwcmVmaXgpLCBqZXMpO1xuICAgICAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbIGZhbHNlLCByZWFzb24gXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGVzdChhY3R1YWxGaWVsZFZhbHVlLCAnT1BfRVFVQUwnLCBleHBlY3RlZEZpZWxkVmFsdWUsIGplcywgcHJlZml4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfRVFVQUwoZmllbGROYW1lLCBhY3R1YWxGaWVsZFZhbHVlLCBleHBlY3RlZEZpZWxkVmFsdWUsIHByZWZpeClcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdHJ1ZV07XG59XG5cbi8qKlxuICogSWYgJCBvcGVyYXRvciB1c2VkLCBvbmx5IG9uZSBhIHRpbWUgaXMgYWxsb3dlZFxuICogZS5nLlxuICoge1xuICogICAgJGdyb3VwQnk6ICdqZmllamYnXG4gKiB9XG4gKiBcbiAqIFxuICogQHBhcmFtIHsqfSBjdXJyZW50VmFsdWUgXG4gKiBAcGFyYW0geyp9IGV4cHIgXG4gKiBAcGFyYW0geyp9IHByZWZpeCBcbiAqIEBwYXJhbSB7Kn0gamVzIFxuICovXG5mdW5jdGlvbiBldmFsdWF0ZUV4cHIoY3VycmVudFZhbHVlLCBleHByLCBwcmVmaXgsIGplcykge1xuICAgIGplcyAhPSBudWxsIHx8IChqZXMgPSBkZWZhdWx0Q3VzdG9taXplcik7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShleHByKSkge1xuICAgICAgICByZXR1cm4gZXhwci5yZWR1Y2UoKHJlc3VsdCwgZXhwckl0ZW0pID0+IGV2YWx1YXRlRXhwcihyZXN1bHQsIGV4cHJJdGVtLCBwcmVmaXgsIGplcyksIGN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBleHByID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGV4cHIpO1xuICAgICAgICBpZiAoIW9wTWV0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZXhwcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcE1ldGFbMV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihSRVFVSVJFX1JJR0hUX09QRVJBTkQoZXhwcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlVW5hcnkoY3VycmVudFZhbHVlLCBvcE1ldGFbMF0sIGplcywgcHJlZml4KTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0LCBoYXNPcGVyYXRvciA9IGZhbHNlOyAgICBcblxuICAgIGZvciAobGV0IGZpZWxkTmFtZSBpbiBleHByKSB7XG4gICAgICAgIGxldCBleHBlY3RlZEZpZWxkVmFsdWUgPSBleHByW2ZpZWxkTmFtZV07ICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGwgPSBmaWVsZE5hbWUubGVuZ3RoO1xuXG4gICAgICAgIGlmIChsID4gMSkgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZVswXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoT1BFUkFUT1JfTk9UX0FMT05FKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZXZhbHVhdGVCeU9wTWV0YShjdXJyZW50VmFsdWUsIGV4cGVjdGVkRmllbGRWYWx1ZSwgb3BNZXRhLCBwcmVmaXgsIGplcyk7XG4gICAgICAgICAgICAgICAgaGFzT3BlcmF0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobCA+IDMgJiYgZmllbGROYW1lWzFdID09PSAnPicgJiYgZmllbGROYW1lWzJdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihPUEVSQVRPUl9OT1RfQUxPTkUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcE9wID0gZmllbGROYW1lLnN1YnN0cigwLCAyKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cigyKTsgXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1hcE9wID09PSBQRlhfTUFQX09QKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF8ubWFwKGN1cnJlbnRWYWx1ZSwgKGl0ZW0sIGkpID0+IGV2YWx1YXRlQnlPcE1ldGEoaXRlbSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBvcE1ldGEsIGZvcm1hdFByZWZpeChpLCBwcmVmaXgpLCBqZXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG86IGFkZCBtb3JlIGNvbGxlY3Rpb24gb3BcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfQ09MTEVDVElPTl9PUChtYXBPcCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGhhc09wZXJhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBcblxuICAgICAgICBpZiAoaGFzT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihPUEVSQVRPUl9OT1RfQUxPTkUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9waWNrIGEgZmllbGQgYW5kIHRoZW4gYXBwbHkgbWFuaXB1bGF0aW9uXG4gICAgICAgIGxldCBhY3R1YWxGaWVsZFZhbHVlID0gY3VycmVudFZhbHVlICE9IG51bGwgPyBjdXJyZW50VmFsdWVbZmllbGROYW1lXSA6IHVuZGVmaW5lZDsgICAgIFxuXG4gICAgICAgIGNvbnN0IGNoaWxkRmllbGRWYWx1ZSA9IGV2YWx1YXRlRXhwcihhY3R1YWxGaWVsZFZhbHVlLCBleHBlY3RlZEZpZWxkVmFsdWUsIGZvcm1hdFByZWZpeChmaWVsZE5hbWUsIHByZWZpeCksIGplcyk7XG4gICAgICAgIGlmICh0eXBlb2YgY2hpbGRGaWVsZFZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBbZmllbGROYW1lXTogY2hpbGRGaWVsZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9ICAgICAgICBcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmNsYXNzIEpFUyB7XG4gICAgY29uc3RydWN0b3IodmFsdWUsIGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmN1c3RvbWl6ZXIgPSBjdXN0b21pemVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Kn0gZXhwZWN0ZWQgXG4gICAgICogQHBhcmFtICB7Li4uYW55fSBhcmdzIFxuICAgICAqL1xuICAgIG1hdGNoKGV4cGVjdGVkKSB7ICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbWF0Y2godGhpcy52YWx1ZSwgZXhwZWN0ZWQsIHVuZGVmaW5lZCwgdGhpcy5jdXN0b21pemVyKTtcbiAgICAgICAgaWYgKHJlc3VsdFswXSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihyZXN1bHRbMV0sIHtcbiAgICAgICAgICAgIGFjdHVhbDogdGhpcy52YWx1ZSxcbiAgICAgICAgICAgIGV4cGVjdGVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGV2YWx1YXRlKGV4cHIpIHtcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlRXhwcih0aGlzLnZhbHVlLCBleHByLCB1bmRlZmluZWQsIHRoaXMuY3VzdG9taXplcik7XG4gICAgfVxuXG4gICAgdXBkYXRlKGV4cHIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBldmFsdWF0ZUV4cHIodGhpcy52YWx1ZSwgZXhwciwgdW5kZWZpbmVkLCB0aGlzLmN1c3RvbWl6ZXIpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuSkVTLm1hdGNoID0gbWF0Y2g7XG5KRVMuZXZhbHVhdGUgPSBldmFsdWF0ZUV4cHI7XG5KRVMuZGVmYXVsdEN1c3RvbWl6ZXIgPSBkZWZhdWx0Q3VzdG9taXplcjtcblxubW9kdWxlLmV4cG9ydHMgPSBKRVM7Il19