"use strict";

require("source-map-support/register");

const {
  _
} = require('rk-utils');

const {
  ValidationError
} = require('./Errors');

const OPERATOR_NOT_ALONE = 'Query operator can only be used alone in a stage.';

const INVALID_QUERY_OPERATOR = token => `Invalid JES query operator "${token}".`;

const INVALID_TEST_OPERATOR = token => `Invalid JES test operator "${token}".`;

const INVALID_QUERY_HANDLER = op => `JES query operator "${op}" handler not found.`;

const INVALID_TEST_HANLDER = op => `JES test operator "${op}" handler not found.`;

const NOT_A_TWO_TUPLE = 'The value of collection operator should a two-tuple.';
const INCORRECT_PREFIX = 'Query operator used in matching should starts with prefix $$.';
const NOT_A_UNARY_QUERY = 'Only unary query operator is allowed to be used directly in a matching.';

const INVALID_COLLECTION_OP = op => `Invalid collection operator "${op}".`;

const OPERAND_NOT_ARRAY = op => `The right operand of JES operator "${op}" should be an array.`;

const OPERAND_NOT_BOOL = op => `The right operand of JES operator "${op}" should be a boolean value.`;

const OPERAND_NOT_STRING = op => `The right operand of JES operator "${op}" should be a string.`;

const REQUIRE_RIGHT_OPERAND = op => `Binary query operator "${op}" requires the right operand.`;

const OP_EQUAL = ['$eq', '$eql', '$equal'];
const OP_NOT_EQUAL = ['$ne', '$neq', '$notEqual'];
const OP_GREATER_THAN = ['$gt', '$>', '$greaterThan'];
const OP_GREATER_THAN_OR_EQUAL = ['$gte', '$<=', '$greaterThanOrEqual'];
const OP_LESS_THAN = ['$lt', '$<', '$lessThan'];
const OP_LESS_THAN_OR_EQUAL = ['$lte', '$<=', '$lessThanOrEqual'];
const OP_IN = ['$in'];
const OP_NOT_IN = ['$nin', '$notIn'];
const OP_EXISTS = ['$exist', '$exists'];
const OP_MATCH = ['$has', '$match', '$all'];
const OP_MATCH_ANY = ['$any', '$or', '$either'];
const OP_TYPE = ['$type'];
const OP_SIZE = ['$size', '$length', '$count'];
const OP_SUM = ['$sum', '$total'];
const OP_KEYS = ['$keys'];
const OP_VALUES = ['$values'];
const OP_ADD = ['$add', '$plus', '$inc'];
const OP_SUB = ['$sub', '$subtract', '$minus', '$dec'];
const OP_MUL = ['$mul', '$multiply', '$times'];
const OP_DIV = ['$div', '$divide'];
const OP_PICK = ['$pick'];
const OP_OMIT = ['$omit'];
const OP_GROUP = ['$group', '$groupBy'];
const OP_SORT = ['$sort', '$orderBy', '$sortBy'];
const PFX_MAP_OP = '|>';
const MapOfOps = new Map();

const addOpToMap = (tokens, tag) => tokens.forEach(token => MapOfOps.set(token, tag));

addOpToMap(OP_EQUAL, 'OP_EQUAL');
addOpToMap(OP_NOT_EQUAL, 'OP_NOT_EQUAL');
addOpToMap(OP_GREATER_THAN, 'OP_GREATER_THAN');
addOpToMap(OP_GREATER_THAN_OR_EQUAL, 'OP_GREATER_THAN_OR_EQUAL');
addOpToMap(OP_LESS_THAN, 'OP_LESS_THAN');
addOpToMap(OP_LESS_THAN_OR_EQUAL, 'OP_LESS_THAN_OR_EQUAL');
addOpToMap(OP_IN, 'OP_IN');
addOpToMap(OP_NOT_IN, 'OP_NOT_IN');
addOpToMap(OP_EXISTS, 'OP_EXISTS');
addOpToMap(OP_MATCH, 'OP_MATCH');
addOpToMap(OP_MATCH_ANY, 'OP_MATCH_ANY');
addOpToMap(OP_TYPE, 'OP_TYPE');
const MapOfMans = new Map();

const addManToMap = (tokens, tag) => tokens.forEach(token => MapOfMans.set(token, tag));

addManToMap(OP_SIZE, ['OP_SIZE', true]);
addManToMap(OP_SUM, ['OP_SUM', true]);
addManToMap(OP_KEYS, ['OP_KEYS', true]);
addManToMap(OP_VALUES, ['OP_VALUES', true]);
addManToMap(OP_ADD, ['OP_ADD', false]);
addManToMap(OP_SUB, ['OP_SUB', false]);
addManToMap(OP_MUL, ['OP_MUL', false]);
addManToMap(OP_DIV, ['OP_DIV', false]);
addManToMap(OP_PICK, ['OP_PICK', false]);
addManToMap(OP_OMIT, ['OP_OMIT', false]);
addManToMap(OP_GROUP, ['OP_GROUP', false]);
addManToMap(OP_SORT, ['OP_SORT', false]);
const defaultJesHandlers = {
  OP_EQUAL: (left, right) => _.isEqual(left, right),
  OP_NOT_EQUAL: (left, right) => !_.isEqual(left, right),
  OP_GREATER_THAN: (left, right) => left > right,
  OP_GREATER_THAN_OR_EQUAL: (left, right) => left >= right,
  OP_LESS_THAN: (left, right) => left < right,
  OP_LESS_THAN_OR_EQUAL: (left, right) => left <= right,
  OP_IN: (left, right) => {
    if (right == null) return false;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_IN'));
    }

    return right.find(element => defaultJesHandlers.OP_EQUAL(left, element));
  },
  OP_NOT_IN: (left, right) => {
    if (right == null) return true;

    if (!Array.isArray(right)) {
      throw new Error(OPERAND_NOT_ARRAY('OP_NOT_IN'));
    }

    return _.every(right, element => defaultJesHandlers.OP_NOT_EQUAL(left, element));
  },
  OP_EXISTS: (left, right) => {
    if (typeof right !== 'boolean') {
      throw new Error(OPERAND_NOT_BOOL('OP_EXISTS'));
    }

    return right ? left != null : left == null;
  },
  OP_TYPE: (left, right) => {
    if (typeof right !== 'string') {
      throw new Error(OPERAND_NOT_STRING('OP_TYPE'));
    }

    return typeof left === right;
  },
  OP_MATCH: (left, right, jes, prefix) => {
    const r = match(left, right, prefix, jes);
    return r[0];
  },
  OP_MATCH_ANY: (left, right, jes, prefix) => {
    let found = _.find(right, rule => {
      const r = match(left, rule, prefix, jes);
      return r[0];
    });

    return found ? true : false;
  }
};
const defaultManipulations = {
  OP_SIZE: left => _.size(left),
  OP_SUM: left => _.reduce(left, (sum, item) => {
    sum += item;
    return sum;
  }, 0),
  OP_KEYS: left => _.keys(left),
  OP_VALUES: left => _.values(left),
  OP_ADD: (left, right) => left + right,
  OP_SUB: (left, right) => left - right,
  OP_MUL: (left, right) => left * right,
  OP_DIV: (left, right) => left / right,
  OP_PICK: (left, right) => _.pick(left, right),
  OP_OMIT: (left, right) => _.omit(left, right),
  OP_GROUP: (left, right) => _.groupBy(left, right),
  OP_SORT: (left, right) => _.sortBy(left, right)
};

const formatName = (name, prefix) => {
  const fullName = name == null ? prefix : formatPrefix(name, prefix);
  return fullName.indexOf('(') !== -1 ? `The query "${fullName}"` : `"${fullName}"`;
};

const formatKey = (key, hasPrefix) => _.isInteger(key) ? `[${key}]` : hasPrefix ? '.' + key : key;

const formatPrefix = (key, prefix) => prefix != null ? `${prefix}${formatKey(key, true)}` : formatKey(key, false);

const formatQuery = opMeta => `${defaultQueryExplanations[opMeta[0]]}(${opMeta[1] ? '' : '?'})`;

const formatMap = name => `map(->${name})`;

const defaultJesExplanations = {
  OP_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should not be ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than ${right}, but ${JSON.stringify(left)} given.`,
  OP_GREATER_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be greater than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than ${right}, but ${JSON.stringify(left)} given.`,
  OP_LESS_THAN_OR_EQUAL: (name, left, right, prefix) => `${formatName(name, prefix)} should be less than or equal to ${right}, but ${JSON.stringify(left)} given.`,
  OP_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should be one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_NOT_IN: (name, left, right, prefix) => `${formatName(name, prefix)} should not be any one of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_EXISTS: (name, left, right, prefix) => `${formatName(name, prefix)} should${right ? ' not ' : ' '}be NULL.`,
  OP_MATCH: (name, left, right, prefix) => `${formatName(name, prefix)} should match ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_MATCH_ANY: (name, left, right, prefix) => `${formatName(name, prefix)} should match any of ${JSON.stringify(right)}, but ${JSON.stringify(left)} given.`,
  OP_TYPE: (name, left, right, prefix) => `The type of ${formatName(name, prefix)} should be "${right}", but ${JSON.stringify(left)} given.`
};
const defaultQueryExplanations = {
  OP_SIZE: 'size',
  OP_SUM: 'sum',
  OP_KEYS: 'keys',
  OP_VALUES: 'values',
  OP_ADD: 'add',
  OP_SUB: 'subtract',
  OP_MUL: 'multiply',
  OP_DIV: 'divide',
  OP_PICK: 'pick',
  OP_OMIT: 'omit',
  OP_GROUP: 'groupBy',
  OP_SORT: 'sortBy'
};

function getUnmatchedExplanation(jes, op, name, leftValue, rightValue, prefix) {
  const getter = jes.operatorExplanations[op] || jes.operatorExplanations.OP_MATCH;
  return getter(name, leftValue, rightValue, prefix);
}

function test(value, op, opValue, jes, prefix) {
  const handler = jes.operatorHandlers[op];

  if (!handler) {
    throw new Error(INVALID_TEST_HANLDER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluate(value, op, opValue, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, opValue, jes, prefix);
}

function evaluateUnary(value, op, jes, prefix) {
  const handler = jes.queryHanlders[op];

  if (!handler) {
    throw new Error(INVALID_QUERY_HANDLER(op));
  }

  return handler(value, jes, prefix);
}

function evaluateByOpMeta(currentValue, rightValue, opMeta, prefix, jes) {
  if (opMeta[1]) {
    return rightValue ? evaluateUnary(currentValue, opMeta[0], jes, prefix) : currentValue;
  }

  return evaluate(currentValue, opMeta[0], rightValue, jes, prefix);
}

const defaultCustomizer = {
  mapOfOperators: MapOfOps,
  mapOfManipulators: MapOfMans,
  operatorHandlers: defaultJesHandlers,
  operatorExplanations: defaultJesExplanations,
  queryHanlders: defaultManipulations
};

function match(actual, expected, prefix, jes) {
  jes != null || (jes = defaultCustomizer);
  let passObjectCheck = false;

  if (!_.isPlainObject(expected)) {
    if (!test(actual, 'OP_EQUAL', expected, jes, prefix)) {
      return [false, jes.operatorExplanations.OP_EQUAL(null, actual, expected, prefix)];
    }

    return [true];
  }

  for (let fieldName in expected) {
    let expectedFieldValue = expected[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (l > 4 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (!Array.isArray(expectedFieldValue) && expectedFieldValue.length !== 2) {
          throw new Error(NOT_A_TWO_TUPLE);
        }

        if (fieldName[3] !== '$') {
          throw new Error(INCORRECT_PREFIX);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(3);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          const mapResult = _.isPlainObject(actual) ? _.mapValues(actual, (item, key) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(key, prefix), jes)) : _.map(actual, (item, i) => evaluateByOpMeta(item, expectedFieldValue[0], opMeta, formatPrefix(i, prefix), jes));
          const matchResult = match(mapResult, expectedFieldValue[1], formatPrefix(formatMap(formatQuery(opMeta)), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        continue;
      }

      if (fieldName[0] === '$') {
        if (l > 2 && fieldName[1] === '$') {
          fieldName = fieldName.substr(1);
          const opMeta = jes.mapOfManipulators.get(fieldName);

          if (!opMeta) {
            throw new Error(INVALID_QUERY_OPERATOR(fieldName));
          }

          if (!opMeta[1]) {
            throw new Error(NOT_A_UNARY_QUERY);
          }

          const queryResult = evaluateUnary(actual, opMeta[0], jes, prefix);
          const matchResult = match(queryResult, expectedFieldValue, formatPrefix(formatQuery(opMeta), prefix), jes);

          if (!matchResult[0]) {
            return matchResult;
          }

          continue;
        }

        const op = jes.mapOfOperators.get(fieldName);

        if (!op) {
          throw new Error(INVALID_TEST_OPERATOR(fieldName));
        }

        if (!test(actual, op, expectedFieldValue, jes, prefix)) {
          return [false, getUnmatchedExplanation(jes, op, null, actual, expectedFieldValue, prefix)];
        }

        continue;
      }
    }

    if (!passObjectCheck) {
      if (actual == null) return [false, jes.operatorExplanations.OP_EXISTS(null, null, true, prefix)];
      const actualType = typeof actual;
      if (actualType !== 'object') return [false, jes.operatorExplanations.OP_TYPE(null, actualType, 'object', prefix)];
    }

    passObjectCheck = true;
    let actualFieldValue = actual[fieldName];

    if (expectedFieldValue != null && typeof expectedFieldValue === 'object') {
      const [ok, reason] = match(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

      if (!ok) {
        return [false, reason];
      }
    } else {
      if (!test(actualFieldValue, 'OP_EQUAL', expectedFieldValue, jes, prefix)) {
        return [false, jes.operatorExplanations.OP_EQUAL(fieldName, actualFieldValue, expectedFieldValue, prefix)];
      }
    }
  }

  return [true];
}

function evaluateExpr(currentValue, expr, prefix, jes) {
  jes != null || (jes = defaultCustomizer);

  if (Array.isArray(expr)) {
    return expr.reduce((result, exprItem) => evaluateExpr(result, exprItem, prefix, jes), currentValue);
  }

  if (typeof expr === 'string') {
    const opMeta = jes.mapOfManipulators.get(expr);

    if (!opMeta) {
      throw new Error(INVALID_QUERY_OPERATOR(expr));
    }

    if (!opMeta[1]) {
      throw new Error(REQUIRE_RIGHT_OPERAND(expr));
    }

    return evaluateUnary(currentValue, opMeta[0], jes, prefix);
  }

  let result,
      hasOperator = false;

  for (let fieldName in expr) {
    let expectedFieldValue = expr[fieldName];
    const l = fieldName.length;

    if (l > 1) {
      if (fieldName[0] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        result = evaluateByOpMeta(currentValue, expectedFieldValue, opMeta, prefix, jes);
        hasOperator = true;
        continue;
      }

      if (l > 3 && fieldName[1] === '>' && fieldName[2] === '$') {
        if (result) {
          throw new Error(OPERATOR_NOT_ALONE);
        }

        const mapOp = fieldName.substr(0, 2);
        fieldName = fieldName.substr(2);
        const opMeta = jes.mapOfManipulators.get(fieldName);

        if (!opMeta) {
          throw new Error(INVALID_QUERY_OPERATOR(fieldName));
        }

        if (mapOp === PFX_MAP_OP) {
          result = _.map(currentValue, (item, i) => evaluateByOpMeta(item, expectedFieldValue, opMeta, formatPrefix(i, prefix), jes));
        } else {
          throw new Error(INVALID_COLLECTION_OP(mapOp));
        }

        hasOperator = true;
        continue;
      }
    }

    if (hasOperator) {
      throw new Error(OPERATOR_NOT_ALONE);
    }

    let actualFieldValue = currentValue != null ? currentValue[fieldName] : undefined;
    const childFieldValue = evaluateExpr(actualFieldValue, expectedFieldValue, formatPrefix(fieldName, prefix), jes);

    if (typeof childFieldValue !== 'undefined') {
      result = { ...result,
        [fieldName]: childFieldValue
      };
    }
  }

  return result;
}

class JES {
  constructor(value, customizer) {
    this.value = value;
    this.customizer = customizer;
  }

  match(expected) {
    const result = match(this.value, expected, undefined, this.customizer);
    if (result[0]) return this;
    throw new ValidationError(result[1], {
      actual: this.value,
      expected
    });
  }

  evaluate(expr) {
    return evaluateExpr(this.value, expr, undefined, this.customizer);
  }

  update(expr) {
    const value = evaluateExpr(this.value, expr, undefined, this.customizer);
    this.value = value;
    return this;
  }

}

JES.match = match;
JES.evaluate = evaluateExpr;
JES.defaultCustomizer = defaultCustomizer;
module.exports = JES;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9qZXMuanMiXSwibmFtZXMiOlsiXyIsInJlcXVpcmUiLCJWYWxpZGF0aW9uRXJyb3IiLCJPUEVSQVRPUl9OT1RfQUxPTkUiLCJJTlZBTElEX1FVRVJZX09QRVJBVE9SIiwidG9rZW4iLCJJTlZBTElEX1RFU1RfT1BFUkFUT1IiLCJJTlZBTElEX1FVRVJZX0hBTkRMRVIiLCJvcCIsIklOVkFMSURfVEVTVF9IQU5MREVSIiwiTk9UX0FfVFdPX1RVUExFIiwiSU5DT1JSRUNUX1BSRUZJWCIsIk5PVF9BX1VOQVJZX1FVRVJZIiwiSU5WQUxJRF9DT0xMRUNUSU9OX09QIiwiT1BFUkFORF9OT1RfQVJSQVkiLCJPUEVSQU5EX05PVF9CT09MIiwiT1BFUkFORF9OT1RfU1RSSU5HIiwiUkVRVUlSRV9SSUdIVF9PUEVSQU5EIiwiT1BfRVFVQUwiLCJPUF9OT1RfRVFVQUwiLCJPUF9HUkVBVEVSX1RIQU4iLCJPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUwiLCJPUF9MRVNTX1RIQU4iLCJPUF9MRVNTX1RIQU5fT1JfRVFVQUwiLCJPUF9JTiIsIk9QX05PVF9JTiIsIk9QX0VYSVNUUyIsIk9QX01BVENIIiwiT1BfTUFUQ0hfQU5ZIiwiT1BfVFlQRSIsIk9QX1NJWkUiLCJPUF9TVU0iLCJPUF9LRVlTIiwiT1BfVkFMVUVTIiwiT1BfQUREIiwiT1BfU1VCIiwiT1BfTVVMIiwiT1BfRElWIiwiT1BfUElDSyIsIk9QX09NSVQiLCJPUF9HUk9VUCIsIk9QX1NPUlQiLCJQRlhfTUFQX09QIiwiTWFwT2ZPcHMiLCJNYXAiLCJhZGRPcFRvTWFwIiwidG9rZW5zIiwidGFnIiwiZm9yRWFjaCIsInNldCIsIk1hcE9mTWFucyIsImFkZE1hblRvTWFwIiwiZGVmYXVsdEplc0hhbmRsZXJzIiwibGVmdCIsInJpZ2h0IiwiaXNFcXVhbCIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiZmluZCIsImVsZW1lbnQiLCJldmVyeSIsImplcyIsInByZWZpeCIsInIiLCJtYXRjaCIsImZvdW5kIiwicnVsZSIsImRlZmF1bHRNYW5pcHVsYXRpb25zIiwic2l6ZSIsInJlZHVjZSIsInN1bSIsIml0ZW0iLCJrZXlzIiwidmFsdWVzIiwicGljayIsIm9taXQiLCJncm91cEJ5Iiwic29ydEJ5IiwiZm9ybWF0TmFtZSIsIm5hbWUiLCJmdWxsTmFtZSIsImZvcm1hdFByZWZpeCIsImluZGV4T2YiLCJmb3JtYXRLZXkiLCJrZXkiLCJoYXNQcmVmaXgiLCJpc0ludGVnZXIiLCJmb3JtYXRRdWVyeSIsIm9wTWV0YSIsImRlZmF1bHRRdWVyeUV4cGxhbmF0aW9ucyIsImZvcm1hdE1hcCIsImRlZmF1bHRKZXNFeHBsYW5hdGlvbnMiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0VW5tYXRjaGVkRXhwbGFuYXRpb24iLCJsZWZ0VmFsdWUiLCJyaWdodFZhbHVlIiwiZ2V0dGVyIiwib3BlcmF0b3JFeHBsYW5hdGlvbnMiLCJ0ZXN0IiwidmFsdWUiLCJvcFZhbHVlIiwiaGFuZGxlciIsIm9wZXJhdG9ySGFuZGxlcnMiLCJldmFsdWF0ZSIsInF1ZXJ5SGFubGRlcnMiLCJldmFsdWF0ZVVuYXJ5IiwiZXZhbHVhdGVCeU9wTWV0YSIsImN1cnJlbnRWYWx1ZSIsImRlZmF1bHRDdXN0b21pemVyIiwibWFwT2ZPcGVyYXRvcnMiLCJtYXBPZk1hbmlwdWxhdG9ycyIsImFjdHVhbCIsImV4cGVjdGVkIiwicGFzc09iamVjdENoZWNrIiwiaXNQbGFpbk9iamVjdCIsImZpZWxkTmFtZSIsImV4cGVjdGVkRmllbGRWYWx1ZSIsImwiLCJsZW5ndGgiLCJtYXBPcCIsInN1YnN0ciIsImdldCIsIm1hcFJlc3VsdCIsIm1hcFZhbHVlcyIsIm1hcCIsImkiLCJtYXRjaFJlc3VsdCIsInF1ZXJ5UmVzdWx0IiwiYWN0dWFsVHlwZSIsImFjdHVhbEZpZWxkVmFsdWUiLCJvayIsInJlYXNvbiIsImV2YWx1YXRlRXhwciIsImV4cHIiLCJyZXN1bHQiLCJleHBySXRlbSIsImhhc09wZXJhdG9yIiwidW5kZWZpbmVkIiwiY2hpbGRGaWVsZFZhbHVlIiwiSkVTIiwiY29uc3RydWN0b3IiLCJjdXN0b21pemVyIiwidXBkYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFRQyxPQUFPLENBQUMsVUFBRCxDQUFyQjs7QUFDQSxNQUFNO0FBQUVDLEVBQUFBO0FBQUYsSUFBc0JELE9BQU8sQ0FBQyxVQUFELENBQW5DOztBQUdBLE1BQU1FLGtCQUFrQixHQUFHLG1EQUEzQjs7QUFDQSxNQUFNQyxzQkFBc0IsR0FBR0MsS0FBSyxJQUFLLCtCQUE4QkEsS0FBTSxJQUE3RTs7QUFDQSxNQUFNQyxxQkFBcUIsR0FBR0QsS0FBSyxJQUFLLDhCQUE2QkEsS0FBTSxJQUEzRTs7QUFDQSxNQUFNRSxxQkFBcUIsR0FBR0MsRUFBRSxJQUFLLHVCQUFzQkEsRUFBRyxzQkFBOUQ7O0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUdELEVBQUUsSUFBSyxzQkFBcUJBLEVBQUcsc0JBQTVEOztBQUNBLE1BQU1FLGVBQWUsR0FBRyxzREFBeEI7QUFDQSxNQUFNQyxnQkFBZ0IsR0FBRywrREFBekI7QUFDQSxNQUFNQyxpQkFBaUIsR0FBRyx5RUFBMUI7O0FBQ0EsTUFBTUMscUJBQXFCLEdBQUdMLEVBQUUsSUFBSyxnQ0FBK0JBLEVBQUcsSUFBdkU7O0FBRUEsTUFBTU0saUJBQWlCLEdBQUdOLEVBQUUsSUFBSyxzQ0FBcUNBLEVBQUcsdUJBQXpFOztBQUNBLE1BQU1PLGdCQUFnQixHQUFFUCxFQUFFLElBQUssc0NBQXFDQSxFQUFHLDhCQUF2RTs7QUFDQSxNQUFNUSxrQkFBa0IsR0FBRVIsRUFBRSxJQUFLLHNDQUFxQ0EsRUFBRyx1QkFBekU7O0FBRUEsTUFBTVMscUJBQXFCLEdBQUdULEVBQUUsSUFBSywwQkFBeUJBLEVBQUcsK0JBQWpFOztBQUdBLE1BQU1VLFFBQVEsR0FBRyxDQUFFLEtBQUYsRUFBUyxNQUFULEVBQWlCLFFBQWpCLENBQWpCO0FBQ0EsTUFBTUMsWUFBWSxHQUFHLENBQUUs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QjtBQUVBbUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCTCxHQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIEpTT04gRXhwcmVzc2lvbiBTeW50YXggKEpFUylcbmNvbnN0IHsgXyB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcbmNvbnN0IHsgVmFsaWRhdGlvbkVycm9yIH0gPSByZXF1aXJlKCcuL0Vycm9ycycpO1xuXG4vL0V4Y2VwdGlvbiBtZXNzYWdlc1xuY29uc3QgT1BFUkFUT1JfTk9UX0FMT05FID0gJ1F1ZXJ5IG9wZXJhdG9yIGNhbiBvbmx5IGJlIHVzZWQgYWxvbmUgaW4gYSBzdGFnZS4nO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7dG9rZW59XCIuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9PUEVSQVRPUiA9IHRva2VuID0+IGBJbnZhbGlkIEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHt0b2tlbn1cIi5gO1xuY29uc3QgSU5WQUxJRF9RVUVSWV9IQU5ETEVSID0gb3AgPT4gYEpFUyBxdWVyeSBvcGVyYXRvciBcIiR7b3B9XCIgaGFuZGxlciBub3QgZm91bmQuYDtcbmNvbnN0IElOVkFMSURfVEVTVF9IQU5MREVSID0gb3AgPT4gYEpFUyB0ZXN0IG9wZXJhdG9yIFwiJHtvcH1cIiBoYW5kbGVyIG5vdCBmb3VuZC5gO1xuY29uc3QgTk9UX0FfVFdPX1RVUExFID0gJ1RoZSB2YWx1ZSBvZiBjb2xsZWN0aW9uIG9wZXJhdG9yIHNob3VsZCBhIHR3by10dXBsZS4nO1xuY29uc3QgSU5DT1JSRUNUX1BSRUZJWCA9ICdRdWVyeSBvcGVyYXRvciB1c2VkIGluIG1hdGNoaW5nIHNob3VsZCBzdGFydHMgd2l0aCBwcmVmaXggJCQuJztcbmNvbnN0IE5PVF9BX1VOQVJZX1FVRVJZID0gJ09ubHkgdW5hcnkgcXVlcnkgb3BlcmF0b3IgaXMgYWxsb3dlZCB0byBiZSB1c2VkIGRpcmVjdGx5IGluIGEgbWF0Y2hpbmcuJztcbmNvbnN0IElOVkFMSURfQ09MTEVDVElPTl9PUCA9IG9wID0+IGBJbnZhbGlkIGNvbGxlY3Rpb24gb3BlcmF0b3IgXCIke29wfVwiLmA7XG5cbmNvbnN0IE9QRVJBTkRfTk9UX0FSUkFZID0gb3AgPT4gYFRoZSByaWdodCBvcGVyYW5kIG9mIEpFUyBvcGVyYXRvciBcIiR7b3B9XCIgc2hvdWxkIGJlIGFuIGFycmF5LmA7XG5jb25zdCBPUEVSQU5EX05PVF9CT09MPSBvcCA9PiBgVGhlIHJpZ2h0IG9wZXJhbmQgb2YgSkVTIG9wZXJhdG9yIFwiJHtvcH1cIiBzaG91bGQgYmUgYSBib29sZWFuIHZhbHVlLmA7XG5jb25zdCBPUEVSQU5EX05PVF9TVFJJTkc9IG9wID0+IGBUaGUgcmlnaHQgb3BlcmFuZCBvZiBKRVMgb3BlcmF0b3IgXCIke29wfVwiIHNob3VsZCBiZSBhIHN0cmluZy5gO1xuXG5jb25zdCBSRVFVSVJFX1JJR0hUX09QRVJBTkQgPSBvcCA9PiBgQmluYXJ5IHF1ZXJ5IG9wZXJhdG9yIFwiJHtvcH1cIiByZXF1aXJlcyB0aGUgcmlnaHQgb3BlcmFuZC5gXG5cbi8vQ29uZGl0aW9uIG9wZXJhdG9yXG5jb25zdCBPUF9FUVVBTCA9IFsgJyRlcScsICckZXFsJywgJyRlcXVhbCcgXTtcbmNvbnN0IE9QX05PVF9FUVVBTCA9IFsgJyRuZScsICckbmVxJywgJyRub3RFcXVhbCcgXTtcblxuY29uc3QgT1BfR1JFQVRFUl9USEFOID0gWyAnJGd0JywgJyQ+JywgJyRncmVhdGVyVGhhbicgXTtcbmNvbnN0IE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCA9IFsgJyRndGUnLCAnJDw9JywgJyRncmVhdGVyVGhhbk9yRXF1YWwnIF07XG5cbmNvbnN0IE9QX0xFU1NfVEhBTiA9IFsgJyRsdCcsICckPCcsICckbGVzc1RoYW4nIF07XG5jb25zdCBPUF9MRVNTX1RIQU5fT1JfRVFVQUwgPSBbICckbHRlJywgJyQ8PScsICckbGVzc1RoYW5PckVxdWFsJyBdO1xuXG5jb25zdCBPUF9JTiA9IFsgJyRpbicgXTtcbmNvbnN0IE9QX05PVF9JTiA9IFsgJyRuaW4nLCAnJG5vdEluJyBdO1xuXG5jb25zdCBPUF9FWElTVFMgPSBbICckZXhpc3QnLCAnJGV4aXN0cycgXTtcblxuY29uc3QgT1BfTUFUQ0ggPSBbICckaGFzJywgJyRtYXRjaCcsICckYWxsJyBdO1xuXG5jb25zdCBPUF9NQVRDSF9BTlkgPSBbICckYW55JywgJyRvcicsICckZWl0aGVyJyBdO1xuXG5jb25zdCBPUF9UWVBFID0gWyAnJHR5cGUnIF07XG5cbi8vUXVlcnkgJiBhZ2dyZWdhdGUgb3BlcmF0b3JcbmNvbnN0IE9QX1NJWkUgPSBbICckc2l6ZScsICckbGVuZ3RoJywgJyRjb3VudCcgXTtcbmNvbnN0IE9QX1NVTSA9IFsgJyRzdW0nLCAnJHRvdGFsJyBdO1xuY29uc3QgT1BfS0VZUyA9IFsgJyRrZXlzJyBdO1xuY29uc3QgT1BfVkFMVUVTID0gWyAnJHZhbHVlcycgXTtcblxuLy9NYW5pcHVsYXRlIG9wZXJhdGlvblxuY29uc3QgT1BfQUREID0gWyAnJGFkZCcsICckcGx1cycsICAgICAnJGluYycgXTtcbmNvbnN0IE9QX1NVQiA9IFsgJyRzdWInLCAnJHN1YnRyYWN0JywgJyRtaW51cycsICckZGVjJyBdO1xuY29uc3QgT1BfTVVMID0gWyAnJG11bCcsICckbXVsdGlwbHknLCAgJyR0aW1lcycgXTtcbmNvbnN0IE9QX0RJViA9IFsgJyRkaXYnLCAnJGRpdmlkZScgXTtcblxuY29uc3QgT1BfUElDSyA9IFsgJyRwaWNrJyBdO1xuY29uc3QgT1BfT01JVCA9IFsgJyRvbWl0JyBdO1xuY29uc3QgT1BfR1JPVVAgPSBbICckZ3JvdXAnLCAnJGdyb3VwQnknIF07XG5jb25zdCBPUF9TT1JUID0gWyAnJHNvcnQnLCAnJG9yZGVyQnknLCAnJHNvcnRCeScgXTtcblxuY29uc3QgUEZYX01BUF9PUCA9ICd8Pic7XG5cbmNvbnN0IE1hcE9mT3BzID0gbmV3IE1hcCgpO1xuY29uc3QgYWRkT3BUb01hcCA9ICh0b2tlbnMsIHRhZykgPT4gdG9rZW5zLmZvckVhY2godG9rZW4gPT4gTWFwT2ZPcHMuc2V0KHRva2VuLCB0YWcpKTtcbmFkZE9wVG9NYXAoT1BfRVFVQUwsICdPUF9FUVVBTCcpO1xuYWRkT3BUb01hcChPUF9OT1RfRVFVQUwsICdPUF9OT1RfRVFVQUwnKTtcbmFkZE9wVG9NYXAoT1BfR1JFQVRFUl9USEFOLCAnT1BfR1JFQVRFUl9USEFOJyk7XG5hZGRPcFRvTWFwKE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCwgJ09QX0dSRUFURVJfVEhBTl9PUl9FUVVBTCcpO1xuYWRkT3BUb01hcChPUF9MRVNTX1RIQU4sICdPUF9MRVNTX1RIQU4nKTtcbmFkZE9wVG9NYXAoT1BfTEVTU19USEFOX09SX0VRVUFMLCAnT1BfTEVTU19USEFOX09SX0VRVUFMJyk7XG5hZGRPcFRvTWFwKE9QX0lOLCAnT1BfSU4nKTtcbmFkZE9wVG9NYXAoT1BfTk9UX0lOLCAnT1BfTk9UX0lOJyk7XG5hZGRPcFRvTWFwKE9QX0VYSVNUUywgJ09QX0VYSVNUUycpO1xuYWRkT3BUb01hcChPUF9NQVRDSCwgJ09QX01BVENIJyk7XG5hZGRPcFRvTWFwKE9QX01BVENIX0FOWSwgJ09QX01BVENIX0FOWScpO1xuYWRkT3BUb01hcChPUF9UWVBFLCAnT1BfVFlQRScpO1xuXG5jb25zdCBNYXBPZk1hbnMgPSBuZXcgTWFwKCk7XG5jb25zdCBhZGRNYW5Ub01hcCA9ICh0b2tlbnMsIHRhZykgPT4gdG9rZW5zLmZvckVhY2godG9rZW4gPT4gTWFwT2ZNYW5zLnNldCh0b2tlbiwgdGFnKSk7XG4vLyBbIDxvcCBuYW1lPiwgPHVuYXJ5PiBdXG5hZGRNYW5Ub01hcChPUF9TSVpFLCBbJ09QX1NJWkUnLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX1NVTSwgWydPUF9TVU0nLCB0cnVlIF0pOyBcbmFkZE1hblRvTWFwKE9QX0tFWVMsIFsnT1BfS0VZUycsIHRydWUgXSk7IFxuYWRkTWFuVG9NYXAoT1BfVkFMVUVTLCBbJ09QX1ZBTFVFUycsIHRydWUgXSk7IFxuXG5hZGRNYW5Ub01hcChPUF9BREQsIFsnT1BfQUREJywgZmFsc2UgXSk7IFxuYWRkTWFuVG9NYXAoT1BfU1VCLCBbJ09QX1NVQicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfTVVMLCBbJ09QX01VTCcsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfRElWLCBbJ09QX0RJVicsIGZhbHNlIF0pO1xuYWRkTWFuVG9NYXAoT1BfUElDSywgWydPUF9QSUNLJywgZmFsc2VdKTtcbmFkZE1hblRvTWFwKE9QX09NSVQsIFsnT1BfT01JVCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9HUk9VUCwgWydPUF9HUk9VUCcsIGZhbHNlXSk7XG5hZGRNYW5Ub01hcChPUF9TT1JULCBbJ09QX1NPUlQnLCBmYWxzZV0pO1xuXG5jb25zdCBkZWZhdWx0SmVzSGFuZGxlcnMgPSB7XG4gICAgT1BfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gXy5pc0VxdWFsKGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9OT1RfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gIV8uaXNFcXVhbChsZWZ0LCByaWdodCksXG4gICAgT1BfR1JFQVRFUl9USEFOOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgPiByaWdodCxcbiAgICBPUF9HUkVBVEVSX1RIQU5fT1JfRVFVQUw6IChsZWZ0LCByaWdodCkgPT4gbGVmdCA+PSByaWdodCxcbiAgICBPUF9MRVNTX1RIQU46IChsZWZ0LCByaWdodCkgPT4gbGVmdCA8IHJpZ2h0LFxuICAgIE9QX0xFU1NfVEhBTl9PUl9FUVVBTDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0IDw9IHJpZ2h0LFxuICAgIE9QX0lOOiAobGVmdCwgcmlnaHQpID0+IHtcbiAgICAgICAgaWYgKHJpZ2h0ID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9JTicpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodC5maW5kKGVsZW1lbnQgPT4gZGVmYXVsdEplc0hhbmRsZXJzLk9QX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX05PVF9JTjogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmIChyaWdodCA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJpZ2h0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0FSUkFZKCdPUF9OT1RfSU4nKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gXy5ldmVyeShyaWdodCwgZWxlbWVudCA9PiBkZWZhdWx0SmVzSGFuZGxlcnMuT1BfTk9UX0VRVUFMKGxlZnQsIGVsZW1lbnQpKTtcbiAgICB9LFxuICAgIE9QX0VYSVNUUzogKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcmlnaHQgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX0JPT0woJ09QX0VYSVNUUycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByaWdodCA/IGxlZnQgIT0gbnVsbCA6IGxlZnQgPT0gbnVsbDtcbiAgICB9LFxuICAgIE9QX1RZUEU6IChsZWZ0LCByaWdodCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHJpZ2h0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKE9QRVJBTkRfTk9UX1NUUklORygnT1BfVFlQRScpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0eXBlb2YgbGVmdCA9PT0gcmlnaHQ7XG4gICAgfSxcbiAgICBPUF9NQVRDSDogKGxlZnQsIHJpZ2h0LCBqZXMsIHByZWZpeCkgPT4ge1xuICAgICAgICBjb25zdCByID0gbWF0Y2gobGVmdCwgcmlnaHQsIHByZWZpeCwgamVzKTtcbiAgICAgICAgcmV0dXJuIHJbMF07XG4gICAgfSxcbiAgICBPUF9NQVRDSF9BTlk6IChsZWZ0LCByaWdodCwgamVzLCBwcmVmaXgpID0+IHtcbiAgICAgICAgbGV0IGZvdW5kID0gXy5maW5kKHJpZ2h0LCBydWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBtYXRjaChsZWZ0LCBydWxlLCBwcmVmaXgsIGplcyk7XG4gICAgICAgICAgICByZXR1cm4gclswXTtcbiAgICAgICAgfSk7ICAgXG4gICAgXG4gICAgICAgIHJldHVybiBmb3VuZCA/IHRydWUgOiBmYWxzZTtcbiAgICB9ICAgIFxufTtcblxuY29uc3QgZGVmYXVsdE1hbmlwdWxhdGlvbnMgPSB7XG4gICAgLy91bmFyeVxuICAgIE9QX1NJWkU6IChsZWZ0KSA9PiBfLnNpemUobGVmdCksXG4gICAgT1BfU1VNOiAobGVmdCkgPT4gXy5yZWR1Y2UobGVmdCwgKHN1bSwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgc3VtICs9IGl0ZW07XG4gICAgICAgICAgICByZXR1cm4gc3VtO1xuICAgICAgICB9LCAwKSxcblxuICAgIE9QX0tFWVM6IChsZWZ0KSA9PiBfLmtleXMobGVmdCksXG4gICAgT1BfVkFMVUVTOiAobGVmdCkgPT4gXy52YWx1ZXMobGVmdCksICAgICBcblxuICAgIC8vYmluYXJ5XG4gICAgT1BfQUREOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgKyByaWdodCxcbiAgICBPUF9TVUI6IChsZWZ0LCByaWdodCkgPT4gbGVmdCAtIHJpZ2h0LFxuICAgIE9QX01VTDogKGxlZnQsIHJpZ2h0KSA9PiBsZWZ0ICogcmlnaHQsXG4gICAgT1BfRElWOiAobGVmdCwgcmlnaHQpID0+IGxlZnQgLyByaWdodCwgXG4gICAgT1BfUElDSzogKGxlZnQsIHJpZ2h0KSA9PiBfLnBpY2sobGVmdCwgcmlnaHQpLFxuICAgIE9QX09NSVQ6IChsZWZ0LCByaWdodCkgPT4gXy5vbWl0KGxlZnQsIHJpZ2h0KSxcbiAgICBPUF9HUk9VUDogKGxlZnQsIHJpZ2h0KSA9PiBfLmdyb3VwQnkobGVmdCwgcmlnaHQpLFxuICAgIE9QX1NPUlQ6IChsZWZ0LCByaWdodCkgPT4gXy5zb3J0QnkobGVmdCwgcmlnaHQpLFxufVxuXG5jb25zdCBmb3JtYXROYW1lID0gKG5hbWUsIHByZWZpeCkgPT4ge1xuICAgIGNvbnN0IGZ1bGxOYW1lID0gbmFtZSA9PSBudWxsID8gcHJlZml4IDogZm9ybWF0UHJlZml4KG5hbWUsIHByZWZpeCk7XG4gICAgcmV0dXJuIGZ1bGxOYW1lLmluZGV4T2YoJygnKSAhPT0gLTEgPyBgVGhlIHF1ZXJ5IFwiJHtmdWxsTmFtZX1cImAgOiBgXCIke2Z1bGxOYW1lfVwiYDtcbn07XG5jb25zdCBmb3JtYXRLZXkgPSAoa2V5LCBoYXNQcmVmaXgpID0+IF8uaXNJbnRlZ2VyKGtleSkgPyBgWyR7a2V5fV1gIDogKGhhc1ByZWZpeCA/ICcuJyArIGtleSA6IGtleSk7XG5jb25zdCBmb3JtYXRQcmVmaXggPSAoa2V5LCBwcmVmaXgpID0+IHByZWZpeCAhPSBudWxsID8gYCR7cHJlZml4fSR7Zm9ybWF0S2V5KGtleSwgdHJ1ZSl9YCA6IGZvcm1hdEtleShrZXksIGZhbHNlKTtcbmNvbnN0IGZvcm1hdFF1ZXJ5ID0gKG9wTWV0YSkgPT4gYCR7ZGVmYXVsdFF1ZXJ5RXhwbGFuYXRpb25zW29wTWV0YVswXV19KCR7b3BNZXRhWzFdID8gJycgOiAnPyd9KWA7ICBcbmNvbnN0IGZvcm1hdE1hcCA9IChuYW1lKSA9PiBgbWFwKC0+JHtuYW1lfSlgO1xuXG5jb25zdCBkZWZhdWx0SmVzRXhwbGFuYXRpb25zID0ge1xuICAgIE9QX0VRVUFMOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgJHtKU09OLnN0cmluZ2lmeShyaWdodCl9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9OT1RfRVFVQUw6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBub3QgYmUgJHtKU09OLnN0cmluZ2lmeShyaWdodCl9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9HUkVBVEVSX1RIQU46IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gJHtyaWdodH0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX0dSRUFURVJfVEhBTl9PUl9FUVVBTDogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAke3JpZ2h0fSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTEVTU19USEFOOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgbGVzcyB0aGFuICR7cmlnaHR9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9MRVNTX1RIQU5fT1JfRVFVQUw6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJHtyaWdodH0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX0lOOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgYmUgb25lIG9mICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsXG4gICAgT1BfTk9UX0lOOiAobmFtZSwgbGVmdCwgcmlnaHQsIHByZWZpeCkgPT4gYCR7Zm9ybWF0TmFtZShuYW1lLCBwcmVmaXgpfSBzaG91bGQgbm90IGJlIGFueSBvbmUgb2YgJHtKU09OLnN0cmluZ2lmeShyaWdodCl9LCBidXQgJHtKU09OLnN0cmluZ2lmeShsZWZ0KX0gZ2l2ZW4uYCxcbiAgICBPUF9FWElTVFM6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCR7cmlnaHQgPyAnIG5vdCAnOiAnICd9YmUgTlVMTC5gLCAgICBcbiAgICBPUF9NQVRDSDogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG1hdGNoICR7SlNPTi5zdHJpbmdpZnkocmlnaHQpfSwgYnV0ICR7SlNPTi5zdHJpbmdpZnkobGVmdCl9IGdpdmVuLmAsICAgIFxuICAgIE9QX01BVENIX0FOWTogKG5hbWUsIGxlZnQsIHJpZ2h0LCBwcmVmaXgpID0+IGAke2Zvcm1hdE5hbWUobmFtZSwgcHJlZml4KX0gc2hvdWxkIG1hdGNoIGFueSBvZiAke0pTT04uc3RyaW5naWZ5KHJpZ2h0KX0sIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gLFxuICAgIE9QX1RZUEU6IChuYW1lLCBsZWZ0LCByaWdodCwgcHJlZml4KSA9PiBgVGhlIHR5cGUgb2YgJHtmb3JtYXROYW1lKG5hbWUsIHByZWZpeCl9IHNob3VsZCBiZSBcIiR7cmlnaHR9XCIsIGJ1dCAke0pTT04uc3RyaW5naWZ5KGxlZnQpfSBnaXZlbi5gICAgICAgICBcbn07XG5cbmNvbnN0IGRlZmF1bHRRdWVyeUV4cGxhbmF0aW9ucyA9IHtcbiAgICAvL3VuYXJ5XG4gICAgT1BfU0laRTogJ3NpemUnLFxuICAgIE9QX1NVTTogJ3N1bScsXG4gICAgT1BfS0VZUzogJ2tleXMnLFxuICAgIE9QX1ZBTFVFUzogJ3ZhbHVlcycsICAgICBcblxuICAgIC8vYmluYXJ5XG4gICAgT1BfQUREOiAnYWRkJyxcbiAgICBPUF9TVUI6ICdzdWJ0cmFjdCcsXG4gICAgT1BfTVVMOiAnbXVsdGlwbHknLFxuICAgIE9QX0RJVjogJ2RpdmlkZScsIFxuICAgIE9QX1BJQ0s6ICdwaWNrJyxcbiAgICBPUF9PTUlUOiAnb21pdCcsXG4gICAgT1BfR1JPVVA6ICdncm91cEJ5JyxcbiAgICBPUF9TT1JUOiAnc29ydEJ5Jyxcbn07XG5cbmZ1bmN0aW9uIGdldFVubWF0Y2hlZEV4cGxhbmF0aW9uKGplcywgb3AsIG5hbWUsIGxlZnRWYWx1ZSwgcmlnaHRWYWx1ZSwgcHJlZml4KSB7XG4gICAgY29uc3QgZ2V0dGVyID0gamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zW29wXSB8fCBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfTUFUQ0g7XG4gICAgcmV0dXJuIGdldHRlcihuYW1lLCBsZWZ0VmFsdWUsIHJpZ2h0VmFsdWUsIHByZWZpeCk7ICAgIFxufVxuXG5mdW5jdGlvbiB0ZXN0KHZhbHVlLCBvcCwgb3BWYWx1ZSwgamVzLCBwcmVmaXgpIHsgXG4gICAgY29uc3QgaGFuZGxlciA9IGplcy5vcGVyYXRvckhhbmRsZXJzW29wXTtcblxuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9URVNUX0hBTkxERVIob3ApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSwgb3BWYWx1ZSwgamVzLCBwcmVmaXgpO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZSh2YWx1ZSwgb3AsIG9wVmFsdWUsIGplcywgcHJlZml4KSB7IFxuICAgIGNvbnN0IGhhbmRsZXIgPSBqZXMucXVlcnlIYW5sZGVyc1tvcF07XG5cbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfSEFORExFUihvcCkpO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVyKHZhbHVlLCBvcFZhbHVlLCBqZXMsIHByZWZpeCk7XG59XG5cbmZ1bmN0aW9uIGV2YWx1YXRlVW5hcnkodmFsdWUsIG9wLCBqZXMsIHByZWZpeCkgeyBcbiAgICBjb25zdCBoYW5kbGVyID0gamVzLnF1ZXJ5SGFubGRlcnNbb3BdO1xuXG4gICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX0hBTkRMRVIob3ApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSwgamVzLCBwcmVmaXgpO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZUJ5T3BNZXRhKGN1cnJlbnRWYWx1ZSwgcmlnaHRWYWx1ZSwgb3BNZXRhLCBwcmVmaXgsIGplcykge1xuICAgIGlmIChvcE1ldGFbMV0pIHtcbiAgICAgICAgcmV0dXJuIHJpZ2h0VmFsdWUgPyBldmFsdWF0ZVVuYXJ5KGN1cnJlbnRWYWx1ZSwgb3BNZXRhWzBdLCBqZXMsIHByZWZpeCkgOiBjdXJyZW50VmFsdWU7XG4gICAgfSBcbiAgICBcbiAgICByZXR1cm4gZXZhbHVhdGUoY3VycmVudFZhbHVlLCBvcE1ldGFbMF0sIHJpZ2h0VmFsdWUsIGplcywgcHJlZml4KTtcbn1cblxuY29uc3QgZGVmYXVsdEN1c3RvbWl6ZXIgPSB7XG4gICAgbWFwT2ZPcGVyYXRvcnM6IE1hcE9mT3BzLFxuICAgIG1hcE9mTWFuaXB1bGF0b3JzOiBNYXBPZk1hbnMsXG4gICAgb3BlcmF0b3JIYW5kbGVyczogZGVmYXVsdEplc0hhbmRsZXJzLFxuICAgIG9wZXJhdG9yRXhwbGFuYXRpb25zOiBkZWZhdWx0SmVzRXhwbGFuYXRpb25zLFxuICAgIHF1ZXJ5SGFubGRlcnM6IGRlZmF1bHRNYW5pcHVsYXRpb25zXG59O1xuXG4vKipcbiAqIFxuICogQHBhcmFtIHsqfSBhY3R1YWwgXG4gKiBAcGFyYW0geyp9IGV4cGVjdGVkIFxuICogQHBhcmFtIHsqfSBwcmVmaXggXG4gKiBAcGFyYW0geyp9IGplcyBcbiAqIFxuICogeyBrZXk6IHsgJG1hdGNoIH0gfVxuICovXG5mdW5jdGlvbiBtYXRjaChhY3R1YWwsIGV4cGVjdGVkLCBwcmVmaXgsIGplcykge1xuICAgIGplcyAhPSBudWxsIHx8IChqZXMgPSBkZWZhdWx0Q3VzdG9taXplcik7XG4gICAgbGV0IHBhc3NPYmplY3RDaGVjayA9IGZhbHNlO1xuXG4gICAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZXhwZWN0ZWQpKSB7XG4gICAgICAgIGlmICghdGVzdChhY3R1YWwsICdPUF9FUVVBTCcsIGV4cGVjdGVkLCBqZXMsIHByZWZpeCkpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgamVzLm9wZXJhdG9yRXhwbGFuYXRpb25zLk9QX0VRVUFMKG51bGwsIGFjdHVhbCwgZXhwZWN0ZWQsIHByZWZpeCkgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBdO1xuICAgICAgICB9IFxuXG4gICAgICAgIHJldHVybiBbdHJ1ZV07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgZmllbGROYW1lIGluIGV4cGVjdGVkKSB7XG4gICAgICAgIGxldCBleHBlY3RlZEZpZWxkVmFsdWUgPSBleHBlY3RlZFtmaWVsZE5hbWVdOyBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGwgPSBmaWVsZE5hbWUubGVuZ3RoO1xuXG4gICAgICAgIGlmIChsID4gMSkgeyAgICAgXG4gICAgICAgICAgICBpZiAobCA+IDQgJiYgZmllbGROYW1lWzFdID09PSAnPicgJiYgZmllbGROYW1lWzJdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRGaWVsZFZhbHVlKSAmJiBleHBlY3RlZEZpZWxkVmFsdWUubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT1RfQV9UV09fVFVQTEUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVbM10gIT09ICckJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5DT1JSRUNUX1BSRUZJWCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbWFwT3AgPSBmaWVsZE5hbWUuc3Vic3RyKDAsIDIpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUgPSBmaWVsZE5hbWUuc3Vic3RyKDMpOyBcblxuICAgICAgICAgICAgICAgIGNvbnN0IG9wTWV0YSA9IGplcy5tYXBPZk1hbmlwdWxhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wTWV0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoSU5WQUxJRF9RVUVSWV9PUEVSQVRPUihmaWVsZE5hbWUpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobWFwT3AgPT09IFBGWF9NQVBfT1ApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwUmVzdWx0ID0gXy5pc1BsYWluT2JqZWN0KGFjdHVhbCkgPyBfLm1hcFZhbHVlcyhhY3R1YWwsIChpdGVtLCBrZXkpID0+IGV2YWx1YXRlQnlPcE1ldGEoaXRlbSwgZXhwZWN0ZWRGaWVsZFZhbHVlWzBdLCBvcE1ldGEsIGZvcm1hdFByZWZpeChrZXksIHByZWZpeCksIGplcykpIDogXy5tYXAoYWN0dWFsLCAoaXRlbSwgaSkgPT4gZXZhbHVhdGVCeU9wTWV0YShpdGVtLCBleHBlY3RlZEZpZWxkVmFsdWVbMF0sIG9wTWV0YSwgZm9ybWF0UHJlZml4KGksIHByZWZpeCksIGplcykpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IG1hdGNoKG1hcFJlc3VsdCwgZXhwZWN0ZWRGaWVsZFZhbHVlWzFdLCBmb3JtYXRQcmVmaXgoZm9ybWF0TWFwKGZvcm1hdFF1ZXJ5KG9wTWV0YSkpLCBwcmVmaXgpLCBqZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGNoUmVzdWx0WzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG86IGFkZCBtb3JlIGNvbGxlY3Rpb24gb3BcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfQ09MTEVDVElPTl9PUChtYXBPcCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lWzBdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobCA+IDIgJiYgZmllbGROYW1lWzFdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cigxKTtcblxuICAgICAgICAgICAgICAgICAgICAvL3F1ZXJ5IG9wZXJhdG9yXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wTWV0YSA9IGplcy5tYXBPZk1hbmlwdWxhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1FVRVJZX09QRVJBVE9SKGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcE1ldGFbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT1RfQV9VTkFSWV9RVUVSWSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdCA9IGV2YWx1YXRlVW5hcnkoYWN0dWFsLCBvcE1ldGFbMF0sIGplcywgcHJlZml4KTsgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IG1hdGNoKHF1ZXJ5UmVzdWx0LCBleHBlY3RlZEZpZWxkVmFsdWUsIGZvcm1hdFByZWZpeChmb3JtYXRRdWVyeShvcE1ldGEpLCBwcmVmaXgpLCBqZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hSZXN1bHRbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcCA9IGplcy5tYXBPZk9wZXJhdG9ycy5nZXQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihJTlZBTElEX1RFU1RfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCF0ZXN0KGFjdHVhbCwgb3AsIGV4cGVjdGVkRmllbGRWYWx1ZSwgamVzLCBwcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFVubWF0Y2hlZEV4cGxhbmF0aW9uKGplcywgb3AsIG51bGwsIGFjdHVhbCwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBwcmVmaXgpXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICB9IFxuXG4gICAgICAgIGlmICghcGFzc09iamVjdENoZWNrKSB7XG4gICAgICAgICAgICBpZiAoYWN0dWFsID09IG51bGwpIHJldHVybiBbXG4gICAgICAgICAgICAgICAgZmFsc2UsICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGplcy5vcGVyYXRvckV4cGxhbmF0aW9ucy5PUF9FWElTVFMobnVsbCwgbnVsbCwgdHJ1ZSwgcHJlZml4KVxuICAgICAgICAgICAgXTsgXG5cbiAgICAgICAgICAgIGNvbnN0IGFjdHVhbFR5cGUgPSB0eXBlb2YgYWN0dWFsO1xuICAgIFxuICAgICAgICAgICAgaWYgKGFjdHVhbFR5cGUgIT09ICdvYmplY3QnKSByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgIGplcy5vcGVyYXRvckV4cGxhbmF0aW9ucy5PUF9UWVBFKG51bGwsIGFjdHVhbFR5cGUsICdvYmplY3QnLCBwcmVmaXgpXG4gICAgICAgICAgICBdOyAgICBcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAgICAgcGFzc09iamVjdENoZWNrID0gdHJ1ZTtcblxuICAgICAgICBsZXQgYWN0dWFsRmllbGRWYWx1ZSA9IGFjdHVhbFtmaWVsZE5hbWVdOyAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoZXhwZWN0ZWRGaWVsZFZhbHVlICE9IG51bGwgJiYgdHlwZW9mIGV4cGVjdGVkRmllbGRWYWx1ZSA9PT0gJ29iamVjdCcpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IFsgb2ssIHJlYXNvbiBdID0gbWF0Y2goYWN0dWFsRmllbGRWYWx1ZSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBmb3JtYXRQcmVmaXgoZmllbGROYW1lLCBwcmVmaXgpLCBqZXMpO1xuICAgICAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbIGZhbHNlLCByZWFzb24gXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGVzdChhY3R1YWxGaWVsZFZhbHVlLCAnT1BfRVFVQUwnLCBleHBlY3RlZEZpZWxkVmFsdWUsIGplcywgcHJlZml4KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBqZXMub3BlcmF0b3JFeHBsYW5hdGlvbnMuT1BfRVFVQUwoZmllbGROYW1lLCBhY3R1YWxGaWVsZFZhbHVlLCBleHBlY3RlZEZpZWxkVmFsdWUsIHByZWZpeClcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbdHJ1ZV07XG59XG5cbi8qKlxuICogSWYgJCBvcGVyYXRvciB1c2VkLCBvbmx5IG9uZSBhIHRpbWUgaXMgYWxsb3dlZFxuICogZS5nLlxuICoge1xuICogICAgJGdyb3VwQnk6ICdqZmllamYnXG4gKiB9XG4gKiBcbiAqIFxuICogQHBhcmFtIHsqfSBjdXJyZW50VmFsdWUgXG4gKiBAcGFyYW0geyp9IGV4cHIgXG4gKiBAcGFyYW0geyp9IHByZWZpeCBcbiAqIEBwYXJhbSB7Kn0gamVzIFxuICovXG5mdW5jdGlvbiBldmFsdWF0ZUV4cHIoY3VycmVudFZhbHVlLCBleHByLCBwcmVmaXgsIGplcykge1xuICAgIGplcyAhPSBudWxsIHx8IChqZXMgPSBkZWZhdWx0Q3VzdG9taXplcik7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShleHByKSkge1xuICAgICAgICByZXR1cm4gZXhwci5yZWR1Y2UoKHJlc3VsdCwgZXhwckl0ZW0pID0+IGV2YWx1YXRlRXhwcihyZXN1bHQsIGV4cHJJdGVtLCBwcmVmaXgsIGplcyksIGN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBleHByID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGV4cHIpO1xuICAgICAgICBpZiAoIW9wTWV0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZXhwcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcE1ldGFbMV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihSRVFVSVJFX1JJR0hUX09QRVJBTkQoZXhwcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlVW5hcnkoY3VycmVudFZhbHVlLCBvcE1ldGFbMF0sIGplcywgcHJlZml4KTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0LCBoYXNPcGVyYXRvciA9IGZhbHNlOyAgICBcblxuICAgIGZvciAobGV0IGZpZWxkTmFtZSBpbiBleHByKSB7XG4gICAgICAgIGxldCBleHBlY3RlZEZpZWxkVmFsdWUgPSBleHByW2ZpZWxkTmFtZV07ICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGwgPSBmaWVsZE5hbWUubGVuZ3RoO1xuXG4gICAgICAgIGlmIChsID4gMSkgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZVswXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoT1BFUkFUT1JfTk9UX0FMT05FKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZXZhbHVhdGVCeU9wTWV0YShjdXJyZW50VmFsdWUsIGV4cGVjdGVkRmllbGRWYWx1ZSwgb3BNZXRhLCBwcmVmaXgsIGplcyk7XG4gICAgICAgICAgICAgICAgaGFzT3BlcmF0b3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobCA+IDMgJiYgZmllbGROYW1lWzFdID09PSAnPicgJiYgZmllbGROYW1lWzJdID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihPUEVSQVRPUl9OT1RfQUxPTkUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcE9wID0gZmllbGROYW1lLnN1YnN0cigwLCAyKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cigyKTsgXG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcE1ldGEgPSBqZXMubWFwT2ZNYW5pcHVsYXRvcnMuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFvcE1ldGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfUVVFUllfT1BFUkFUT1IoZmllbGROYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1hcE9wID09PSBQRlhfTUFQX09QKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF8ubWFwKGN1cnJlbnRWYWx1ZSwgKGl0ZW0sIGkpID0+IGV2YWx1YXRlQnlPcE1ldGEoaXRlbSwgZXhwZWN0ZWRGaWVsZFZhbHVlLCBvcE1ldGEsIGZvcm1hdFByZWZpeChpLCBwcmVmaXgpLCBqZXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL3RvZG86IGFkZCBtb3JlIGNvbGxlY3Rpb24gb3BcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKElOVkFMSURfQ09MTEVDVElPTl9PUChtYXBPcCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGhhc09wZXJhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBcblxuICAgICAgICBpZiAoaGFzT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihPUEVSQVRPUl9OT1RfQUxPTkUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9waWNrIGEgZmllbGQgYW5kIHRoZW4gYXBwbHkgbWFuaXB1bGF0aW9uXG4gICAgICAgIGxldCBhY3R1YWxGaWVsZFZhbHVlID0gY3VycmVudFZhbHVlICE9IG51bGwgPyBjdXJyZW50VmFsdWVbZmllbGROYW1lXSA6IHVuZGVmaW5lZDsgICAgIFxuXG4gICAgICAgIGNvbnN0IGNoaWxkRmllbGRWYWx1ZSA9IGV2YWx1YXRlRXhwcihhY3R1YWxGaWVsZFZhbHVlLCBleHBlY3RlZEZpZWxkVmFsdWUsIGZvcm1hdFByZWZpeChmaWVsZE5hbWUsIHByZWZpeCksIGplcyk7XG4gICAgICAgIGlmICh0eXBlb2YgY2hpbGRGaWVsZFZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBbZmllbGROYW1lXTogY2hpbGRGaWVsZFZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9ICAgICAgICBcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmNsYXNzIEpFUyB7XG4gICAgY29uc3RydWN0b3IodmFsdWUsIGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmN1c3RvbWl6ZXIgPSBjdXN0b21pemVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Kn0gZXhwZWN0ZWQgXG4gICAgICogQHBhcmFtICB7Li4uYW55fSBhcmdzIFxuICAgICAqL1xuICAgIG1hdGNoKGV4cGVjdGVkKSB7ICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbWF0Y2godGhpcy52YWx1ZSwgZXhwZWN0ZWQsIHVuZGVmaW5lZCwgdGhpcy5jdXN0b21pemVyKTtcbiAgICAgICAgaWYgKHJlc3VsdFswXSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihyZXN1bHRbMV0sIHtcbiAgICAgICAgICAgIGFjdHVhbDogdGhpcy52YWx1ZSxcbiAgICAgICAgICAgIGV4cGVjdGVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGV2YWx1YXRlKGV4cHIpIHtcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlRXhwcih0aGlzLnZhbHVlLCBleHByLCB1bmRlZmluZWQsIHRoaXMuY3VzdG9taXplcik7XG4gICAgfVxuXG4gICAgdXBkYXRlKGV4cHIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBldmFsdWF0ZUV4cHIodGhpcy52YWx1ZSwgZXhwciwgdW5kZWZpbmVkLCB0aGlzLmN1c3RvbWl6ZXIpO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuSkVTLm1hdGNoID0gbWF0Y2g7XG5KRVMuZXZhbHVhdGUgPSBldmFsdWF0ZUV4cHI7XG5KRVMuZGVmYXVsdEN1c3RvbWl6ZXIgPSBkZWZhdWx0Q3VzdG9taXplcjtcblxubW9kdWxlLmV4cG9ydHMgPSBKRVM7Il19