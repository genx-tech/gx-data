"use strict";require("source-map-support/register");const path=require("path");const{fs,Promise}=require("rk-utils");const{tryRequire}=require("./lib");module.exports=async(url,targetFile)=>{const request=tryRequire("superagent");const dirName=path.dirname(targetFile);await fs.ensureDir(dirName);const stream=fs.createWriteStream(targetFile);await new Promise((resolve,reject)=>{stream.on("close",()=>{resolve()});stream.on("error",err=>{reject(err)});request.get(url).pipe(stream)})};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9kb3dubG9hZC5qcyJdLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImZzIiwiUHJvbWlzZSIsInRyeVJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwidXJsIiwidGFyZ2V0RmlsZSIsInJlcXVlc3QiLCJkaXJOYW1lIiwiZGlybmFtZSIsImVuc3VyZURpciIsInN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uIiwiZXJyIiwiZ2V0IiwicGlwZSJdLCJtYXBwaW5ncyI6Im9EQUFBLEtBQU1BLENBQUFBLElBQUksQ0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FDQSxLQUFNLENBQUVDLEVBQUYsQ0FBTUMsT0FBTixFQUFrQkYsT0FBTyxDQUFDLFVBQUQsQ0FBL0IsQ0FDQSxLQUFNLENBQUVHLFVBQUYsRUFBaUJILE9BQU8sQ0FBQyxPQUFELENBQTlCLENBRUFJLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixNQUFPQyxHQUFQLENBQVlDLFVBQVosR0FBMkIsQ0FDeEMsS0FBTUMsQ0FBQUEsT0FBTyxDQUFHTCxVQUFVLENBQUMsWUFBRCxDQUExQixDQUVBLEtBQU1NLENBQUFBLE9BQU8sQ0FBR1YsSUFBSSxDQUFDVyxPQUFMLENBQWFILFVBQWIsQ0FBaEIsQ0FFQSxLQUFNTixDQUFBQSxFQUFFLENBQUNVLFNBQUgsQ0FBYUYsT0FBYixDQUFOLENBRUEsS0FBTUcsQ0FBQUEsTUFBTSxDQUFHWCxFQUFFLENBQUNZLGlCQUFILENBQXFCTixVQUFyQixDQUFmLENBRUEsS0FBTSxJQUFJTCxDQUFBQSxPQUFKLENBQVksQ0FBQ1ksT0FBRCxDQUFVQyxNQUFWLEdBQXFCLENBQ25DSCxNQUFNLENBQUNJLEVBQVAsQ0FBVSxPQUFWLENBQW1CLElBQU0sQ0FDckJGLE9BQU8sRUFDVixDQUZELEVBSUFGLE1BQU0sQ0FBQ0ksRUFBUCxDQUFVLE9BQVYsQ0FBb0JDLEdBQUQsRUFBUyxDQUN4QkYsTUFBTSxDQUFDRSxHQUFELENBQ1QsQ0FGRCxFQUlBVCxPQUFPLENBQUNVLEdBQVIsQ0FBWVosR0FBWixFQUFpQmEsSUFBakIsQ0FBc0JQLE1BQXRCLENBQ0gsQ0FWSyxDQVdULENBcEJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHsgZnMsIFByb21pc2UgfSA9IHJlcXVpcmUoJ3JrLXV0aWxzJyk7XG5jb25zdCB7IHRyeVJlcXVpcmUgfSA9IHJlcXVpcmUoJy4vbGliJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHVybCwgdGFyZ2V0RmlsZSkgPT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0cnlSZXF1aXJlKCdzdXBlcmFnZW50Jyk7XG5cbiAgICBjb25zdCBkaXJOYW1lID0gcGF0aC5kaXJuYW1lKHRhcmdldEZpbGUpO1xuXG4gICAgYXdhaXQgZnMuZW5zdXJlRGlyKGRpck5hbWUpO1xuXG4gICAgY29uc3Qgc3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0odGFyZ2V0RmlsZSk7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHN0cmVhbS5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0cmVhbS5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVxdWVzdC5nZXQodXJsKS5waXBlKHN0cmVhbSk7ICAgIFxuICAgIH0pO1xufTtcbiAgICAiXX0=