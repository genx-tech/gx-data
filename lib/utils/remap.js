"use strict";

require("source-map-support/register");

const {
  InvalidArgument
} = require("@genx/error");

function remap(object, mapping, keepUnmapped) {
  if (typeof mapping !== "object") throw new InvalidArgument('"mapping" should be a key-value object.');
  let newObj = {};
  Object.entries(object).map(([k, v]) => {
    if (k in mapping) {
      let nk = mapping[k];

      if (Array.isArray(nk)) {
        newObj[nk[0]] = { ...newObj[nk[0]],
          ...remap(v, nk[1], keepUnmapped)
        };
      } else {
        newObj[nk] = v;
      }
    } else {
      if (keepUnmapped) {
        newObj[k] = v;
      }
    }
  });
  return newObj;
}

module.exports = remap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9yZW1hcC5qcyJdLCJuYW1lcyI6WyJJbnZhbGlkQXJndW1lbnQiLCJyZXF1aXJlIiwicmVtYXAiLCJvYmplY3QiLCJtYXBwaW5nIiwia2VlcFVubWFwcGVkIiwibmV3T2JqIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImsiLCJ2IiwibmsiLCJBcnJheSIsImlzQXJyYXkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQXNCQyxPQUFPLENBQUMsYUFBRCxDQUFuQzs7QUFRQSxTQUFTQyxLQUFULENBQWVDLE1BQWYsRUFBdUJDLE9BQXZCLEVBQWdDQyxZQUFoQyxFQUE4QztBQUMxQyxNQUFJLE9BQU9ELE9BQVAsS0FBbUIsUUFBdkIsRUFBaUMsTUFBTSxJQUFJSixlQUFKLENBQW9CLHlDQUFwQixDQUFOO0FBRWpDLE1BQUlNLE1BQU0sR0FBRyxFQUFiO0FBQ0FDLEVBQUFBLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlTCxNQUFmLEVBQXVCTSxHQUF2QixDQUEyQixDQUFDLENBQUNDLENBQUQsRUFBSUMsQ0FBSixDQUFELEtBQVk7QUFDbkMsUUFBSUQsQ0FBQyxJQUFJTixPQUFULEVBQWtCO0FBQ2QsVUFBSVEsRUFBRSxHQUFHUixPQUFPLENBQUNNLENBQUQsQ0FBaEI7O0FBQ0EsVUFBSUcsS0FBSyxDQUFDQyxPQUFOLENBQWNGLEVBQWQsQ0FBSixFQUF1QjtBQUNuQk4sUUFBQUEsTUFBTSxDQUFDTSxFQUFFLENBQUMsQ0FBRCxDQUFILENBQU4sR0FBZ0IsRUFBRSxHQUFHTixNQUFNLENBQUNNLEVBQUUsQ0FBQyxDQUFELENBQUgsQ0FBWDtBQUFvQixhQUFHVixLQUFLLENBQUNTLENBQUQsRUFBSUMsRUFBRSxDQUFDLENBQUQsQ0FBTixFQUFXUCxZQUFYO0FBQTVCLFNBQWhCO0FBQ0gsT0FGRCxNQUVPO0FBQ0hDLFFBQUFBLE1BQU0sQ0FBQ00sRUFBRCxDQUFOLEdBQWFELENBQWI7QUFDSDtBQUNKLEtBUEQsTUFPTztBQUNILFVBQUlOLFlBQUosRUFBa0I7QUFDZEMsUUFBQUEsTUFBTSxDQUFDSSxDQUFELENBQU4sR0FBWUMsQ0FBWjtBQUNIO0FBQ0o7QUFDSixHQWJEO0FBZUEsU0FBT0wsTUFBUDtBQUNIOztBQUVEUyxNQUFNLENBQUNDLE9BQVAsR0FBaUJkLEtBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBJbnZhbGlkQXJndW1lbnQgfSA9IHJlcXVpcmUoXCJAZ2VueC9lcnJvclwiKTtcblxuLyoqXG4gKiBSZW1hcCB0aGUga2V5cyBvZiBvYmplY3QgZWxlbWVudHMgaW4gYW4gYXJyYXksIGxpa2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7Kn0gb2JqZWN0XG4gKiBAcGFyYW0geyp9IG1hcHBpbmcgLSBrZXkgdG8gbmV3S2V5IG9yIGtleSB0byBhcnJheVsgbmV3S2V5LCB2YWx1ZU1hcCBdIGZvciBuZXh0IGxldmVsIG1hcHBpbmdcbiAqIEBwYXJhbSB7Ym9vbGVhbn0ga2VlcFVubWFwcGVkIC0gSWYgdHJ1ZSwgd2lsbCBrZWVwIHRob3NlIG5vdCBpbiBtYXBwaW5nIGFzIGl0cyBvcmlnaW5hbCBrZXksIG90aGVyd2lzZSBmaWx0ZXIgb3V0XG4gKi9cbmZ1bmN0aW9uIHJlbWFwKG9iamVjdCwgbWFwcGluZywga2VlcFVubWFwcGVkKSB7XG4gICAgaWYgKHR5cGVvZiBtYXBwaW5nICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50KCdcIm1hcHBpbmdcIiBzaG91bGQgYmUgYSBrZXktdmFsdWUgb2JqZWN0LicpO1xuXG4gICAgbGV0IG5ld09iaiA9IHt9O1xuICAgIE9iamVjdC5lbnRyaWVzKG9iamVjdCkubWFwKChbaywgdl0pID0+IHtcbiAgICAgICAgaWYgKGsgaW4gbWFwcGluZykge1xuICAgICAgICAgICAgbGV0IG5rID0gbWFwcGluZ1trXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5rKSkge1xuICAgICAgICAgICAgICAgIG5ld09ialtua1swXV0gPSB7IC4uLm5ld09ialtua1swXV0sIC4uLnJlbWFwKHYsIG5rWzFdLCBrZWVwVW5tYXBwZWQpIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld09ialtua10gPSB2O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGtlZXBVbm1hcHBlZCkge1xuICAgICAgICAgICAgICAgIG5ld09ialtrXSA9IHY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBuZXdPYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVtYXA7XG4iXX0=