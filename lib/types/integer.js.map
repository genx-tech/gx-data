{"version":3,"file":"integer.js","names":["Convertors","require","ValidationError","any","module","exports","name","alias","sanitize","value","info","i18n","field","raw","toInt","isNaN","max","feild","min","defaultValue","generate","serialize","qualifiers","concat"],"sources":["../../src/types/integer.js"],"sourcesContent":["const Convertors = require('../Convertors');\nconst { ValidationError } = require('../utils/Errors');\nconst any = require('./any');\n\nmodule.exports = {\n    name: 'integer',\n\n    alias: ['int'],\n\n    sanitize: (value, info, i18n, field) => {\n        if (value == null) return null;\n\n        const raw = value;\n        value = Convertors.toInt(value);\n        if (isNaN(value)) {\n            throw new ValidationError('Invalid integer value', {\n                value: raw,\n                field: info,\n            });\n        }\n\n        if (info && ('max' in info) && (value > info.max)) {\n            throw new ValidationError(\n                `The field \"${field || ''}\" value should smaller than ${info.max}`,\n                { value, feild: info }\n            );\n        }\n\n        if (info && ('min' in info) && (value < info.min)) {\n            throw new ValidationError(\n                `The field \"${field || ''}\" value should bigger than ${info.min}`,\n                { value, feild: info }\n            );\n        }\n\n        return value;\n    },\n\n    defaultValue: 0,\n\n    generate: (info, i18n) => 0,\n\n    serialize: (value) => value,\n\n    qualifiers: any.qualifiers.concat(['bytes', 'digits', 'unsigned']),\n};\n"],"mappings":";;;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,eAAe,CAAC;AAC3C,MAAM;EAAEC;AAAgB,CAAC,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AACtD,MAAME,GAAG,GAAGF,OAAO,CAAC,OAAO,CAAC;AAE5BG,MAAM,CAACC,OAAO,GAAG;EACbC,IAAI,EAAE,SAAS;EAEfC,KAAK,EAAE,CAAC,KAAK,CAAC;EAEdC,QAAQ,EAAEA,CAACC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,KAAK,KAAK;IACpC,IAAIH,KAAK,IAAI,IAAI,EAAE,OAAO,IAAI;IAE9B,MAAMI,GAAG,GAAGJ,KAAK;IACjBA,KAAK,GAAGT,UAAU,CAACc,KAAK,CAACL,KAAK,CAAC;IAC/B,IAAIM,KAAK,CAACN,KAAK,CAAC,EAAE;MACd,MAAM,IAAIP,eAAe,CAAC,uBAAuB,EAAE;QAC/CO,KAAK,EAAEI,GAAG;QACVD,KAAK,EAAEF;MACX,CAAC,CAAC;IACN;IAEA,IAAIA,IAAI,IAAK,KAAK,IAAIA,IAAK,IAAKD,KAAK,GAAGC,IAAI,CAACM,GAAI,EAAE;MAC/C,MAAM,IAAId,eAAe,CACpB,cAAaU,KAAK,IAAI,EAAG,+BAA8BF,IAAI,CAACM,GAAI,EAAC,EAClE;QAAEP,KAAK;QAAEQ,KAAK,EAAEP;MAAK,CAAC,CACzB;IACL;IAEA,IAAIA,IAAI,IAAK,KAAK,IAAIA,IAAK,IAAKD,KAAK,GAAGC,IAAI,CAACQ,GAAI,EAAE;MAC/C,MAAM,IAAIhB,eAAe,CACpB,cAAaU,KAAK,IAAI,EAAG,8BAA6BF,IAAI,CAACQ,GAAI,EAAC,EACjE;QAAET,KAAK;QAAEQ,KAAK,EAAEP;MAAK,CAAC,CACzB;IACL;IAEA,OAAOD,KAAK;EAChB,CAAC;EAEDU,YAAY,EAAE,CAAC;EAEfC,QAAQ,EAAEA,CAACV,IAAI,EAAEC,IAAI,KAAK,CAAC;EAE3BU,SAAS,EAAGZ,KAAK,IAAKA,KAAK;EAE3Ba,UAAU,EAAEnB,GAAG,CAACmB,UAAU,CAACC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,CAAC;AACrE,CAAC"}