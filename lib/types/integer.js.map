{"version":3,"sources":["../../src/types/integer.js"],"names":["Convertors","require","ValidationError","any","module","exports","name","alias","sanitize","value","info","i18n","field","raw","toInt","isNaN","max","feild","min","defaultValue","generate","serialize","qualifiers","concat"],"mappings":";;;;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,eAAD,CAA1B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAsBD,OAAO,CAAC,iBAAD,CAAnC;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,OAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,IAAI,EAAE,SADO;AAGbC,EAAAA,KAAK,EAAE,CAAC,KAAD,CAHM;AAKbC,EAAAA,QAAQ,EAAE,CAACC,KAAD,EAAQC,IAAR,EAAcC,IAAd,EAAoBC,KAApB,KAA8B;AACpC,QAAIH,KAAK,IAAI,IAAb,EAAmB,OAAO,IAAP;AAEnB,UAAMI,GAAG,GAAGJ,KAAZ;AACAA,IAAAA,KAAK,GAAGT,UAAU,CAACc,KAAX,CAAiBL,KAAjB,CAAR;;AACA,QAAIM,KAAK,CAACN,KAAD,CAAT,EAAkB;AACd,YAAM,IAAIP,eAAJ,CAAoB,uBAApB,EAA6C;AAC/CO,QAAAA,KAAK,EAAEI,GADwC;AAE/CD,QAAAA,KAAK,EAAEF;AAFwC,OAA7C,CAAN;AAIH;;AAED,QAAIA,IAAI,IAAK,SAASA,IAAlB,IAA4BD,KAAK,GAAGC,IAAI,CAACM,GAA7C,EAAmD;AAC/C,YAAM,IAAId,eAAJ,CACD,cAAaU,KAAK,IAAI,EAAG,+BAA8BF,IAAI,CAACM,GAAI,EAD/D,EAEF;AAAEP,QAAAA,KAAF;AAASQ,QAAAA,KAAK,EAAEP;AAAhB,OAFE,CAAN;AAIH;;AAED,QAAIA,IAAI,IAAK,SAASA,IAAlB,IAA4BD,KAAK,GAAGC,IAAI,CAACQ,GAA7C,EAAmD;AAC/C,YAAM,IAAIhB,eAAJ,CACD,cAAaU,KAAK,IAAI,EAAG,8BAA6BF,IAAI,CAACQ,GAAI,EAD9D,EAEF;AAAET,QAAAA,KAAF;AAASQ,QAAAA,KAAK,EAAEP;AAAhB,OAFE,CAAN;AAIH;;AAED,WAAOD,KAAP;AACH,GAhCY;AAkCbU,EAAAA,YAAY,EAAE,CAlCD;AAoCbC,EAAAA,QAAQ,EAAE,CAACV,IAAD,EAAOC,IAAP,KAAgB,CApCb;AAsCbU,EAAAA,SAAS,EAAGZ,KAAD,IAAWA,KAtCT;AAwCba,EAAAA,UAAU,EAAEnB,GAAG,CAACmB,UAAJ,CAAeC,MAAf,CAAsB,CAAC,OAAD,EAAU,QAAV,EAAoB,UAApB,CAAtB;AAxCC,CAAjB","sourcesContent":["const Convertors = require('../Convertors');\nconst { ValidationError } = require('../utils/Errors');\nconst any = require('./any');\n\nmodule.exports = {\n    name: 'integer',\n\n    alias: ['int'],\n\n    sanitize: (value, info, i18n, field) => {\n        if (value == null) return null;\n\n        const raw = value;\n        value = Convertors.toInt(value);\n        if (isNaN(value)) {\n            throw new ValidationError('Invalid integer value', {\n                value: raw,\n                field: info,\n            });\n        }\n\n        if (info && ('max' in info) && (value > info.max)) {\n            throw new ValidationError(\n                `The field \"${field || ''}\" value should smaller than ${info.max}`,\n                { value, feild: info }\n            );\n        }\n\n        if (info && ('min' in info) && (value < info.min)) {\n            throw new ValidationError(\n                `The field \"${field || ''}\" value should bigger than ${info.min}`,\n                { value, feild: info }\n            );\n        }\n\n        return value;\n    },\n\n    defaultValue: 0,\n\n    generate: (info, i18n) => 0,\n\n    serialize: (value) => value,\n\n    qualifiers: any.qualifiers.concat(['bytes', 'digits', 'unsigned']),\n};\n"],"file":"integer.js"}