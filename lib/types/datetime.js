"use strict";require("source-map-support/register");const _=require("rk-utils")._;const{DateTime}=require("luxon");const any=require("./any");module.exports={name:"datetime",typeObject:DateTime,alias:["date","time","timestamp"],sanitize:(value,info,i18n)=>{if(value instanceof Date){return i18n?i18n.datetime.fromJSDate(value):DateTime.fromJSDate(value)}if(value instanceof DateTime){return value}if(typeof value==="string"){return i18n?i18n.datetime.fromISO(value):DateTime.fromISO(value,{setZone:true})}if(typeof value==="number"){return i18n?i18n.datetime.fromMillis(value):DateTime.fromMillis(value)}if(_.isPlainObject(value)){return i18n?i18n.datetime.fromObject(value):DateTime.fromObject(value)}throw new TypeError(`Invalid datetime: ${value}`)},defaultValue:0,generate:(info,i18n)=>i18n?i18n.now():DateTime.local(),serialize:value=>value.toISO({includeOffset:false}),qualifiers:any.qualifiers.concat(["timezone","dateOnly","timeOnly"])};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90eXBlcy9kYXRldGltZS5qcyJdLCJuYW1lcyI6WyJfIiwicmVxdWlyZSIsIkRhdGVUaW1lIiwiYW55IiwibW9kdWxlIiwiZXhwb3J0cyIsIm5hbWUiLCJ0eXBlT2JqZWN0IiwiYWxpYXMiLCJzYW5pdGl6ZSIsInZhbHVlIiwiaW5mbyIsImkxOG4iLCJEYXRlIiwiZGF0ZXRpbWUiLCJmcm9tSlNEYXRlIiwiZnJvbUlTTyIsInNldFpvbmUiLCJmcm9tTWlsbGlzIiwiaXNQbGFpbk9iamVjdCIsImZyb21PYmplY3QiLCJUeXBlRXJyb3IiLCJkZWZhdWx0VmFsdWUiLCJnZW5lcmF0ZSIsIm5vdyIsImxvY2FsIiwic2VyaWFsaXplIiwidG9JU08iLCJpbmNsdWRlT2Zmc2V0IiwicXVhbGlmaWVycyIsImNvbmNhdCJdLCJtYXBwaW5ncyI6IkFBQUEsYSx1Q0FFQSxLQUFNQSxDQUFBQSxDQUFDLENBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JELENBQTlCLENBQ0EsS0FBTSxDQUFFRSxRQUFGLEVBQWVELE9BQU8sQ0FBQyxPQUFELENBQTVCLENBQ0EsS0FBTUUsQ0FBQUEsR0FBRyxDQUFHRixPQUFPLENBQUMsT0FBRCxDQUFuQixDQUVBRyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FDYkMsSUFBSSxDQUFFLFVBRE8sQ0FHYkMsVUFBVSxDQUFFTCxRQUhDLENBS2JNLEtBQUssQ0FBRSxDQUFFLE1BQUYsQ0FBVSxNQUFWLENBQWtCLFdBQWxCLENBTE0sQ0FPYkMsUUFBUSxDQUFFLENBQUNDLEtBQUQsQ0FBUUMsSUFBUixDQUFjQyxJQUFkLEdBQXVCLENBQzdCLEdBQUlGLEtBQUssV0FBWUcsQ0FBQUEsSUFBckIsQ0FBMkIsQ0FDdkIsTUFBT0QsQ0FBQUEsSUFBSSxDQUFHQSxJQUFJLENBQUNFLFFBQUwsQ0FBY0MsVUFBZCxDQUF5QkwsS0FBekIsQ0FBSCxDQUFxQ1IsUUFBUSxDQUFDYSxVQUFULENBQW9CTCxLQUFwQixDQUNuRCxDQUVELEdBQUlBLEtBQUssV0FBWVIsQ0FBQUEsUUFBckIsQ0FBK0IsQ0FDM0IsTUFBT1EsQ0FBQUEsS0FDVixDQUVELEdBQUksTUFBT0EsQ0FBQUEsS0FBUCxHQUFpQixRQUFyQixDQUErQixDQUMzQixNQUFPRSxDQUFBQSxJQUFJLENBQUdBLElBQUksQ0FBQ0UsUUFBTCxDQUFjRSxPQUFkLENBQXNCTixLQUF0QixDQUFILENBQWtDUixRQUFRLENBQUNjLE9BQVQsQ0FBaUJOLEtBQWpCLENBQXdCLENBQUNPLE9BQU8sQ0FBRSxJQUFWLENBQXhCLENBQ2hELENBRUQsR0FBSSxNQUFPUCxDQUFBQSxLQUFQLEdBQWlCLFFBQXJCLENBQStCLENBQzNCLE1BQU9FLENBQUFBLElBQUksQ0FBR0EsSUFBSSxDQUFDRSxRQUFMLENBQWNJLFVBQWQsQ0FBeUJSLEtBQXpCLENBQUgsQ0FBcUNSLFFBQVEsQ0FBQ2dCLFVBQVQsQ0FBb0JSLEtBQXBCLENBQ25ELENBRUQsR0FBSVYsQ0FBQyxDQUFDbUIsYUFBRixDQUFnQlQsS0FBaEIsQ0FBSixDQUE0QixDQUN4QixNQUFPRSxDQUFBQSxJQUFJLENBQUdBLElBQUksQ0FBQ0UsUUFBTCxDQUFjTSxVQUFkLENBQXlCVixLQUF6QixDQUFILENBQXFDUixRQUFRLENBQUNrQixVQUFULENBQW9CVixLQUFwQixDQUNuRCxDQUVELEtBQU0sSUFBSVcsQ0FBQUEsU0FBSixDQUFlLHFCQUFvQlgsS0FBTSxFQUF6QyxDQUNULENBN0JZLENBK0JiWSxZQUFZLENBQUUsQ0EvQkQsQ0FpQ2JDLFFBQVEsQ0FBRSxDQUFDWixJQUFELENBQU9DLElBQVAsR0FBZ0JBLElBQUksQ0FBR0EsSUFBSSxDQUFDWSxHQUFMLEVBQUgsQ0FBZ0J0QixRQUFRLENBQUN1QixLQUFULEVBakNqQyxDQW1DYkMsU0FBUyxDQUFFaEIsS0FBSyxFQUFJQSxLQUFLLENBQUNpQixLQUFOLENBQVksQ0FBRUMsYUFBYSxDQUFFLEtBQWpCLENBQVosQ0FuQ1AsQ0FxQ2JDLFVBQVUsQ0FBRTFCLEdBQUcsQ0FBQzBCLFVBQUosQ0FBZUMsTUFBZixDQUFzQixDQUM5QixVQUQ4QixDQUU5QixVQUY4QixDQUc5QixVQUg4QixDQUF0QixDQXJDQyxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBfID0gcmVxdWlyZSgncmstdXRpbHMnKS5fO1xuY29uc3QgeyBEYXRlVGltZSB9ID0gcmVxdWlyZSgnbHV4b24nKTtcbmNvbnN0IGFueSA9IHJlcXVpcmUoJy4vYW55Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIG5hbWU6ICdkYXRldGltZScsXG5cbiAgICB0eXBlT2JqZWN0OiBEYXRlVGltZSxcblxuICAgIGFsaWFzOiBbICdkYXRlJywgJ3RpbWUnLCAndGltZXN0YW1wJyBdLFxuXG4gICAgc2FuaXRpemU6ICh2YWx1ZSwgaW5mbywgaTE4bikgPT4ge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gaTE4biA/IGkxOG4uZGF0ZXRpbWUuZnJvbUpTRGF0ZSh2YWx1ZSkgOiBEYXRlVGltZS5mcm9tSlNEYXRlKHZhbHVlKTtcbiAgICAgICAgfSBcblxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlVGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGkxOG4gPyBpMThuLmRhdGV0aW1lLmZyb21JU08odmFsdWUpIDogRGF0ZVRpbWUuZnJvbUlTTyh2YWx1ZSwge3NldFpvbmU6IHRydWV9KTtcbiAgICAgICAgfSBcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gaTE4biA/IGkxOG4uZGF0ZXRpbWUuZnJvbU1pbGxpcyh2YWx1ZSkgOiBEYXRlVGltZS5mcm9tTWlsbGlzKHZhbHVlKTtcbiAgICAgICAgfSBcbiAgICAgICAgXG4gICAgICAgIGlmIChfLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTE4biA/IGkxOG4uZGF0ZXRpbWUuZnJvbU9iamVjdCh2YWx1ZSkgOiBEYXRlVGltZS5mcm9tT2JqZWN0KHZhbHVlKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGRhdGV0aW1lOiAke3ZhbHVlfWApO1xuICAgIH0sXG5cbiAgICBkZWZhdWx0VmFsdWU6IDAsXG5cbiAgICBnZW5lcmF0ZTogKGluZm8sIGkxOG4pID0+IGkxOG4gPyBpMThuLm5vdygpIDogRGF0ZVRpbWUubG9jYWwoKSxcblxuICAgIHNlcmlhbGl6ZTogdmFsdWUgPT4gdmFsdWUudG9JU08oeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSxcblxuICAgIHF1YWxpZmllcnM6IGFueS5xdWFsaWZpZXJzLmNvbmNhdChbXG4gICAgICAgICd0aW1lem9uZScsXG4gICAgICAgICdkYXRlT25seScsXG4gICAgICAgICd0aW1lT25seSdcbiAgICBdKVxufTsiXX0=