"use strict";

require("source-map-support/register");

const Types = require('../types');

function auto(info, i18n) {
  if (!Types.Builtin.has(info.type)) {
    throw new Error(`Unknown primitive type: "${info.type}"."`);
  }

  if (!info.auto) {
    throw new Error(`Not an automatically generated field "${info.name}".`);
  }

  if (info.generator) {
    let name, options;

    if (typeof info.generator === 'string') {
      name = info.generator;
    } else if (Array.isArray(info.generator)) {
      if (!(info.generator.length > 0)) {
        throw new Error("Function \"auto\" assertion failed: info.generator.length > 0");
      }

      name = info.generator[0];

      if (info.generator.length > 1) {
        options = info.generator[1];
      }
    } else {
      name = info.generator.name;
      options = info.generator.options;
    }

    const G = require('../Generators');

    let gtor = G[name];
    return gtor(info, i18n, options);
  }

  let typeObjerct = Types[info.type];
  return typeObjerct.generate(info, i18n);
}

;
module.exports = auto;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hdXRvL2RlZmF1bHQuanMiXSwibmFtZXMiOlsiVHlwZXMiLCJyZXF1aXJlIiwiYXV0byIsImluZm8iLCJpMThuIiwiQnVpbHRpbiIsImhhcyIsInR5cGUiLCJuYW1lIiwiZ2VuZXJhdG9yIiwib3B0aW9ucyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIkciLCJndG9yIiwidHlwZU9iamVyY3QiLCJnZW5lcmF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFyQjs7QUFFQSxTQUFTQyxJQUFULENBQWNDLElBQWQsRUFBb0JDLElBQXBCLEVBQTBCO0FBQUEsT0FFbEJKLEtBQUssQ0FBQ0ssT0FBTixDQUFjQyxHQUFkLENBQWtCSCxJQUFJLENBQUNJLElBQXZCLENBRmtCO0FBQUEsb0JBRWEsNEJBQTJCSixJQUFJLENBQUNJLElBQUssS0FGbEQ7QUFBQTs7QUFBQSxPQUdsQkosSUFBSSxDQUFDRCxJQUhhO0FBQUEsb0JBR04seUNBQXlDQyxJQUFJLENBQUNLLElBQU0sSUFIOUM7QUFBQTs7QUFNdEIsTUFBSUwsSUFBSSxDQUFDTSxTQUFULEVBQW9CO0FBQ2hCLFFBQUlELElBQUosRUFBVUUsT0FBVjs7QUFHQSxRQUFJLE9BQU9QLElBQUksQ0FBQ00sU0FBWixLQUEwQixRQUE5QixFQUF3QztBQUNwQ0QsTUFBQUEsSUFBSSxHQUFHTCxJQUFJLENBQUNNLFNBQVo7QUFDSCxLQUZELE1BRU8sSUFBSUUsS0FBSyxDQUFDQyxPQUFOLENBQWNULElBQUksQ0FBQ00sU0FBbkIsQ0FBSixFQUFtQztBQUFBLFlBQzlCTixJQUFJLENBQUNNLFNBQUwsQ0FBZUksTUFBZixHQUF3QixDQURNO0FBQUE7QUFBQTs7QUFFdENMLE1BQUFBLElBQUksR0FBR0wsSUFBSSxDQUFDTSxTQUFMLENBQWUsQ0FBZixDQUFQOztBQUVBLFVBQUlOLElBQUksQ0FBQ00sU0FBTCxDQUFlSSxNQUFmLEdBQXdCLENBQTVCLEVBQStCO0FBQzNCSCxRQUFBQSxPQUFPLEdBQUdQLElBQUksQ0FBQ00sU0FBTCxDQUFlLENBQWYsQ0FBVjtBQUNIO0FBQ0osS0FQTSxNQU9BO0FBQ0hELE1BQUFBLElBQUksR0FBR0wsSUFBSSxDQUFDTSxTQUFMLENBQWVELElBQXRCO0FBQ0FFLE1BQUFBLE9BQU8sR0FBR1AsSUFBSSxDQUFDTSxTQUFMLENBQWVDLE9BQXpCO0FBQ0g7O0FBRUQsVUFBTUksQ0FBQyxHQUFHYixPQUFPLENBQUMsZUFBRCxDQUFqQjs7QUFDQSxRQUFJYyxJQUFJLEdBQUdELENBQUMsQ0FBQ04sSUFBRCxDQUFaO0FBQ0EsV0FBT08sSUFBSSxDQUFDWixJQUFELEVBQU9DLElBQVAsRUFBYU0sT0FBYixDQUFYO0FBQ0g7O0FBRUQsTUFBSU0sV0FBVyxHQUFHaEIsS0FBSyxDQUFDRyxJQUFJLENBQUNJLElBQU4sQ0FBdkI7QUFDQSxTQUFPUyxXQUFXLENBQUNDLFFBQVosQ0FBcUJkLElBQXJCLEVBQTJCQyxJQUEzQixDQUFQO0FBQ0g7O0FBQUE7QUFFRGMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCakIsSUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgVHlwZXMgPSByZXF1aXJlKCcuLi90eXBlcycpO1xuXG5mdW5jdGlvbiBhdXRvKGluZm8sIGkxOG4pIHtcbiAgICBwcmU6IHtcbiAgICAgICAgVHlwZXMuQnVpbHRpbi5oYXMoaW5mby50eXBlKSwgYFVua25vd24gcHJpbWl0aXZlIHR5cGU6IFwiJHtpbmZvLnR5cGV9XCIuXCJgO1xuICAgICAgICBpbmZvLmF1dG8sIGBOb3QgYW4gYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZmllbGQgXCIkeyBpbmZvLm5hbWUgfVwiLmA7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZ2VuZXJhdG9yKSB7XG4gICAgICAgIGxldCBuYW1lLCBvcHRpb25zO1xuXG4gICAgICAgIC8vY3VzdG9taXplZCBnZW5lcmF0b3JcbiAgICAgICAgaWYgKHR5cGVvZiBpbmZvLmdlbmVyYXRvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvcjtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGluZm8uZ2VuZXJhdG9yKSkge1xuICAgICAgICAgICAgYXNzZXJ0OiBpbmZvLmdlbmVyYXRvci5sZW5ndGggPiAwO1xuICAgICAgICAgICAgbmFtZSA9IGluZm8uZ2VuZXJhdG9yWzBdO1xuXG4gICAgICAgICAgICBpZiAoaW5mby5nZW5lcmF0b3IubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBpbmZvLmdlbmVyYXRvclsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBpbmZvLmdlbmVyYXRvci5uYW1lO1xuICAgICAgICAgICAgb3B0aW9ucyA9IGluZm8uZ2VuZXJhdG9yLm9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBHID0gcmVxdWlyZSgnLi4vR2VuZXJhdG9ycycpO1xuICAgICAgICBsZXQgZ3RvciA9IEdbbmFtZV07XG4gICAgICAgIHJldHVybiBndG9yKGluZm8sIGkxOG4sIG9wdGlvbnMpO1xuICAgIH0gXG5cbiAgICBsZXQgdHlwZU9iamVyY3QgPSBUeXBlc1tpbmZvLnR5cGVdO1xuICAgIHJldHVybiB0eXBlT2JqZXJjdC5nZW5lcmF0ZShpbmZvLCBpMThuKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gYXV0bzsiXX0=