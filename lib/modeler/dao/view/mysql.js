"use strict";

require("source-map-support/register");

const AST = require('../../util/ast.js');

module.exports = function (dbService, viewName, viewInfo) {
  let spName = dbService.getViewSPName(viewName);
  return [AST.astVarDeclare('viewData', AST.astAwait('this.db.service.query', [AST.astValue('call `' + spName + '`(??);'), AST.astValue(viewInfo.params.map(p => AST.astVarRef(p.name)))]), false, false, 'call stored procedure to get view data')];
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tb2RlbGVyL2Rhby92aWV3L215c3FsLmpzIl0sIm5hbWVzIjpbIkFTVCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGJTZXJ2aWNlIiwidmlld05hbWUiLCJ2aWV3SW5mbyIsInNwTmFtZSIsImdldFZpZXdTUE5hbWUiLCJhc3RWYXJEZWNsYXJlIiwiYXN0QXdhaXQiLCJhc3RWYWx1ZSIsInBhcmFtcyIsIm1hcCIsInAiLCJhc3RWYXJSZWYiLCJuYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLG1CQUFELENBQW5COztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBVUMsU0FBVixFQUFxQkMsUUFBckIsRUFBK0JDLFFBQS9CLEVBQXlDO0FBQ3RELE1BQUlDLE1BQU0sR0FBR0gsU0FBUyxDQUFDSSxhQUFWLENBQXdCSCxRQUF4QixDQUFiO0FBRUEsU0FBTyxDQUNITCxHQUFHLENBQUNTLGFBQUosQ0FBa0IsVUFBbEIsRUFDSVQsR0FBRyxDQUFDVSxRQUFKLENBQWEsdUJBQWIsRUFBc0MsQ0FBQ1YsR0FBRyxDQUFDVyxRQUFKLENBQWEsV0FBV0osTUFBWCxHQUFvQixRQUFqQyxDQUFELEVBQTZDUCxHQUFHLENBQUNXLFFBQUosQ0FBYUwsUUFBUSxDQUFDTSxNQUFULENBQWdCQyxHQUFoQixDQUFvQkMsQ0FBQyxJQUFJZCxHQUFHLENBQUNlLFNBQUosQ0FBY0QsQ0FBQyxDQUFDRSxJQUFoQixDQUF6QixDQUFiLENBQTdDLENBQXRDLENBREosRUFFSSxLQUZKLEVBRVcsS0FGWCxFQUVrQix3Q0FGbEIsQ0FERyxDQUFQO0FBTUgsQ0FURCIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBBU1QgPSByZXF1aXJlKCcuLi8uLi91dGlsL2FzdC5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYlNlcnZpY2UsIHZpZXdOYW1lLCB2aWV3SW5mbykge1xuICAgIGxldCBzcE5hbWUgPSBkYlNlcnZpY2UuZ2V0Vmlld1NQTmFtZSh2aWV3TmFtZSk7XG4gICAgXG4gICAgcmV0dXJuIFtcbiAgICAgICAgQVNULmFzdFZhckRlY2xhcmUoJ3ZpZXdEYXRhJyxcbiAgICAgICAgICAgIEFTVC5hc3RBd2FpdCgndGhpcy5kYi5zZXJ2aWNlLnF1ZXJ5JywgW0FTVC5hc3RWYWx1ZSgnY2FsbCBgJyArIHNwTmFtZSArICdgKD8/KTsnKSwgQVNULmFzdFZhbHVlKHZpZXdJbmZvLnBhcmFtcy5tYXAocCA9PiBBU1QuYXN0VmFyUmVmKHAubmFtZSkpKV0pLFxuICAgICAgICAgICAgZmFsc2UsIGZhbHNlLCAnY2FsbCBzdG9yZWQgcHJvY2VkdXJlIHRvIGdldCB2aWV3IGRhdGEnXG4gICAgICAgIClcbiAgICBdO1xufTsiXX0=