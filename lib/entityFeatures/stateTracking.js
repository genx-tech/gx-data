"use strict";require("source-map-support/register");const Rules=require("../../enum/Rules");const Generators=require("../Generators");module.exports={[Rules.RULE_AFTER_VALIDATION]:(feature,entityModel,context)=>{feature.forEach(featureItem=>{if(featureItem.field in context.latest){let targetState=context.latest[featureItem.field];let timestampFieldName=featureItem.stateMapping[targetState];if(!timestampFieldName){throw new Error(`State "${targetState}" is not one of the pre-defined states of field "${featureItem.field}" of entity "${entityModel.meta.name}".`)}context.latest[timestampFieldName]=Generators.default(entityModel.meta.fields[timestampFieldName],context.i18n)}});return true}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbnRpdHlGZWF0dXJlcy9zdGF0ZVRyYWNraW5nLmpzIl0sIm5hbWVzIjpbIlJ1bGVzIiwicmVxdWlyZSIsIkdlbmVyYXRvcnMiLCJtb2R1bGUiLCJleHBvcnRzIiwiUlVMRV9BRlRFUl9WQUxJREFUSU9OIiwiZmVhdHVyZSIsImVudGl0eU1vZGVsIiwiY29udGV4dCIsImZvckVhY2giLCJmZWF0dXJlSXRlbSIsImZpZWxkIiwibGF0ZXN0IiwidGFyZ2V0U3RhdGUiLCJ0aW1lc3RhbXBGaWVsZE5hbWUiLCJzdGF0ZU1hcHBpbmciLCJFcnJvciIsIm1ldGEiLCJuYW1lIiwiZGVmYXVsdCIsImZpZWxkcyIsImkxOG4iXSwibWFwcGluZ3MiOiJBQUFBLGEsdUNBRUEsS0FBTUEsQ0FBQUEsS0FBSyxDQUFHQyxPQUFPLENBQUMsa0JBQUQsQ0FBckIsQ0FDQSxLQUFNQyxDQUFBQSxVQUFVLENBQUdELE9BQU8sQ0FBQyxlQUFELENBQTFCLENBT0FFLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiLENBQUNKLEtBQUssQ0FBQ0sscUJBQVAsRUFBK0IsQ0FBQ0MsT0FBRCxDQUFVQyxXQUFWLENBQXVCQyxPQUF2QixHQUFtQyxDQUM5REYsT0FBTyxDQUFDRyxPQUFSLENBQWdCQyxXQUFXLEVBQUksQ0FDM0IsR0FBSUEsV0FBVyxDQUFDQyxLQUFaLEdBQXFCSCxDQUFBQSxPQUFPLENBQUNJLE1BQWpDLENBQXlDLENBQ3JDLEdBQUlDLENBQUFBLFdBQVcsQ0FBR0wsT0FBTyxDQUFDSSxNQUFSLENBQWVGLFdBQVcsQ0FBQ0MsS0FBM0IsQ0FBbEIsQ0FDQSxHQUFJRyxDQUFBQSxrQkFBa0IsQ0FBR0osV0FBVyxDQUFDSyxZQUFaLENBQXlCRixXQUF6QixDQUF6QixDQUNBLEdBQUksQ0FBQ0Msa0JBQUwsQ0FBeUIsQ0FDckIsS0FBTSxJQUFJRSxDQUFBQSxLQUFKLENBQVcsVUFBU0gsV0FBWSxvREFBbURILFdBQVcsQ0FBQ0MsS0FBTSxnQkFBZUosV0FBVyxDQUFDVSxJQUFaLENBQWlCQyxJQUFLLElBQTFJLENBQ1QsQ0FDRFYsT0FBTyxDQUFDSSxNQUFSLENBQWVFLGtCQUFmLEVBQXFDWixVQUFVLENBQUNpQixPQUFYLENBQW1CWixXQUFXLENBQUNVLElBQVosQ0FBaUJHLE1BQWpCLENBQXdCTixrQkFBeEIsQ0FBbkIsQ0FBZ0VOLE9BQU8sQ0FBQ2EsSUFBeEUsQ0FDeEMsQ0FDSixDQVRELEVBV0EsTUFBTyxLQUNWLENBZFksQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgUnVsZXMgPSByZXF1aXJlKCcuLi8uLi9lbnVtL1J1bGVzJyk7XG5jb25zdCBHZW5lcmF0b3JzID0gcmVxdWlyZSgnLi4vR2VuZXJhdG9ycycpO1xuXG4vKipcbiAqIEEgcnVsZSBzcGVjaWZpZXMgdGhlIGNoYW5nZSBvZiBzdGF0ZSB3aWxsIGJlIHRyYWNrZWQgYXV0b21hdGljYWxseS5cbiAqIEBtb2R1bGUgRW50aXR5RmVhdHVyZVJ1bnRpbWVfU3RhdGVUcmFja2luZ1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFtSdWxlcy5SVUxFX0FGVEVSX1ZBTElEQVRJT05dOiAoZmVhdHVyZSwgZW50aXR5TW9kZWwsIGNvbnRleHQpID0+IHtcbiAgICAgICAgZmVhdHVyZS5mb3JFYWNoKGZlYXR1cmVJdGVtID0+IHtcbiAgICAgICAgICAgIGlmIChmZWF0dXJlSXRlbS5maWVsZCBpbiBjb250ZXh0LmxhdGVzdCkge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRTdGF0ZSA9IGNvbnRleHQubGF0ZXN0W2ZlYXR1cmVJdGVtLmZpZWxkXTtcbiAgICAgICAgICAgICAgICBsZXQgdGltZXN0YW1wRmllbGROYW1lID0gZmVhdHVyZUl0ZW0uc3RhdGVNYXBwaW5nW3RhcmdldFN0YXRlXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRpbWVzdGFtcEZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0YXRlIFwiJHt0YXJnZXRTdGF0ZX1cIiBpcyBub3Qgb25lIG9mIHRoZSBwcmUtZGVmaW5lZCBzdGF0ZXMgb2YgZmllbGQgXCIke2ZlYXR1cmVJdGVtLmZpZWxkfVwiIG9mIGVudGl0eSBcIiR7ZW50aXR5TW9kZWwubWV0YS5uYW1lfVwiLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LmxhdGVzdFt0aW1lc3RhbXBGaWVsZE5hbWVdID0gR2VuZXJhdG9ycy5kZWZhdWx0KGVudGl0eU1vZGVsLm1ldGEuZmllbGRzW3RpbWVzdGFtcEZpZWxkTmFtZV0sIGNvbnRleHQuaTE4bik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyAgICAgICAgXG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTsiXX0=